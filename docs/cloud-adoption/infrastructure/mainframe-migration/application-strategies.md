---
title: 大型机迁移：大型机应用程序迁移
description: 将应用程序从大型机环境迁移到 Azure，这是经过验证的、高度可用且可缩放的基础结构，适用于当前在大型机上运行的系统
author: njray
ms.date: 12/26/2018
ms.openlocfilehash: dcae5077e26ab8ba9b08e0da71a5e69d0d9f62e3
ms.sourcegitcommit: 273e690c0cfabbc3822089c7d8bc743ef41d2b6e
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/08/2019
ms.locfileid: "55900494"
---
# <a name="mainframe-application-migration"></a><span data-ttu-id="58361-103">大型机应用程序迁移</span><span class="sxs-lookup"><span data-stu-id="58361-103">Mainframe application migration</span></span>

<span data-ttu-id="58361-104">将应用程序从大型机环境迁移到 Azure 时，大多数团队都遵循这一有效方法：尽可能地随时随地重用，然后开始分阶段部署，重新编写或替换应用程序。</span><span class="sxs-lookup"><span data-stu-id="58361-104">When migrating applications from mainframe environments to Azure, most teams follow a pragmatic approach: reuse wherever and whenever possible, and then start a phased deployment where applications are rewritten or replaced.</span></span>

<span data-ttu-id="58361-105">应用程序迁移通常涉及以下一种或多种策略：</span><span class="sxs-lookup"><span data-stu-id="58361-105">Application migration typically involves one or more of the following strategies:</span></span>

- <span data-ttu-id="58361-106">重新托管：可以从大型机移动现有代码、程序和应用程序，然后重新编译代码，以在云实例中托管的大型机仿真器上运行。</span><span class="sxs-lookup"><span data-stu-id="58361-106">Rehost: You can move existing code, programs, and applications from the mainframe, and then recompile the code to run in a mainframe emulator hosted in a cloud instance.</span></span> <span data-ttu-id="58361-107">此方法通常首先将应用程序移至基于云的仿真器，然后将数据库迁移到基于云的数据库。</span><span class="sxs-lookup"><span data-stu-id="58361-107">This approach typically starts with moving applications to a cloud-based emulator, and then migrating the database to a cloud-based database.</span></span> <span data-ttu-id="58361-108">需要进行一些工程和重构以及数据和文件转换。</span><span class="sxs-lookup"><span data-stu-id="58361-108">Some engineering and refactoring are required along with data and file conversions.</span></span>

    <span data-ttu-id="58361-109">或者，可以使用传统的托管提供程序重新托管。</span><span class="sxs-lookup"><span data-stu-id="58361-109">Alternatively, you can rehost using a traditional hosting provider.</span></span> <span data-ttu-id="58361-110">云的主要优点之一是外包基础结构管理。</span><span class="sxs-lookup"><span data-stu-id="58361-110">One of the principal benefits of the cloud is outsourcing infrastructure management.</span></span> <span data-ttu-id="58361-111">可以找到托管大型机工作负荷的数据中心提供程序。</span><span class="sxs-lookup"><span data-stu-id="58361-111">You can find a datacenter provider that will host your mainframe workloads for you.</span></span> <span data-ttu-id="58361-112">该模型可能会争得时间，减少供应商锁定，并节省临时成本。</span><span class="sxs-lookup"><span data-stu-id="58361-112">This model may buy time, reduce vendor lock in, and produce interim cost savings.</span></span>

- <span data-ttu-id="58361-113">停用：在迁移之前，应停用所有不再需要的应用程序。</span><span class="sxs-lookup"><span data-stu-id="58361-113">Retire: All applications that are no longer needed should be retired before migration.</span></span>

- <span data-ttu-id="58361-114">重新生成：一些组织选择使用现代技术完全重写程序。</span><span class="sxs-lookup"><span data-stu-id="58361-114">Rebuild: Some organizations choose to completely rewrite programs using modern techniques.</span></span> <span data-ttu-id="58361-115">鉴于此方法增加了成本和复杂性，它并不像直接迁移方法那样普遍。</span><span class="sxs-lookup"><span data-stu-id="58361-115">Given the added cost and complexity of this approach, it’s not as common as a lift-and-shift approach.</span></span> <span data-ttu-id="58361-116">通常在此类迁移后，使用代码转换引擎开始替换模块和代码是有意义的。</span><span class="sxs-lookup"><span data-stu-id="58361-116">Often after this type of migration, it makes sense to begin replacing modules and code using code transformation engines.</span></span>

- <span data-ttu-id="58361-117">将：此方法将大型机功能替换为云中的等效功能。</span><span class="sxs-lookup"><span data-stu-id="58361-117">Replace: This approach replaces mainframe functionality with equivalent features in the cloud.</span></span> <span data-ttu-id="58361-118">服务型软件 (SaaS) 是一个选项，该选项使用专门为企业关系（例如，财务、人力资源、制造业或企业资源计划）而创建的解决方案。</span><span class="sxs-lookup"><span data-stu-id="58361-118">Software as a service (SaaS) is one option, which is using a solution created specifically for an enterprise concern, such as finance, human resources, manufacturing, or enterprise resource planning.</span></span> <span data-ttu-id="58361-119">此外，许多特定于行业的应用现可用于解决自定义大型机解决方案以前解决的问题。</span><span class="sxs-lookup"><span data-stu-id="58361-119">In addition, many industry-specific apps are now available to solve problems that custom mainframe solutions used to previously solve.</span></span>

<span data-ttu-id="58361-120">应考虑计划要最初迁移的工作负荷开始，然后确定移动关联应用程序、旧版代码库和数据库的需求。</span><span class="sxs-lookup"><span data-stu-id="58361-120">You should consider starting by planning those workloads that you want to initially migrate, and then determine those requirements for moving associated applications, legacy codebases, and databases.</span></span>

## <a name="mainframe-emulation-in-azure"></a><span data-ttu-id="58361-121">Azure 中的大型机仿真</span><span class="sxs-lookup"><span data-stu-id="58361-121">Mainframe emulation in Azure</span></span>

<span data-ttu-id="58361-122">Azure 云服务可以仿真传统的大型机环境，由此可重用现有的大型机代码和应用程序。</span><span class="sxs-lookup"><span data-stu-id="58361-122">Azure cloud services can emulate traditional mainframe environments, enabling you to reuse existing mainframe code and applications.</span></span> <span data-ttu-id="58361-123">可仿真的常见服务器组件包括联机事务处理 (OLTP)、批和数据引入系统。</span><span class="sxs-lookup"><span data-stu-id="58361-123">Common server components that you can emulate include online transaction processing (OLTP), batch, and data ingestion systems.</span></span>

### <a name="oltp-systems"></a><span data-ttu-id="58361-124">OLTP 系统</span><span class="sxs-lookup"><span data-stu-id="58361-124">OLTP systems</span></span>

<span data-ttu-id="58361-125">许多大型机都有 OLTP 系统，可以为大量用户处理数千或数百万次更新。</span><span class="sxs-lookup"><span data-stu-id="58361-125">Many mainframes have OLTP systems that process thousands or millions of updates for huge numbers of users.</span></span> <span data-ttu-id="58361-126">这些应用程序通常使用事务处理和屏幕窗体处理软件，例如客户信息控制系统 (CICS)、信息管理系统 (IMS) 和终端接口处理器 (TIP)。</span><span class="sxs-lookup"><span data-stu-id="58361-126">These applications often use transaction processing and screen-form handling software, such as customer information control system (CICS), information management systes (IMS), and terminal interface processor (TIP).</span></span>

<span data-ttu-id="58361-127">将 OLTP 应用程序移至 Azure 时，大型机事务处理 (TP) 监视器的仿真器可以使用 Azure 上的虚拟机 (VM) 作为基础结构即服务 (IaaS) 运行。</span><span class="sxs-lookup"><span data-stu-id="58361-127">When moving OLTP applications to Azure, emulators for mainframe transaction processing (TP) monitors are available to run as infrastructure as a service (IaaS) using virtual machines (VMs) on Azure.</span></span> <span data-ttu-id="58361-128">此外可以通过 Web 服务器实现屏幕处理和窗体功能。</span><span class="sxs-lookup"><span data-stu-id="58361-128">The screen handling and form functionality can also be implemented by web servers.</span></span> <span data-ttu-id="58361-129">此方法可以与数据库 API 结合使用，例如 ActiveX 数据对象 (ADO)、开放式数据库连接 (ODBC) 和用于数据访问和事务的 Java 数据库连接 (JDBC)。</span><span class="sxs-lookup"><span data-stu-id="58361-129">This approach can be combined with database APIs, such as ActiveX data object (ADO), open database connectivity (ODBC), and Java database connectivity (JDBC) for data access and transactions.</span></span>

### <a name="time-constrained-batch-updates"></a><span data-ttu-id="58361-130">时间约束的批量更新</span><span class="sxs-lookup"><span data-stu-id="58361-130">Time-constrained batch updates</span></span>

<span data-ttu-id="58361-131">许多大型机系统每月或每年更新数百万个帐户记录，例如银行、保险和政府中使用的记录。</span><span class="sxs-lookup"><span data-stu-id="58361-131">Many mainframe systems perform monthly or annual updates of millions of account records, such as those used in banking, insurance, and government.</span></span> <span data-ttu-id="58361-132">大型机通过提供高吞吐量数据处理系统来处理这些类型的工作负荷。</span><span class="sxs-lookup"><span data-stu-id="58361-132">Mainframes handle these types of workloads by offering high-throughput data handling systems.</span></span> <span data-ttu-id="58361-133">大型机批处理作业通常是串行的，并且取决于大型机主干提供的每秒输入/输出操作 (IOPS) 以提高性能。</span><span class="sxs-lookup"><span data-stu-id="58361-133">Mainframes batch jobs are typically serial in nature and depend on the input/output operations per second (IOPS) provided by the mainframe backbone for performance.</span></span>

<span data-ttu-id="58361-134">基于云的批环境使用并行计算和高速网络来提高性能。</span><span class="sxs-lookup"><span data-stu-id="58361-134">Cloud-based batch environments use parallel compute and high-speed networks for performance.</span></span> <span data-ttu-id="58361-135">如果需要优化批性能，Azure 提供了各种计算、存储和网络选项。</span><span class="sxs-lookup"><span data-stu-id="58361-135">If you need to optimize batch performance, Azure provides various compute, storage, and networking options.</span></span>

### <a name="data-ingestion-systems"></a><span data-ttu-id="58361-136">数据引入系统</span><span class="sxs-lookup"><span data-stu-id="58361-136">Data ingestion systems</span></span>

<span data-ttu-id="58361-137">大型机从零售业、金融服务业、制造业和其他处理解决方案中获取大批量数据。</span><span class="sxs-lookup"><span data-stu-id="58361-137">Mainframes ingest large batches of data from retail, financial services, manufacturing, and other solutions for processing.</span></span> <span data-ttu-id="58361-138">借助 Azure，可以使用简单的命令行实用程序（例如，[AzCopy](/azure/storage/common/storage-use-azcopy)）将数据复制到存储位置或从存储位置复制数据。</span><span class="sxs-lookup"><span data-stu-id="58361-138">With Azure, you can use simple command-line utilities such as [AzCopy](/azure/storage/common/storage-use-azcopy) for copying data to and from storage location.</span></span> <span data-ttu-id="58361-139">还可以使用 [Azure 数据工厂](/azure/data-factory/introduction)服务，由此可从不同的数据存储中引入数据，以便创建和计划数据驱动的工作流。</span><span class="sxs-lookup"><span data-stu-id="58361-139">You can also use the [Azure Data Factory](/azure/data-factory/introduction) service, enabling you to ingest data from disparate data stores to create and schedule data-driven workflows.</span></span>

<span data-ttu-id="58361-140">除了仿真环境，Azure 还提供可以增强现有大型机环境的平台即服务 (PaaS) 和分析服务。</span><span class="sxs-lookup"><span data-stu-id="58361-140">In addition to emulation environments, Azure provides platform as a service (PaaS) and analytics services that can enhance existing mainframe environments.</span></span>

## <a name="migrate-oltp-workloads-to-azure"></a><span data-ttu-id="58361-141">将 OLTP 工作负荷迁移到 Azure</span><span class="sxs-lookup"><span data-stu-id="58361-141">Migrate OLTP workloads to Azure</span></span>

<span data-ttu-id="58361-142">直接迁移方法是将现有应用程序快速迁移到 Azure 的无代码选项。</span><span class="sxs-lookup"><span data-stu-id="58361-142">The lift-and-shift approach is the no code option for quickly migrating existing applications to Azure.</span></span> <span data-ttu-id="58361-143">每个应用程序按原样进行迁移，既发挥了云的优势，又无需承担更改代码所带来的风险或成本。</span><span class="sxs-lookup"><span data-stu-id="58361-143">Each application is migrated as is, which provides the benefits of the cloud without the risks or costs of making code changes.</span></span> <span data-ttu-id="58361-144">在 Azure 上使用用于大型机事务处理 (TP) 监视器的仿真器支持此方法。</span><span class="sxs-lookup"><span data-stu-id="58361-144">Using an emulator for mainframe transaction processing (TP) monitors on Azure supports this approach.</span></span>

<span data-ttu-id="58361-145">TP 监视器可从各种供应商处获得，并在虚拟机上运行，这是 Azure 上的基础结构即服务 (IaaS) 选项。</span><span class="sxs-lookup"><span data-stu-id="58361-145">TP monitors are available from various vendors and run on virtual machines, an infrastructure as a service (IaaS) option on Azure.</span></span> <span data-ttu-id="58361-146">下面的前后图显示了 IBM DB 2（关系数据库管理系统 (DBMS)）支持的联机应用程序在 IBM z/OS 大型机上的迁移。</span><span class="sxs-lookup"><span data-stu-id="58361-146">The following before and after diagrams show a migration of an online application backed by IBM DB2, a relational database management system (DBMS), on an IBM z/OS mainframe.</span></span> <span data-ttu-id="58361-147">用于 z/OS 的 DB2 使用虚拟存储访问方法 (VSAM) 文件来存储数据，并使用索引顺序访问方法 (ISAM) 来处理平面文件。</span><span class="sxs-lookup"><span data-stu-id="58361-147">DB2 for z/OS uses virtual storage access method (VSAM) files to store the data and Indexed Sequential Access Method (ISAM) for flat files.</span></span> <span data-ttu-id="58361-148">此体系结构还使用 CICS 进行事务监视。</span><span class="sxs-lookup"><span data-stu-id="58361-148">This architecture also uses CICS for transaction monitoring.</span></span>

![使用仿真软件将大型机环境直接迁移到 Azure](../../_images/mainframe-migration/mainframe-vs-azure.png)

<span data-ttu-id="58361-150">在 Azure 上，仿真环境用于运行 TP 管理器和使用 JCL 的批处理作业。</span><span class="sxs-lookup"><span data-stu-id="58361-150">On Azure, emulation environments are used to run the TP manager and the batch jobs that use JCL.</span></span> <span data-ttu-id="58361-151">在数据层中，DB2 替换为 [Azure SQL 数据库](/azure/sql-database/sql-database-technical-overview)，但也可以使用 Microsoft SQL Server、DB2 LUW 或 Oracle Database。</span><span class="sxs-lookup"><span data-stu-id="58361-151">In the data tier, DB2 is replaced by [Azure SQL Database](/azure/sql-database/sql-database-technical-overview), although Microsoft SQL Server, DB2 LUW, or Oracle Database can also be used.</span></span> <span data-ttu-id="58361-152">仿真器支持 IMS、VSAM 和 SEQ。</span><span class="sxs-lookup"><span data-stu-id="58361-152">An emulator supports IMS, VSAM, and SEQ.</span></span> <span data-ttu-id="58361-153">大型机的系统管理工具替换为在 VM 中运行的 Azure 服务和其他供应商提供的软件。</span><span class="sxs-lookup"><span data-stu-id="58361-153">The mainframe’s system management tools are replaced by Azure services, and software from other vendors, that run in VMs.</span></span>

<span data-ttu-id="58361-154">通常使用 Web 服务器实现屏幕处理和窗体输入功能，此功能可以与数据库 API（如ADO、ODBC 和 JDBC）结合使用，进行数据访问和事务处理。</span><span class="sxs-lookup"><span data-stu-id="58361-154">The screen handling and form entry functionality is commonly implemented using web servers, which can be combined with database APIs, such as ADO, ODBC, and JDBC for data access and transactions.</span></span> <span data-ttu-id="58361-155">要使用的 Azure IaaS 组件的确切阵容取决于你喜欢的操作系统。</span><span class="sxs-lookup"><span data-stu-id="58361-155">The exact line-up of Azure IaaS components to use depends on the operating system you prefer.</span></span> <span data-ttu-id="58361-156">例如：</span><span class="sxs-lookup"><span data-stu-id="58361-156">For example:</span></span>

- <span data-ttu-id="58361-157">基于 Windows 的 VM：用于屏幕处理和业务逻辑的 Internet Information Server (IIS) 以及 ASP.NET。</span><span class="sxs-lookup"><span data-stu-id="58361-157">Windows–based VMs: Internet Information Server (IIS) along with ASP.NET for the screen handling and business logic.</span></span> <span data-ttu-id="58361-158">使用 ADO.NET 进行数据访问和事务处理。</span><span class="sxs-lookup"><span data-stu-id="58361-158">Use ADO.NET for data access and transactions.</span></span>

- <span data-ttu-id="58361-159">基于 Linux 的 VM：提供基于 Java 的应用程序服务器，例如用于屏幕处理和基于 Java 的业务功能的 Apache Tomcat。</span><span class="sxs-lookup"><span data-stu-id="58361-159">Linux–based VMs: The Java-based application servers that are available, such as Apache Tomcat for screen handling and Java-based business functionality.</span></span> <span data-ttu-id="58361-160">使用 JDBC 进行数据访问和事务处理。</span><span class="sxs-lookup"><span data-stu-id="58361-160">Use JDBC for data access and transactions.</span></span>

## <a name="migrate-batch-workloads-to-azure"></a><span data-ttu-id="58361-161">将批工作负荷迁移到 Azure</span><span class="sxs-lookup"><span data-stu-id="58361-161">Migrate batch workloads to Azure</span></span>

<span data-ttu-id="58361-162">Azure 中的批操作与大型机上的典型批环境不同。</span><span class="sxs-lookup"><span data-stu-id="58361-162">Batch operations in Azure differ from the typical batch environment on mainframes.</span></span> <span data-ttu-id="58361-163">大型机批处理作业通常是串行的，并且取决于大型机主干提供的 (IOPS) 以提高性能。</span><span class="sxs-lookup"><span data-stu-id="58361-163">Mainframe batch jobs are typically serial in nature and depend on the IOPS provided by the mainframe backbone for performance.</span></span> <span data-ttu-id="58361-164">基于云的批环境使用并行计算和高速网络来提高性能。</span><span class="sxs-lookup"><span data-stu-id="58361-164">Cloud-based batch environments use parallel computing and high-speed networks for performance.</span></span>

<span data-ttu-id="58361-165">要使用 Azure 优化批性能，请考虑[计算](/azure/virtual-machines/windows/overview)、[存储](/azure/storage/blobs/storage-blobs-introduction)、[网络](https://azure.microsoft.com/blog/maximize-your-vm-s-performance-with-accelerated-networking-now-generally-available-for-both-windows-and-linux/)以及[监视](/azure/azure-monitor/overview)选项，如下所示。</span><span class="sxs-lookup"><span data-stu-id="58361-165">To optimize batch performance using Azure, consider the [compute](/azure/virtual-machines/windows/overview), [storage](/azure/storage/blobs/storage-blobs-introduction), [networking](https://azure.microsoft.com/blog/maximize-your-vm-s-performance-with-accelerated-networking-now-generally-available-for-both-windows-and-linux/), and [monitoring](/azure/azure-monitor/overview) options as follows.</span></span>

### <a name="compute"></a><span data-ttu-id="58361-166">计算</span><span class="sxs-lookup"><span data-stu-id="58361-166">Compute</span></span>

<span data-ttu-id="58361-167">使用：</span><span class="sxs-lookup"><span data-stu-id="58361-167">Use:</span></span>

- <span data-ttu-id="58361-168">具有最高时钟速度的 VM。</span><span class="sxs-lookup"><span data-stu-id="58361-168">VMs with the highest clock speed.</span></span> <span data-ttu-id="58361-169">大型机应用程序通常是单线程的，并且大型机 CPU 具有非常高的时钟速度。</span><span class="sxs-lookup"><span data-stu-id="58361-169">Mainframe applications are often single-threaded and mainframe CPUs have a very high clock speed.</span></span>

- <span data-ttu-id="58361-170">具有较大内存容量的 VM 允许缓存数据和应用程序工作区域。</span><span class="sxs-lookup"><span data-stu-id="58361-170">VMs with large memory capacity to allow caching of data and application work areas.</span></span>

- <span data-ttu-id="58361-171">如果应用程序支持多线程，具有更高密度 vCPU 的 VM 可以利用多线程处理。</span><span class="sxs-lookup"><span data-stu-id="58361-171">VMs with higher density vCPUs to take advantage of multi-threaded processing if the application supports multiple threads.</span></span>

- <span data-ttu-id="58361-172">并行处理，因为 Azure 可以轻松横向扩展以进行并行处理，为批运行提供更多的计算能力。</span><span class="sxs-lookup"><span data-stu-id="58361-172">Parallel processing, as Azure easily scales out for parallel processing, delivering more compute power for a batch run.</span></span>

### <a name="storage"></a><span data-ttu-id="58361-173">存储</span><span class="sxs-lookup"><span data-stu-id="58361-173">Storage</span></span>

<span data-ttu-id="58361-174">使用：</span><span class="sxs-lookup"><span data-stu-id="58361-174">Use:</span></span>

- <span data-ttu-id="58361-175">[Azure 高级 SSD](/azure/virtual-machines/windows/premium-storage) 或 [Azure 超级 SSD](/azure/virtual-machines/windows/disks-ultra-ssd) 适用于最大的可用 IOPS。</span><span class="sxs-lookup"><span data-stu-id="58361-175">[Azure Premium SSD](/azure/virtual-machines/windows/premium-storage) or [Azure Ultra SSD](/azure/virtual-machines/windows/disks-ultra-ssd) for maximum available IOPS.</span></span>

- <span data-ttu-id="58361-176">使用多个磁盘进行条带化，以在每个存储大小中获得更多 IOPS。</span><span class="sxs-lookup"><span data-stu-id="58361-176">Striping with multiple disks for more IOPS per storage size.</span></span>

- <span data-ttu-id="58361-177">对存储进行分区以在多个 Azure 存储设备上分配 IO。</span><span class="sxs-lookup"><span data-stu-id="58361-177">Partitioning for storage to spread IO over multiple Azure storage devices.</span></span>

### <a name="networking"></a><span data-ttu-id="58361-178">网络</span><span class="sxs-lookup"><span data-stu-id="58361-178">Networking</span></span>

- <span data-ttu-id="58361-179">使用 [Azure 加速网络](/azure/virtual-network/create-vm-accelerated-networking-powershell)以尽量降低延迟。</span><span class="sxs-lookup"><span data-stu-id="58361-179">Use [Azure Accelerated Networking](/azure/virtual-network/create-vm-accelerated-networking-powershell) to minimize latency.</span></span>

### <a name="monitoring"></a><span data-ttu-id="58361-180">监视</span><span class="sxs-lookup"><span data-stu-id="58361-180">Monitoring</span></span>

- <span data-ttu-id="58361-181">使用监视工具 [Azure Monitor](/azure/azure-monitor/overview)、[Azure Application Insights](/azure/application-insights/app-insights-overview)，甚至 Azure 日志使管理员能够监视批运行的任何过度性能并帮助消除瓶颈。</span><span class="sxs-lookup"><span data-stu-id="58361-181">Use monitoring tools, [Azure Monitor](/azure/azure-monitor/overview), [Azure Application Insights](/azure/application-insights/app-insights-overview), and even the Azure logs enable administrators to monitor any over performance of batch runs and help eliminate bottlenecks.</span></span>

## <a name="migrate-development-environments"></a><span data-ttu-id="58361-182">迁移开发环境</span><span class="sxs-lookup"><span data-stu-id="58361-182">Migrate development environments</span></span>

<span data-ttu-id="58361-183">云的分布式体系结构依赖于一组不同的开发工具，这些工具提供了新式做法和编程语言的优点。</span><span class="sxs-lookup"><span data-stu-id="58361-183">The cloud’s distributed architectures rely on a different set of development tools that provide the advantage of modern practices and programming languages.</span></span> <span data-ttu-id="58361-184">要简化此转换，可以将开发环境与其他旨在仿真 IBM z/OS 环境的工具结合使用。</span><span class="sxs-lookup"><span data-stu-id="58361-184">To ease this transition, you can use a development environment with other tools that are designed to emulate IBM z/OS environments.</span></span> <span data-ttu-id="58361-185">以下列表显示 Microsoft 和其他供应商提供的选项：</span><span class="sxs-lookup"><span data-stu-id="58361-185">The following list shows options from Microsoft and other vendors:</span></span>

| <span data-ttu-id="58361-186">组件</span><span class="sxs-lookup"><span data-stu-id="58361-186">Component</span></span>        | <span data-ttu-id="58361-187">Azure 选项</span><span class="sxs-lookup"><span data-stu-id="58361-187">Azure Options</span></span>                                                                                                                                  |
|------------------|---------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="58361-188">z/OS</span><span class="sxs-lookup"><span data-stu-id="58361-188">z/OS</span></span>             | <span data-ttu-id="58361-189">Windows、Linux 或 UNIX</span><span class="sxs-lookup"><span data-stu-id="58361-189">Windows, Linux, or UNIX</span></span>                                                                                                                      |
| <span data-ttu-id="58361-190">CICS</span><span class="sxs-lookup"><span data-stu-id="58361-190">CICS</span></span>             | <span data-ttu-id="58361-191">Azure 服务由 Micro Focus、Oracle、GT Software (Fujitsu)、TmaxSoft、Raincode 和 NTT 数据提供，或使用 kubernetes 重写</span><span class="sxs-lookup"><span data-stu-id="58361-191">Azure services offered by Micro Focus, Oracle, GT Software (Fujitsu), TmaxSoft, Raincode, and NTT Data, or rewrite using Kubernetes</span></span> |
| <span data-ttu-id="58361-192">IMS</span><span class="sxs-lookup"><span data-stu-id="58361-192">IMS</span></span>              | <span data-ttu-id="58361-193">Micro Focus 和 Oracle 所提供的 Azure 服务</span><span class="sxs-lookup"><span data-stu-id="58361-193">Azure services offered by Micro Focus and Oracle</span></span>                                                                                  |
| <span data-ttu-id="58361-194">汇编程序</span><span class="sxs-lookup"><span data-stu-id="58361-194">Assembler</span></span>        | <span data-ttu-id="58361-195">Raincode 和 TmaxSoft 提供的 Azure 服务；或 COBOL、C 或 Java，或映射到操作系统函数</span><span class="sxs-lookup"><span data-stu-id="58361-195">Azure services from Raincode and TmaxSoft; or COBOL, C, or Java, or map to operating system functions</span></span>               |
| <span data-ttu-id="58361-196">JCL</span><span class="sxs-lookup"><span data-stu-id="58361-196">JCL</span></span>              | <span data-ttu-id="58361-197">JCL、PowerShell 或其他脚本工具</span><span class="sxs-lookup"><span data-stu-id="58361-197">JCL, PowerShell, or other scripting tools</span></span>                                                                                                   |
| <span data-ttu-id="58361-198">COBOL</span><span class="sxs-lookup"><span data-stu-id="58361-198">COBOL</span></span>            | <span data-ttu-id="58361-199">COBOL、C 或 Java</span><span class="sxs-lookup"><span data-stu-id="58361-199">COBOL, C, or Java</span></span>                                                                                                                            |
| <span data-ttu-id="58361-200">Natural</span><span class="sxs-lookup"><span data-stu-id="58361-200">Natural</span></span>          | <span data-ttu-id="58361-201">Natural、COBOL、C 或 Java</span><span class="sxs-lookup"><span data-stu-id="58361-201">Natural, COBOL, C, or Java</span></span>                                                                                                                  |
| <span data-ttu-id="58361-202">FORTRAN 和 PL/I</span><span class="sxs-lookup"><span data-stu-id="58361-202">FORTRAN and PL/I</span></span> | <span data-ttu-id="58361-203">FORTRAN、PL/I、COBOL、C 或 Java</span><span class="sxs-lookup"><span data-stu-id="58361-203">FORTRAN, PL/I, COBOL, C, or Java</span></span>                                                                                                           |
| <span data-ttu-id="58361-204">REXX 和 PL/I</span><span class="sxs-lookup"><span data-stu-id="58361-204">REXX and PL/I</span></span>    | <span data-ttu-id="58361-205">REXX、PowerShell 或其他脚本工具</span><span class="sxs-lookup"><span data-stu-id="58361-205">REXX, PowerShell, or other scripting tools</span></span>                                                                                                  |

## <a name="migrate-databases-and-data"></a><span data-ttu-id="58361-206">将数据库和数据迁移</span><span class="sxs-lookup"><span data-stu-id="58361-206">Migrate databases and data</span></span>

<span data-ttu-id="58361-207">应用程序迁移通常涉及重新托管的数据层。</span><span class="sxs-lookup"><span data-stu-id="58361-207">Application migration usually involves rehosting the data tier.</span></span> <span data-ttu-id="58361-208">借助 [Azure 数据库迁移服务](/azure/dms/dms-overview)，可以将 SQL Server、开放源代码和其他关系数据库迁移到 Azure 上完全托管的解决方案，例如 [Azure SQL 数据库托管实例](/azure/sql-database/sql-database-managed-instance)、[Azure Database Service for PostgreSQL](/azure/postgresql/overview) 和 [Azure Database for MySQL](/azure/mysql/overview)。</span><span class="sxs-lookup"><span data-stu-id="58361-208">You can migrate SQL Server, open-source, and other relational databases to fully-managed solutions on Azure, such as [Azure SQL Database Managed Instance](/azure/sql-database/sql-database-managed-instance), [Azure Database Service for PostgreSQL](/azure/postgresql/overview), and [Azure Database for MySQL](/azure/mysql/overview) with [Azure Database Migration Service](/azure/dms/dms-overview).</span></span>

<span data-ttu-id="58361-209">例如，如果大型机数据层使用以下项，则可以进行迁移：</span><span class="sxs-lookup"><span data-stu-id="58361-209">For example, you can migrate if the mainframe data tier uses:</span></span>

- <span data-ttu-id="58361-210">IBM DB2 数据库或 IMS 数据库，请在 Azure 上使用 Azure SQL 数据库、SQL Server、DB2 LUW 或 Oracle Database。</span><span class="sxs-lookup"><span data-stu-id="58361-210">IBM DB2 or an IMS database, use Azure SQL database, SQL Server, DB2 LUW, or Oracle Database on Azure.</span></span>

- <span data-ttu-id="58361-211">VSAM 和其他平面文件，使用适用于 Azure SQL、SQL Server、DB2 LUW 或 Oracle 的索引顺序访问方法 (ISAM) 平面文件。</span><span class="sxs-lookup"><span data-stu-id="58361-211">VSAM and other flat files, use Indexed Sequential Access Method (ISAM) flat files for Azure SQL, SQL Server, DB2 LUW, or Oracle.</span></span>

- <span data-ttu-id="58361-212">Generation Date Groups (GDG)，迁移到 Azure 上使用命名约定的文件和提供与 GDG 类似功能的文件扩展名的文件。</span><span class="sxs-lookup"><span data-stu-id="58361-212">Generation Date Groups (GDGs), migrate to files on Azure that use a naming convention and filename extensions that provide similar functionality to GDGs.</span></span>

<span data-ttu-id="58361-213">IBM 数据层包括一些也必须迁移的关键组件。</span><span class="sxs-lookup"><span data-stu-id="58361-213">The IBM data tier includes several key components that you must also migrate.</span></span> <span data-ttu-id="58361-214">例如，迁移数据库时，还要迁移池中包含的数据集合（每个数据集合都包含 dbextents，其中 dbextents 是 z/OS VSAM 数据集）。</span><span class="sxs-lookup"><span data-stu-id="58361-214">For example, when you migrate a database, you also migrate a collection of data contained in pools, each containing dbextents, which are z/OS VSAM data sets.</span></span> <span data-ttu-id="58361-215">迁移必须包括标识存储池中数据位置的目录。</span><span class="sxs-lookup"><span data-stu-id="58361-215">Your migration must include the directory that identifies data locations in the storage pools.</span></span> <span data-ttu-id="58361-216">此外，迁移计划必须考虑数据库日志，其中包含对数据库执行操作的记录。</span><span class="sxs-lookup"><span data-stu-id="58361-216">Also, your migration plan must consider the database log, which contains a record of operations performed on the database.</span></span> <span data-ttu-id="58361-217">数据库可以有一个、两个（双日志或备用日志）日志或四个（双日志和备用日志）日志。</span><span class="sxs-lookup"><span data-stu-id="58361-217">A database can have one, two (dual or alternate), or four (dual and alternate) logs.</span></span>

<span data-ttu-id="58361-218">数据库迁移还包含以下组件：</span><span class="sxs-lookup"><span data-stu-id="58361-218">Database migration also includes these components:</span></span>

- <span data-ttu-id="58361-219">数据库管理器：提供对数据库中数据的访问。</span><span class="sxs-lookup"><span data-stu-id="58361-219">Database manager: Provides access to data in the database.</span></span> <span data-ttu-id="58361-220">在 z/OS 环境中，数据库管理器可在其自己的分区中运行。</span><span class="sxs-lookup"><span data-stu-id="58361-220">The database manager runs in its own partition in a z/OS environment.</span></span>

- <span data-ttu-id="58361-221">应用程序请求方：在将请求传递到应用程序服务器之前，接受来自应用程序的请求。</span><span class="sxs-lookup"><span data-stu-id="58361-221">Application requester: Accepts requests from applications before passing them to an application server.</span></span>

- <span data-ttu-id="58361-222">联机资源适配器：包括用于 CICS 事务的应用程序请求程序组件。</span><span class="sxs-lookup"><span data-stu-id="58361-222">Online resource adapter: Includes application requester components for use in CICS transactions.</span></span>

- <span data-ttu-id="58361-223">Batch 资源适配器:Z/OS 批应用程序的实现应用程序请求方组件。</span><span class="sxs-lookup"><span data-stu-id="58361-223">Batch resource adapter: Implements application requester components for z/OS batch applications.</span></span>

- <span data-ttu-id="58361-224">交互式 SQL (ISQL)：作为 CICS 应用程序和接口运行，使用户能够输入 SQL 语句或运算符命令。</span><span class="sxs-lookup"><span data-stu-id="58361-224">Interactive SQL (ISQL): Runs as a CICS application and interface enabling users to enter SQL statements or operator commands.</span></span>

- <span data-ttu-id="58361-225">CICS 应用程序：使用 CICS 中的可用资源和数据源在 CICS 的控制下运行。</span><span class="sxs-lookup"><span data-stu-id="58361-225">CICS application: Runs under the control of CICS, using available resources and data sources in CICS.</span></span>

- <span data-ttu-id="58361-226">Batch 应用程序：运行流程逻辑而无需与用户进行交互式通信，例如，生成大量数据更新或从数据库生成报告。</span><span class="sxs-lookup"><span data-stu-id="58361-226">Batch application: Runs process logic without interactive communication with users to, for example, produce bulk data updates or generate reports from a database.</span></span>

## <a name="optimize-scale-and-throughput-for-azure"></a><span data-ttu-id="58361-227">优化 Azure 的规模和吞吐量</span><span class="sxs-lookup"><span data-stu-id="58361-227">Optimize scale and throughput for Azure</span></span>

<span data-ttu-id="58361-228">通常情况下，大型机纵向扩展，而云横向扩展。要优化在 Azure 上运行的大型机样式应用程序的规模和吞吐量，了解大型机如何分离和隔离应用程序是非常重要的。</span><span class="sxs-lookup"><span data-stu-id="58361-228">Generally speaking, mainframes scale up, while the cloud scales out. To optimize scale and throughput of mainframe-style applications running on Azure, it is important that you understand at how mainframes can separate and isolate applications.</span></span> <span data-ttu-id="58361-229">A z/OS 大型机使用名为逻辑分区 (LPARS) 的功能来隔离和管理单个实例上特定应用程序的资源。</span><span class="sxs-lookup"><span data-stu-id="58361-229">A z/OS mainframe uses a feature called Logical Partitions (LPARS) to isolate and manage the resources for a specific application on a single instance.</span></span>

<span data-ttu-id="58361-230">例如，大型机对具有关联 COBOL 程序的 CICS 区域使用一个逻辑分区 (LPAR)，对于 DB2 使用单独的 LPAR。</span><span class="sxs-lookup"><span data-stu-id="58361-230">For example, a mainframe might use one logical partition (LPAR) for a CICS region with associated COBOL programs, and a separate LPAR for DB2.</span></span> <span data-ttu-id="58361-231">其他 LPAR 通常用于开发、测试和过渡环境。</span><span class="sxs-lookup"><span data-stu-id="58361-231">Additional LPARs are often used for the development, testing, and staging environments.</span></span>

<span data-ttu-id="58361-232">在 Azure 上，更常见的做法是使用单独的 VM 来实现这一目的。</span><span class="sxs-lookup"><span data-stu-id="58361-232">On Azure, it’s more common to use separate VMs to serve this purpose.</span></span> <span data-ttu-id="58361-233">Azure 体系结构通常为应用层部署 VM、为数据层部署单独一组 VM、为开发部署另一组 VM 等。</span><span class="sxs-lookup"><span data-stu-id="58361-233">Azure architectures typically deploy VMs for the application tier, a separate set of VMs for the data tier, another set for development, and so on.</span></span> <span data-ttu-id="58361-234">每个处理层都可以使用最适合该环境的 VM 类型和功能进行优化。</span><span class="sxs-lookup"><span data-stu-id="58361-234">Each tier of processing can be optimized using the most suitable type of VMs and  features for that environment.</span></span>

<span data-ttu-id="58361-235">此外，每一层还可以提供适当的灾难恢复服务。</span><span class="sxs-lookup"><span data-stu-id="58361-235">In addition, each tier can also provide appropriate disaster recovery services.</span></span> <span data-ttu-id="58361-236">例如，生产和数据库 VM 可能需要热或温恢复，而开发和测试 VM 支持冷恢复。</span><span class="sxs-lookup"><span data-stu-id="58361-236">For example, production and database VMs might require a hot or warm recovery, while the development and testing VMs support a cold recovery.</span></span>

<span data-ttu-id="58361-237">下图显示了使用主站点和辅助站点进行 Azure 部署的可能性。</span><span class="sxs-lookup"><span data-stu-id="58361-237">The following figure shows a possible Azure deployment using a primary and a secondary site.</span></span> <span data-ttu-id="58361-238">在主站点中，以高可用性部署生产、预生产和测试 VM。</span><span class="sxs-lookup"><span data-stu-id="58361-238">In the primary site, the production, preproduction, and testing VMs are deployed with high availability.</span></span> <span data-ttu-id="58361-239">辅助站点用于备份和灾难恢复。</span><span class="sxs-lookup"><span data-stu-id="58361-239">The secondary site is for backup and disaster recovery.</span></span>

![使用主站点和辅助站点进行 Azure 部署的可能性](../../_images/mainframe-migration/migration-backup-DR.png)

## <a name="perform-a-staged-mainframe-to-azure"></a><span data-ttu-id="58361-241">对 Azure 执行分阶段大型机任务</span><span class="sxs-lookup"><span data-stu-id="58361-241">Perform a staged mainframe to Azure</span></span>

<span data-ttu-id="58361-242">将解决方案从大型机移至 Azure 可能需要进行分阶段迁移，从而先移动一些应用程序，而其他应用程序则暂时或永久地保留在大型机上。</span><span class="sxs-lookup"><span data-stu-id="58361-242">Moving solutions from a mainframe to Azure may involve a *staged* migration, whereby some applications are moved first, and others remain on the mainframe temporarily or permanently.</span></span> <span data-ttu-id="58361-243">此方法通常需要允许应用程序和数据库在大型机和 Azure 之间进行互操作的系统。</span><span class="sxs-lookup"><span data-stu-id="58361-243">This approach typically requires systems that allow applications and databases to interoperate between the mainframe and Azure.</span></span>

<span data-ttu-id="58361-244">常见方案是将应用程序移至 Azure，同时将应用程序使用的数据保存在大型机上。</span><span class="sxs-lookup"><span data-stu-id="58361-244">A common scenario is to move an application to Azure while keeping the data used by the application on the mainframe.</span></span> <span data-ttu-id="58361-245">特定软件用于使 Azure 上的应用程序能够访问大型机中的数据。</span><span class="sxs-lookup"><span data-stu-id="58361-245">Specific software is used to enable the applications on Azure to access data from the mainframe.</span></span> <span data-ttu-id="58361-246">幸运的是，广泛的解决方案提供 Azure 和现有大型机环境之间的集成、对混合场景的支持以及随时间推移的迁移。</span><span class="sxs-lookup"><span data-stu-id="58361-246">Fortunately, a wide range of solutions provide integration between Azure and existing mainframe environments, support for hybrid scenarios, and migration over time.</span></span> <span data-ttu-id="58361-247">Microsoft 合作伙伴、独立软件供应商和系统集成商可以在过程中为你提供帮助。</span><span class="sxs-lookup"><span data-stu-id="58361-247">Microsoft partners, independent software vendors, and system integrators can help you on your journey.</span></span>

<span data-ttu-id="58361-248">一种选项是 [Microsoft Host Integration Server](https://docs.microsoft.com/host-integration-server/) (HIS)，该解决方案提供了 Azure 中的应用程序访问大型机上保留的 DB2 中的数据所需的分布式关系数据库体系结构 (DRDA)。</span><span class="sxs-lookup"><span data-stu-id="58361-248">One option is [Microsoft Host Integration Server](https://docs.microsoft.com/host-integration-server/) (HIS), a solution that provides the distributed relational database architecture (DRDA) required for applications in Azure to access data in DB2 that remains on the mainframe.</span></span> <span data-ttu-id="58361-249">大型机到 Azure 集成的其他选项包括 IBM、Attunity、Codit 和其他供应商提供的解决方案以及开源选项。</span><span class="sxs-lookup"><span data-stu-id="58361-249">Other options for mainframe-to-Azure integration include solutions from IBM, Attunity, Codit, other vendors, and open source options.</span></span>

## <a name="partner-solutions"></a><span data-ttu-id="58361-250">合作伙伴解决方案</span><span class="sxs-lookup"><span data-stu-id="58361-250">Partner solutions</span></span>

<span data-ttu-id="58361-251">如果正在考虑大型机迁移，合作伙伴生态系统可提供帮助。</span><span class="sxs-lookup"><span data-stu-id="58361-251">If you are considering a mainframe migration, the partner ecosystem is available to assist you.</span></span>

<span data-ttu-id="58361-252">Azure 为当前在大型机上运行的系统提供了经过验证的、高度可用且可缩放的基础结构。</span><span class="sxs-lookup"><span data-stu-id="58361-252">Azure provides a proven, highly available, and scalable infrastructure for systems that currently run on mainframes.</span></span> <span data-ttu-id="58361-253">可相对轻松地迁移某些工作负荷。</span><span class="sxs-lookup"><span data-stu-id="58361-253">Some workloads can be migrated with relative ease.</span></span> <span data-ttu-id="58361-254">可以使用合作伙伴解决方案重新托管依赖于旧版系统软件（如 CICS 和 IMS）的其他工作负荷，并随着时间的推移迁移到 Azure。</span><span class="sxs-lookup"><span data-stu-id="58361-254">Other workloads that depend on legacy system software, such as CICS and IMS, can be rehosted using partner solutions and migrated to Azure over time.</span></span> <span data-ttu-id="58361-255">无论你做出何种选择，Microsoft 和我们的合作伙伴都可以帮助你优化 Azure，同时保持大型机系统软件功能。</span><span class="sxs-lookup"><span data-stu-id="58361-255">Regardless of the choice you make, Microsoft and our partners are available to assist you in optimizing for Azure while maintaining mainframe system software functionality.</span></span>

<span data-ttu-id="58361-256">有关选择合作伙伴解决方案的详细指南，请参阅[平台现代化联盟](https://www.platformmodernization.org/pages/mainframe.aspx)。</span><span class="sxs-lookup"><span data-stu-id="58361-256">For detailed guidance about choosing a partner solution, refer to the [Platform Modernization Alliance](https://www.platformmodernization.org/pages/mainframe.aspx).</span></span>

## <a name="learn-more"></a><span data-ttu-id="58361-257">了解详细信息</span><span class="sxs-lookup"><span data-stu-id="58361-257">Learn more</span></span>

<span data-ttu-id="58361-258">有关详细信息，请参阅以下资源：</span><span class="sxs-lookup"><span data-stu-id="58361-258">For more information, see the following resources:</span></span>

- [<span data-ttu-id="58361-259">Azure 入门</span><span class="sxs-lookup"><span data-stu-id="58361-259">Get started with Azure</span></span>](/azure)

- [<span data-ttu-id="58361-260">平台现代化联盟：大型机迁移</span><span class="sxs-lookup"><span data-stu-id="58361-260">Platform Modernization Alliance: Mainframe migration</span></span>](https://www.platformmodernization.org/pages/mainframe.aspx)

- <span data-ttu-id="58361-261">[Deploy IBM DB2 pureScale on Azure](https://azure.microsoft.com/resources/deploy-ibm-db2-purescale-on-azure)（在 Azure 上部署 IBM DB2 pureScale）</span><span class="sxs-lookup"><span data-stu-id="58361-261">[Deploy IBM DB2 pureScale on Azure](https://azure.microsoft.com/resources/deploy-ibm-db2-purescale-on-azure)</span></span>

- [<span data-ttu-id="58361-262">Host Integration Server (HIS) 文档</span><span class="sxs-lookup"><span data-stu-id="58361-262">Host Integration Server (HIS) documentation</span></span>](https://docs.microsoft.com/host-integration-server/)
