---
title: 'CAF：中小型企业 - 资源一致性演变 '
titleSuffix: Microsoft Cloud Adoption Framework for Azure
ms.service: architecture-center
ms.subservice: enterprise-cloud-adoption
ms.custom: governance
ms.date: 02/11/2019
description: 阐释：中小型企业 - 资源一致性演变
author: BrianBlanchard
ms.openlocfilehash: 402bb3ff4182123cdc8825522f965f7cf8637980
ms.sourcegitcommit: 273e690c0cfabbc3822089c7d8bc743ef41d2b6e
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/08/2019
ms.locfileid: "55900559"
---
# <a name="small-to-medium-enterprise-resource-consistency-evolution"></a>中小型企业：资源一致性演变

本文通过添加资源一致性控件来支持任务关键型应用，从而对叙述进行了改进。

## <a name="evolution-of-the-narrative"></a>叙述性内容的演变

新的客户体验、新的预测工具和迁移的基础结构不断改进。 现在，企业已准备好开始在生产容量中使用这些资产。

### <a name="evolution-of-the-current-state"></a>当前状态的演变

在此叙述性内容的上一阶段，应用程序开发和 BI 团队几乎准备好将客户和财务数据集成到生产工作负载中。 IT 团队正在停用灾难恢复数据中心。

自此，一些事态已改变，将会影响到治理：

- IT 已提前停用 100% 的灾难恢复数据中心。 在此过程中，生产数据中心中的许多资产被识别为云迁移候选者。
- 应用程序开发团队已对生产流量做好准备。
- BI 团队已做好将预测和见解反馈到生产数据中心的操作系统的准备。

### <a name="evolution-of-the-future-state"></a>未来状态的演变

在生产业务流程中使用 Azure 部署之前，云操作必须成熟。 与此同时，还需要进行额外的治理演变，以确保资产能够正常运行。

当前和未来状态的变化揭示了新的风险，需要新的策略声明。

## <a name="evolution-of-tangible-risks"></a>有形风险的演变

**业务中断**：任何新平台都存在固有的风险，导致任务关键型业务流程中断。 IT 运营团队和执行各种云采用的团队对云操作相对缺乏经验。 这就增加了中断的风险，必须加以缓解和治理。

该业务风险可以扩展为许多技术风险：

- 外部入侵或拒绝服务攻击可能会导致业务中断
- 可能无法正确发现任务关键型资产，并因此可能无法正常运行
- 现有的运营管理流程可能不支持未发现或标注错误的资产。
- 已部署资产的配置可能无法满足性能预期
- 可能无法正确记录和集中管理日志记录，从而无法修复性能问题。
- 恢复策略可能会失败或花费的时间超过预期。
- 不一致的部署流程可能会导致安全漏洞，从而导致数据泄露或中断。
- 配置偏差或缺少修补程序可能会导致意外安全漏洞，从而导致数据泄露或中断。
- 配置可能不会强制执行已定义的 SLA 要求或已提交的恢复要求。
- 部署的操作系统或应用程序可能无法满足强化要求
- 由于有如此多的团队在云中工作，因此存在不一致性的风险。

## <a name="evolution-of-the-policy-statements"></a>策略语句的演变

以下策略的更改将有助于缓解新的风险，同时有助于实施指南。 此清单内容看起来很多，但要采用这些策略并没有想象的那么困难。

1. 所有已部署的资产必须按照重要程度和数据分类进行分类。 在部署到云之前，云治理团队和应用程序所有者将对分类进行审查
2. 包含任务关键型应用程序的子网必须受到能够检测入侵和响应攻击的防火墙解决方案的保护。
3. 管理工具必须审核和强制执行安全管理团队定义的网络配置要求
4. 治理工具必须确认将与任务关键型应用或受保护数据相关的所有资产均已纳入资源消耗和优化监视范围。
5. 治理工具必须确认为所有任务关键型应用程序或受保护数据收集适当级别的日志记录数据。
6. 治理流程必须确认任务关键型应用程序和受保护数据正确实现了备份、恢复和 SLA 遵从性。
7. 治理工具必须仅将虚拟机部署限制为已批准的映像。
8. 治理工具必须强制要求在所有支持任务关键型应用程序的已部署资产上禁止自动更新。 必须与运营管理团队协同审查违规行为，并根据运营策略进行补救。 不自动更新的资产必须包含在 IT 运营部门的流程中。
9. 治理工具必须验证与成本、关键性、SLA、应用程序和数据分类相关的标记。 所有值都必须与治理团队管理的预定义值保持一致。
10. 治理过程必须包括部署时的审核和周期性审核，以确保所有资产的一致性。
11. 安全团队应定期检查可能影响云部署的趋势和攻击，以更新云中使用的安全管理工具。
12. 在发布到生产环境之前，必须将所有任务关键型应用和受保护数据添加到指定的运营监控解决方案中。 如果资产无法被选定的 IT 运营工具发现，则无法发布供生产使用。 必须对相关部署流程进行任何必要的更改才能使资产可被发现，以确保在将来的部署中可以发现资产。
13. 一旦发现，运营管理团队将调整资产规模，以确保资产满足性能要求
14. 部署工具必须得到云治理团队的批准，以确保对部署的资产进行持续管理。
15. 必须在云治理团队可访问的中央存储库中对部署脚本进行维护，以便进行定期检查和审核。
16. 治理评审流程必须验证已部署的资产是否已根据 SLA 和恢复需求进行了正确配置。

## <a name="evolution-of-the-best-practices"></a>最佳做法的演变

本文的这一部分将改进治理 MVP 设计，以包括新的 Azure 策略和 Azure 成本管理的实现。 这两项设计变更将共同实现新的公司策略语句。

1. 云运营团队将定义运营监视工具和自动修复工具。 云治理团队将支持这些发现进程。 在此用例中，云运营团队选择 Azure Monitor 作为监视任务关键型应用程序的主要工具。
2. 在 Azure DevOps 中创建一个存储库来存储和版本化所有相关的资源管理器模板和脚本化的配置。
3. Azure 保管库实现：
    1. 为备份和恢复过程定义和部署 Azure 保管库。
    2. 创建资源管理器模板，以便在每个订阅中创建保管库。
4. 更新所有订阅的 Azure 策略：
    1. 审核并强制执行所有订阅的重要程度和数据分类，以识别任何具有任务关键型资产的订阅。
    2. 仅审核和强制使用已批准的映像。
5. Azure Monitor 实现：
    1. 确定任务关键型订阅后，使用 PowerShell 创建 Azure Monitor 工作区。 这是一个预先部署过程。
    2. 在部署测试期间，云运营团队部署必要的代理和测试发现。
6. 为包含任务关键型应用程序的所有订阅更新 Azure 策略。
    1. 审核并强制将 NSG 应用于所有 NIC 和子网。 网络和 IT 安全团队定义 NSG。
    2. 审核并强制为每个网络接口使用已批准的网络子网和 VNet。
    3. 审核并强制实施用户定义路由表的限制。
    4. 审核并强制部署所有虚拟机的 Azure Monitor 代理。
    5. 审核并强制 Azure 保管库存在于订阅中。
7. 防火墙配置：
    1. 确定符合安全要求的 Azure 防火墙配置。 或者，确定与 Azure 兼容的第三方设备。
    2. 创建资源管理器模板来部署具有所需配置的防火墙。
8. Azure 蓝图：
    1. 创建名为 `protected-data` 的新 Azure 蓝图。
    2. 将防火墙和 Azure 保管库模板添加到该蓝图。
    3. 为受保护的数据订阅添加新策略。
    4. 将蓝图发布到任何旨在托管任务关键型应用程序的管理组。
    5. 将新蓝图应用于每个受影响的订阅以及现有蓝图。

## <a name="conclusion"></a>结束语

这些额外的流程和治理 MVP 的变化有助于缓解与资源治理相关的许多风险。 它们共同增加了恢复、大小调整和监视控件，从而实现了云感知操作。

## <a name="next-steps"></a>后续步骤

随着云采用的不断演进和业务附加值的提升，风险和云治理需求也在不断发展。 对于这一过程中的虚拟公司来说，下一个目标是部署到云上的资产超过 100 项，或者每月开销超过 1000 美元。 此时，云治理团队添加了“成本管理”控件。

> [!div class="nextstepaction"]
> [成本管理演变](./cost-management-evolution.md)