---
title: CAF：加密
titleSuffix: Microsoft Cloud Adoption Framework for Azure
ms.service: architecture-center
ms.subservice: enterprise-cloud-adoption
ms.custom: governance
ms.date: 02/11/2019
description: 了解作为 Azure 迁移中核心服务的加密。
author: rotycenh
ms.openlocfilehash: 660206d57ded9a93d73c57ba9cb8058020d87525
ms.sourcegitcommit: 273e690c0cfabbc3822089c7d8bc743ef41d2b6e
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/08/2019
ms.locfileid: "55900499"
---
# <a name="encryption-decision-guide"></a>加密决策指南

对数据进行加密可保护数据免遭未经授权访问。 正确实现的加密策略可以为基于云的工作负载提供更多重安全保障，并抵御组织和网络内外攻击者和其他未经授权用户的攻击。

虽然对资源进行加密通常是可取的，但加密确实会产生成本，进而可能会增加延迟和整体资源使用状况。 对于要求严苛的工作负载，力求在加密和性能之间取得恰当的平衡至关重要。

![按复杂性从低到高的顺序绘制了加密选项（与下面的跳转链接保持一致）](../../_images/discovery-guides/discovery-guide-encryption.png)

跳转到：[密钥管理](#key-management) | [数据加密](#data-encryption) | [了解更多](#learn-more)

确定云加密策略时，导致拐点出现的主要因素是企业策略和合规性要求。

在云环境中实现加密的方法有多种，这些方法的成本和复杂性各异。 计划加密策略时，要考虑的首要因素是企业策略和第三方合规性。 大多数基于云的解决方案都提供了数据加密标准机制，无论数据是静态的，还是在传输中。 不过，对于要求更严格控制的策略和合规性要求（如标准化机密和密钥管理、加密使用中的数据或数据专用加密），可能就需要实现复杂的解决方案。

## <a name="key-management"></a>密钥管理

为了加强保护，新式密钥管理系统应支持使用硬件安全模块 (HSM) 存储密钥。 因此，组织能否创建和存储加密密钥、重要密码、连接字符串和其他 IT 机密信息，关键在于密钥管理系统。

计划云迁移时，请参阅下表，其中介绍了如何存储和管理加密密钥、证书和机密，这些对创建安全、可管理的云部署至关重要：

| 问题 | 云原生 | 混合 | 本地 |
|---------------------------------------------------------------------------------------------------------------------------------------|--------------|--------|-------------|
| 组织是否缺少集中式密钥和机密管理？                                                                    | 是          | 否     | 否          |
| 在云中使用这些密钥时，是否需要限制为只有本地硬件才能创建设备密钥和机密？ | 否           | 是    | 否          |
| 组织是否制定了可防止密钥和机密存储在界外的规则或策略？                | 否           | 否     | 是         |

### <a name="cloud-native"></a>云原生

通过云原生密钥管理，可以在基于云的保管库中生成、管理和存储所有密钥和机密。 这种方法简化了许多与密钥管理相关的 IT 任务。

云原生密钥管理先决条件：需要先满足以下先决条件，再使用云原生密钥管理系统：

- 信任由云密钥管理解决方案来创建、管理和托管组织的机密和密钥。
- 将所有依赖访问加密服务或机密的本地应用程序和服务启用为，访问云密钥管理系统。

### <a name="hybrid-bring-your-own-key"></a>混合（创建自己的密钥）

使用“创建自己的密钥”这种方法，可以先在本地环境中的专用 HSM 硬件上生成密钥，再将密钥传输到安全的云密钥管理系统，以用于云资源。

混合密钥管理先决条件：需要先满足以下先决条件，再使用混合密钥管理系统：

- 信任由云平台的基础安全和访问控制基础结构来托管和使用密钥和机密。
- 法规或组织策略要求，必须在本地创建和管理组织的机密和密钥。

### <a name="on-premises-hold-your-own-key"></a>本地（保留自己的密钥）

在某些情况下，可能出于法规、策略或技术原因，无法将密钥存储在公有云服务提供的密钥管理系统上。 在这种情况下，必须使用本地硬件保留密钥，并预配允许基于云的资源出于加密目的访问这些密钥的机制。 请注意，“保留自己的密钥”方法可能并不与所有云服务都兼容。

本地密钥管理先决条件：需要先满足以下先决条件，再使用本地密钥管理系统：

- 法规或组织策略要求，必须在本地创建、管理和托管组织的机密和密钥。
- 所有依赖访问加密服务或机密的基于云的应用程序或服务都可以访问本地密钥管理系统。

## <a name="data-encryption"></a>数据加密

计划加密策略时，需要考虑几种不同的数据状态以及各自不同的加密需求：

| 数据状态 | 数据 |
|-----|-----|
| 传输中的数据 | 内部网络流量、Internet 连接、数据中心或虚拟网络之间的连接 |
| 静态数据    | 数据库、文件、虚拟驱动器、PaaS 存储 |
| 使用中的数据     | 在 RAM 或 CPU 高速缓存中加载的数据 |

### <a name="data-in-transit"></a>传输中的数据

传输中的数据是在内部资源之间移动、在数据中心或外部网络之间移动，或通过 Internet 移动的数据。

加密传输中的数据通常通过要求对流量使用 SSL/TLS 协议来完成。 应始终加密在云托管的资源到外部网络或公共 Internet 之间传输的流量。 PaaS 资源通常也默认对流量强制使用 SSL/TLS 加密。 是否对虚拟网络中托管的 IaaS 资源之间的流量强制执行加密，由云采用团队和工作负载所有者决定，通常建议执行加密。

**加密传输中的数据先决条件**。 需要先满足以下先决条件，再为传输中的数据实现适当的加密策略：

- 云环境中所有可公开访问的终结点都将使用 SSL/TLS 协议与公共 Internet 进行通信。
- 如果通过公共 Internet 将云网络与本地网络或其他外部网络连接，使用加密 VPN 协议。
- 如果使用专用 WAN 连接（如 ExpressRoute）将云网络与本地网络或其他外部网络连接，使用与相应虚拟 VPN 或部署到云网络的加密设备配对的 VPN 或其他本地加密设备。
- 若有不得添加到对 IT 人员可见的流量日志或其他诊断报告中的敏感数据，加密虚拟网络中资源之间的所有流量。

### <a name="data-at-rest"></a>静态数据

静态数据表示任何未被主动移动或处理的数据，包括文件、数据库、虚拟机驱动器、PaaS 存储帐户或类似资产。 加密已存储的数据可保护虚拟设备或文件免遭外部网络渗透、内部未授权用户或意外泄露造成的未经授权访问。

默认情况下，通常强制加密 PaaS 存储和数据库资源。 可使用密钥管理系统中存储的加密密钥，通过虚拟磁盘加密来保护 IaaS 虚拟资源。

静态数据加密还涉及更多高级数据库加密技术（如列级别加密和行级别加密），可便于更好地控制要保护的确切数据。

应根据总体策略和合规性要求、存储数据的敏感性以及工作负载性能要求，确定哪些资产需要加密。

**加密静态数据先决条件**。 需要先满足以下先决条件，再加密静态数据：

- 要存储的数据不适合公共使用。
- 工作负载可以接受磁盘加密造成的额外延迟成本。

### <a name="data-in-use"></a>使用中的数据

加密使用中的数据涉及保护非永久性存储（如 RAM 或 CPU 高速缓存）中的数据。 使用全内存加密等技术，以及 Intel 的 Secure Guard Extensions (SGX) 等 Enclave 技术。 这还包括可用于创建安全、受信任的执行环境的同态加密等加密技术。

**加密使用中的数据先决条件**。 需要先满足以下先决条件，再加密使用中的数据：

- 要求必须始终将数据所有权与基础云平台分离开来，即使在 RAM 和 CPU 级别，也不例外。

## <a name="learn-more"></a>了解详细信息

若要详细了解 Azure 平台中的加密和密钥管理，请参阅以下资源。

- [Azure 加密概述](/azure/security/security-azure-encryption-overview)。 详细介绍了 Azure 如何使用加密来保护静态数据和传输中的数据。
- [Azure Key Vault](/azure/key-vault/key-vault-overview)。 Key Vault 是用于在 Azure 中存储和管理加密密钥、机密和证书的主要密钥管理系统。
- [Azure 中的机密计算](/solutions/confidential-compute)。 Azure 的机密计算计划提供了工具和技术，可用于创建受信任的执行环境或其他加密机制来保护使用中的数据。

## <a name="next-steps"></a>后续步骤

了解软件定义网络如何为云部署提供虚拟化网络功能。

> [!div class="nextstepaction"]
> [哪种软件定义网络模式最适合我的部署？](../software-defined-network/overview.md)
