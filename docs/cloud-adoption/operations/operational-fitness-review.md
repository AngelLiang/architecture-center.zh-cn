---
title: CAF：操作基础知识
description: 操作基础知识指南
author: petertaylor9999
ms.date: 09/20/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: enterprise-cloud-adoption
ms.openlocfilehash: 7d7f6bd46fb60a190a7fb27432d5ff4b74b0c597
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/17/2019
ms.locfileid: "59640696"
---
# <a name="establishing-an-operational-fitness-review"></a>建立操作适用性评审

企业开始在 Azure 中操作工作负荷以后，下一步是建立**操作适用性评审**过程，以便枚举、实现并以迭代方式评审这些工作负荷的**非功能性**要求。 非功能性要求与服务的预期操作行为相关。 有五种基本类别的非功能性要求，称为[软件质量的要素](../../guide/pillars.md)：可伸缩性、可用性、复原能力（包括业务连续性和灾难恢复）、管理和安全性。 操作适用性评审过程的目的是确保任务关键型工作负荷满足企业对质量要素的预期。

因此，企业应通过操作适用性评审过程充分了解在生产环境中运行工作负荷时产生的问题，确定如何纠正问题，然后解决它们。 本文概述了可供需要实现此目标的企业使用的高级操作适用性评审过程。

## <a name="operational-fitness-at-microsoft"></a>Microsoft 的操作适用性

Azure 平台的开发从一开始就是 Microsoft 的许多团队承担的持续开发和集成项目。 如果不能通过一个可靠的过程来定期枚举和实施基本的非功能性要求，则很难确保 Azure 这样大且复杂的项目的质量和一致性。

Microsoft 遵循的这些过程是本文档中概述的内容的基础。

## <a name="understanding-the-problem"></a>了解问题

根据[入门](../../cloud-adoption/getting-started/overview.md)中的介绍，在企业数字化转型过程中，第一步是确定需要通过 Azure 来解决的业务问题。 下一步是确定问题的高级解决方案，例如将工作负荷迁移到云，或者调整现有的本地服务，使之包含云功能。 最后，设计并实施解决方案。

在此过程中，通常关注服务的功能。 也就是说，有一系列功能性要求需要服务来执行。 例如，产品交付服务需要相关功能来确定产品的源和目标位置，在完成交付、客户通知等操作时对产品进行跟踪。

与此相反，_非功能性_与属性，如服务的相关要求[可靠性](../../reliability/index.md)并[可伸缩性](../../checklist/scalability.md)。 这些属性不同于功能性要求，因为它们不直接影响服务中任何具体特性的最终功能。 但是，这些非功能性要求与服务的性能和连续性相关。

某些非功能性要求可以通过服务级别协议 (SLA) 条款来指定。 例如，就服务连续性来说，可以将服务的可用性要求表述为某个百分比，比如**在 99.99% 的时间可用**。 其他非功能性要求可能更加难以定义，并且可能随着生产需求的变化而变化。 例如，某个面向使用者的服务在热门过后可能会开始面临非预期的吞吐量要求。

![注意]中的更深入地探讨了定义复原能力，包括 RPO、 RTO、 SLA 和相关的概念的说明要求[开发的可复原的 Azure 应用程序要求](../../reliability/requirements.md)。

## <a name="operational-fitness-review-process"></a>操作适用性评审过程

若要维护企业服务的性能和连续性，关键是实施操作适用性评审过程。

![操作适用性评审过程概述](_images/ofr-flow.png)

此过程大致分为两个阶段。 在先决条件阶段，需确定要求并将其映射到支持服务。 此情况出现频率较低；也许每年出现一次，或者在引入新操作时出现。 先决条件阶段的输出在流阶段使用。 流阶段出现频率较高；建议每月一次。

### <a name="prerequisites-phase"></a>先决条件阶段

此阶段的步骤用于捕获对重要服务进行定期评审所需满足的要求。

- **确定关键业务操作**。 确定企业的任务关键型业务操作。 业务操作独立于任何支持服务功能。 换句话说，业务操作代表企业需执行的实际活动，受一组 IT 服务的支持。 术语“任务关键型”（或“业务关键型”）反映了在操作受阻的情况下对业务的严重影响。 例如，在线零售商可能会有“允许客户向购物车添加商品”或“处理信用卡付款”之类的业务操作。 如果其中一项操作失败，客户将无法完成交易，企业将无法完成销售。

- **将操作映射到服务**。 将这些业务操作映射到支持它们的服务。 在上面的购物车示例中，可能涉及多项服务：库存管理服务、购物车服务，等等。 在上面的信用卡付款示例中，本地付款服务可能会与第三方款项处理服务交互。

- **分析服务依赖关系**。 大多数业务操作需要在多项支持服务之间进行协调。 请务必了解这些服务通过这些服务的关键任务事务流之间的依赖关系。 另外还应考虑本地服务和 Azure 服务之间的依赖关系。 在购物车示例中，库存管理服务可能托管在本地，通过员工从某个物理仓库引入数据输入，但它可能将数据存储在 Azure 服务（例如 [Azure 存储](/azure/storage/common/storage-introduction)）中或数据库（例如 [Azure Cosmos DB](/azure/cosmos-db/introduction)）中。

这些活动的输出是一组适用于服务操作的**记分卡指标**。 这些指标按照非功能性条件（例如可用性、可伸缩性和灾难恢复）进行分类。 记分卡指标表述服务在操作方面应满足的条件。 这些指标可以在任何粒度级别表述，只要该级别适合服务操作。

记分卡应该以简单的术语表述，方便业务负责人和工程人员进行有意义的讨论。 例如，可伸缩性记分卡指标为绿色时，表示性能符合所需标准；为黄色时，表示性能不符合所需标准，但正在积极实施计划的补救措施；为红色时，表示性能不符合所需标准，且没有任何计划或措施。

必须强调的是，这些指标应该直接反映业务需求。

### <a name="service-review-phase"></a>服务评审阶段

服务评审阶段是操作适用性评审过程的核心。

- **衡量服务指标**。 使用记分卡指标时，应对服务进行监视，确保其符合业务预期。 这意味着服务监视很重要。 如果无法针对非功能性要求监视一组服务，则应将相应的记分卡指标视为红色。 在这种情况下，若要进行补救，第一步是实施适当的服务监视。 例如，如果企业预期某项服务在操作时的可用性为 99.99%，但尚未准备好生产遥测来衡量可用性，则应假定你不符合要求。

- **计划补救**。 对于其指标低于某个可接受阈值的每项服务操作，请确定对服务进行补救以使操作指标回到可接受范围的成本。 如果补救该服务的成本高于该服务预期会产生的收入，则应考虑无形成本，例如客户体验成本。 例如，客户在难以使用该服务成功下单时，可能会改为选择你的竞争对手下单。

- **实施补救**。 在业务负责人和工程人员共同制定某项计划以后，就应该实施该计划。 只要评审记分卡指标，就应该报告实施状态。

此过程为迭代过程，理想情况下，企业应指定一个团队来专门负责它。 该团队应定期会面，对现有补救项目进行评审，开始对新的工作负荷进行基础评审，并跟踪企业的总记分卡。 该团队应该具有足够的权限，可以确保对落后于计划或无法满足指标要求的补救团队问责。

## <a name="structure-of-the-operational-fitness-review-team"></a>操作适用性评审团队的结构

操作适用性评审团队由以下角色组成：

1. **业务负责人**。 此角色提供标识每个“任务关键型”业务操作并确定其优先级所需的业务知识。 此角色还会对补救成本与业务影响进行比较，推动补救决策的最后达成。

2. **业务大使**。 此角色负责将业务操作细分成不同的部分，并将这些部分映射到本地和云的服务及基础设施。 此角色需深入了解与每项业务操作相关联的技术。

3. **工程负责人**。 此角色是负责实现与业务操作相关联的服务。 这些人员可能参与任何解决方案的设计、实施和部署，以便解决操作适用性评审团队发现的非功能性要求问题。

4. **服务负责人**。 此角色负责操作企业的应用程序和服务。 这些人员收集这些应用程序和服务的日志记录和使用情况数据。 该数据用于确定问题并验证部署后的修补程序。

## <a name="operational-fitness-review-meeting"></a>操作适用性评审会议

建议操作适用性评审团队定期会面。 例如，该团队可以每月会面一次，而向高级领导报告状态和指标则每季一次。

此过程及会面的详细计划取决于具体需要。 建议从以下任务着手：

1. 业务负责人和业务大使负责枚举并确定每项业务操作的非功能性要求，工程人员和服务负责人可以提供意见。 对于以前已确定的业务操作，则需审核并验证优先级。 对于新的业务操作，则会为其分配现有列表中的某个优先级。

2. 工程人员和服务负责人会将业务操作的**当前状态**映射到相应的本地服务和云服务。 映射包含每项服务中的组件的列表，形成一棵依赖关系树。 列表和依赖关系树生成以后，整棵树的**关键路径**就确定了。

3. 工程人员和服务负责人会针对上一步列出的服务来审核操作日志记录和监视的当前状态。 功能强大的日志记录和监视至关重要，以便确定导致未能满足非功能性要求的服务组件。 如果没有完备的日志记录和监视，则必须制定并实施计划，确保其到位。

4. 将会为新的业务操作创建记分卡指标。 根据非功能性要求，记分卡包含在步骤 2 中确定的每项服务的构成组件的列表。此外还有一个指标，表示组件符合要求的程度。

5. 对于那些不符合非功能性要求的构成组件，将会设计一项高级解决方案并指定一位工程负责人。 此时，业务负责人和业务大使应该根据业务操作的预期收入建立补救工作的预算。

6. 最后，对正在进行的补救工作进行评审。 对于正在进行的工作，每个记分卡指标都会对照着预期的指标进行审核。 对于符合指标的构成组件，服务负责人会提供日志记录和监视数据来确认是否符合指标。 对于那些不符合指标的构成组件，每位工程负责人都要对妨碍指标实现的问题进行说明，并探讨任何适用于补救的新设计。

## <a name="recommended-resources"></a>推荐的资源

- [软件质量的要素](../../guide/pillars.md)。
    Azure 应用程序体系结构指南的此部分介绍软件质量的五大要素：可伸缩性、可用性、复原能力、管理和安全性。
- [Azure 应用程序的十个设计原则](../../guide/design-principles/index.md)。
    Azure 应用程序体系结构指南的此部分讨论一组可以提高应用程序的可伸缩性、复原能力和可管理性的设计原则。
- [设计可靠的 Azure 应用程序](../../reliability/index.md)。
    此指南首先解释术语“复原能力”的定义和相关概念。 然后，介绍在应用程序从设计和实施到部署和运营的整个生存期内，使用结构化的方法实现复原的过程。
- [云设计模式](../../patterns/index.md)。
    使用这些设计模式，工程团队可以按照软件质量的要素要求来生成应用程序。
