---
title: Azure 虚拟数据中心：网络透视图
description: 了解如何在 Azure 中生成虚拟数据中心
author: tracsman
manager: rossort
tags: azure-resource-manager
ms.topic: guide
ms.service: architecture-center
ms.subservice: enterprise-cloud-adoption
ms.custom: virtual-network
ms.date: 11/28/2018
ms.author: jonor
ms.openlocfilehash: 1f61996d231f3bf0cc2c550f4d3e119116bb7bc0
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/23/2019
ms.locfileid: "54488641"
---
# <a name="azure-virtual-datacenter-a-network-perspective"></a><span data-ttu-id="092e3-103">Azure 虚拟数据中心：网络透视图</span><span class="sxs-lookup"><span data-stu-id="092e3-103">Azure virtual datacenter: A network perspective</span></span>

## <a name="overview"></a><span data-ttu-id="092e3-104">概述</span><span class="sxs-lookup"><span data-stu-id="092e3-104">Overview</span></span>

<span data-ttu-id="092e3-105">将本地应用程序迁移到 Azure 可为组织提供安全且经济高效的基础结构，使组织从中受益，即使在迁移应用程序时只做最低限度的更改。</span><span class="sxs-lookup"><span data-stu-id="092e3-105">Migrating on-premises applications to Azure provides organizations the benefits of a secured and cost-efficient infrastructure, even if the applications are migrated with minimal changes.</span></span> <span data-ttu-id="092e3-106">但是，若要充分利用云计算的灵活性，企业必须提升体系结构，充分利用 Azure 的功能。</span><span class="sxs-lookup"><span data-stu-id="092e3-106">However, to make the most of the agility possible with cloud computing, enterprises must evolve their architectures to take advantage of Azure capabilities.</span></span> 

<span data-ttu-id="092e3-107">Microsoft Azure 提供超大规模的服务和基础结构、企业级的功能和可靠性。</span><span class="sxs-lookup"><span data-stu-id="092e3-107">Microsoft Azure delivers hyper-scale services and infrastructure with enterprise-grade capabilities and reliability.</span></span> <span data-ttu-id="092e3-108">这些服务和基础结构在混合连接方面提供的选择很多，因此客户可以选择通过公共 Internet 或专用 Azure ExpressRoute 连接访问它们。</span><span class="sxs-lookup"><span data-stu-id="092e3-108">These services and infrastructure offer many choices in hybrid connectivity so customers can choose to access them over the public internet or over a private Azure ExpressRoute connection.</span></span> <span data-ttu-id="092e3-109">Microsoft 合作伙伴还可以通过提供在 Azure 中运行的优化安全服务和虚拟设备实现增强型功能。</span><span class="sxs-lookup"><span data-stu-id="092e3-109">Microsoft partners also provide enhanced capabilities by offering security services and virtual appliances that are optimized to run in Azure.</span></span>

<span data-ttu-id="092e3-110">客户可以选择通过 Internet 或 Azure ExpressRoute（提供专用网络连接）访问这些云服务。</span><span class="sxs-lookup"><span data-stu-id="092e3-110">Customers can choose to access these cloud services either via the internet or with Azure ExpressRoute, which provides private network connectivity.</span></span> <span data-ttu-id="092e3-111">客户可以使用 Microsoft Azure 平台将基础结构无缝扩展到云中并构建多层体系结构。</span><span class="sxs-lookup"><span data-stu-id="092e3-111">With the Microsoft Azure platform, customers can seamlessly extend their infrastructure into the cloud and build multi-tier architectures.</span></span> <span data-ttu-id="092e3-112">Microsoft 合作伙伴还可以通过提供在 Azure 中运行的优化安全服务和虚拟设备实现增强型功能。</span><span class="sxs-lookup"><span data-stu-id="092e3-112">Microsoft partners also provide enhanced capabilities by offering security services and virtual appliances that are optimized to run in Azure.</span></span>

## <a name="what-is-the-virtual-datacenter"></a><span data-ttu-id="092e3-113">什么是虚拟数据中心？</span><span class="sxs-lookup"><span data-stu-id="092e3-113">What is the Virtual datacenter?</span></span>

<span data-ttu-id="092e3-114">在刚推出时时，云实际上是一个平台，用于托管面向公众的应用程序。</span><span class="sxs-lookup"><span data-stu-id="092e3-114">At its inception, the cloud was essentially a platform for hosting public-facing applications.</span></span> <span data-ttu-id="092e3-115">企业开始了解云的价值，开始将内部业务线应用程序移到云中。</span><span class="sxs-lookup"><span data-stu-id="092e3-115">Enterprises began to understand the value of the cloud and began to move internal line-of-business applications to the cloud.</span></span> <span data-ttu-id="092e3-116">这些类型的应用程序带来了安全性、可靠性、性能和成本方面的其他考量，这就要求以更灵活的方式提供云服务。</span><span class="sxs-lookup"><span data-stu-id="092e3-116">These types of applications brought additional security, reliability, performance, and cost considerations that required additional flexibility in the way cloud services were delivered.</span></span> <span data-ttu-id="092e3-117">因此，需要设计新的基础结构和网络服务来提供这种灵活性，同时还需要针对缩放、灾难恢复和其他考量的新功能。</span><span class="sxs-lookup"><span data-stu-id="092e3-117">This paved the way for new infrastructure and networking services designed to provide this flexibility but also new features for scale, disaster recovery, and other considerations.</span></span>

## <a name="what-is-a-virtual-datacenter"></a><span data-ttu-id="092e3-118">什么是虚拟数据中心？</span><span class="sxs-lookup"><span data-stu-id="092e3-118">What is a virtual datacenter?</span></span>
<span data-ttu-id="092e3-119">最初，云解决方案旨在托管相对独立的单个应用程序，主要涉及公共范畴。</span><span class="sxs-lookup"><span data-stu-id="092e3-119">Cloud solutions were first designed to host single, relatively isolated applications in the public spectrum.</span></span> <span data-ttu-id="092e3-120">此方法在刚开始的几年富有成效。</span><span class="sxs-lookup"><span data-stu-id="092e3-120">This approach worked well for a few years.</span></span> <span data-ttu-id="092e3-121">后来，云解决方案的优势日益明显，云上托管的大规模工作负荷越来越多。</span><span class="sxs-lookup"><span data-stu-id="092e3-121">Then the benefits of cloud solutions became apparent, and multiple large-scale workloads were hosted on the cloud.</span></span> <span data-ttu-id="092e3-122">解决在一个或多个区域进行部署的安全性、可靠性、性能和成本问题成为重中之重，这项任务贯穿了云服务的整个生命周期。</span><span class="sxs-lookup"><span data-stu-id="092e3-122">Addressing security, reliability, performance, and cost concerns of deployments in one or more regions became vital throughout the life cycle of the cloud service.</span></span>

<span data-ttu-id="092e3-123">以下云部署关系图中的**红框**展示了安全隐患的示例。</span><span class="sxs-lookup"><span data-stu-id="092e3-123">The following cloud deployment diagram shows an example of a security gap in the **red box**.</span></span> <span data-ttu-id="092e3-124">**黄框**展示了跨工作负荷的优化虚拟网络设备的空间。</span><span class="sxs-lookup"><span data-stu-id="092e3-124">The **yellow box** shows room for optimization network virtual appliances across workloads.</span></span>

<span data-ttu-id="092e3-125">[![0]][0]</span><span class="sxs-lookup"><span data-stu-id="092e3-125">[![0]][0]</span></span>

<span data-ttu-id="092e3-126">一方面需要通过缩放为企业工作负荷提供支持，另一方面需要处理在公有云中支持大规模应用程序时遇到的问题，正因为此，虚拟数据中心 (VDC) 的概念应运而生。</span><span class="sxs-lookup"><span data-stu-id="092e3-126">The Virtual datacenter (VDC) is a concept born of the necessity for scaling to support enterprise workloads while balancing the need to deal with the problems introduced when supporting large-scale applications in the public cloud.</span></span>

<span data-ttu-id="092e3-127">VDC 实现不仅代表云中的应用程序工作负荷，还代表网络、安全、管理和基础结构（例如 DNS 和目录服务）。</span><span class="sxs-lookup"><span data-stu-id="092e3-127">A VDC implementation does not just represent the application workloads in the cloud, but also the network, security, management, and infrastructure  (for example, DNS and Directory Services).</span></span> <span data-ttu-id="092e3-128">企业在将越来越多的工作负荷迁移到 Azure 时候，必须考虑放置这些工作负荷的支持基础结构和对象。</span><span class="sxs-lookup"><span data-stu-id="092e3-128">As more and more of an enterprise's workloads move to Azure, it's important they think about the supporting infrastructure and objects these workloads are placed in.</span></span> <span data-ttu-id="092e3-129">认真考虑如何结构化资源可以避免激增成百上千的“工作负荷集群”（这种工作负荷集群必须通过独立数据流、安全模型和符合性质询单独管理）。</span><span class="sxs-lookup"><span data-stu-id="092e3-129">Thinking carefully about how resources are structured can avoid the proliferation of hundreds of "workload islands" that must be managed separately with independent data flow, security models, and compliance challenges.</span></span>

<span data-ttu-id="092e3-130">VDC 概念是一组建议和最佳做法，用于实现一系列独立但相关的实体，这些实体拥有共同的支持功能、特性和基础结构。</span><span class="sxs-lookup"><span data-stu-id="092e3-130">The VDC concept is a set of recommendations and best practices for implementing a collection of separate but related entities with common supporting functions, features, and infrastructure.</span></span> <span data-ttu-id="092e3-131">从 VDC 的角度来看工作负荷，你会发现：可以通过规模效益来降低成本，可以通过组件和数据流集中化来提高安全性，还可以简化操作、管理和符合性审核过程。</span><span class="sxs-lookup"><span data-stu-id="092e3-131">By viewing your workloads through the lens of the VDC, you can realize reduced cost due to economies of scale, optimized security through component and data flow centralization, along with easier operations, management, and compliance audits.</span></span>

> [!NOTE]
> <span data-ttu-id="092e3-132">必须认识到 VDC **不是**一款离散的 Azure 产品，而是能够满足确切需求的多项特性和功能的组合。</span><span class="sxs-lookup"><span data-stu-id="092e3-132">It's important to understand that the VDC is **NOT** a discrete Azure product, but the combination of various features and capabilities to meet your exact requirements.</span></span> <span data-ttu-id="092e3-133">使用 VDC 可以审视工作负荷与 Azure 的用法，以便在云中实现资源和能力的最大化。</span><span class="sxs-lookup"><span data-stu-id="092e3-133">The VDC is a way of thinking about your workloads and Azure usage to maximize your resources and abilities in the cloud.</span></span> <span data-ttu-id="092e3-134">它是一种模块化方法，可以在履行企业的组织角色和责任的同时在 Azure 中建立 IT 服务。</span><span class="sxs-lookup"><span data-stu-id="092e3-134">It's a modular approach to building up IT services in Azure while respecting the enterprise's organizational roles and responsibilities.</span></span>

<span data-ttu-id="092e3-135">在以下情形下，VDC 实现可帮助企业将工作负荷和应用程序迁移到 Azure：</span><span class="sxs-lookup"><span data-stu-id="092e3-135">A VDC implementation can help enterprises get workloads and applications into Azure for the following scenarios:</span></span>

-   <span data-ttu-id="092e3-136">托管多个相关工作负荷</span><span class="sxs-lookup"><span data-stu-id="092e3-136">Host multiple related workloads.</span></span>
-   <span data-ttu-id="092e3-137">将工作负荷从本地环境迁移到 Azure。</span><span class="sxs-lookup"><span data-stu-id="092e3-137">Migrate workloads from an on-premises environment to Azure.</span></span>
-   <span data-ttu-id="092e3-138">跨工作负荷实现共享化或中心化的安全性和访问要求。</span><span class="sxs-lookup"><span data-stu-id="092e3-138">Implement shared or centralized security and access requirements across workloads.</span></span>
-   <span data-ttu-id="092e3-139">为大型企业适当混合 Azure DevOps 和中心化 IT。</span><span class="sxs-lookup"><span data-stu-id="092e3-139">Mix Azure DevOps and centralized IT appropriately for a large enterprise.</span></span>

<span data-ttu-id="092e3-140">解锁 VDC 优势的关键在于中心辐射型中心化网络拓扑，其中混合了多项 Azure 服务和功能：</span><span class="sxs-lookup"><span data-stu-id="092e3-140">The key to unlock the advantages of VDC is a centralized hub and spoke network topology with a mix of Azure services and features:</span></span>

* <span data-ttu-id="092e3-141">[Azure 虚拟网络][VNet]；</span><span class="sxs-lookup"><span data-stu-id="092e3-141">[Azure Virtual Network][VNet],</span></span>
* <span data-ttu-id="092e3-142">[网络安全组][NSG]；</span><span class="sxs-lookup"><span data-stu-id="092e3-142">[Network security groups][NSG],</span></span>
* <span data-ttu-id="092e3-143">[虚拟网络对等互连][VNetPeering]；</span><span class="sxs-lookup"><span data-stu-id="092e3-143">[Virtual network peering][VNetPeering],</span></span>
* <span data-ttu-id="092e3-144">[用户定义的路由 (UDR)][UDR]；</span><span class="sxs-lookup"><span data-stu-id="092e3-144">[User-Defined Routes (UDR)][UDR], and</span></span>
* <span data-ttu-id="092e3-145">具有[基于角色的访问控制 (RBAC)][RBAC] 的 Azure 标识，以及可选的 [Azure 防火墙][AzFW]、[Azure DNS][DNS]、[Azure Front Door][AFD] 和 [Azure 虚拟 WAN][vWAN]。</span><span class="sxs-lookup"><span data-stu-id="092e3-145">Azure Identity with [Role-Based Access Control (RBAC)][RBAC] and optionally [Azure Firewall][AzFW], [Azure DNS][DNS], [Azure Front Door][AFD], and [Azure Virtual WAN][vWAN].</span></span>

## <a name="who-should-implement-a-virtual-datacenter"></a><span data-ttu-id="092e3-146">应该由谁来实现虚拟数据中心？</span><span class="sxs-lookup"><span data-stu-id="092e3-146">Who should implement a Virtual datacenter?</span></span>

<span data-ttu-id="092e3-147">任何已决定采用云的 Azure 客户都可以配置一组供所有应用程序共同使用的资源，从而提高效率。</span><span class="sxs-lookup"><span data-stu-id="092e3-147">Any Azure customer that has decided to adopt the cloud can benefit from the efficiency of configuring a set of resources for common use by all applications.</span></span> <span data-ttu-id="092e3-148">即使单个应用程序也可充分利用生成 VDC 实现所用的模式和组件，具体取决于数量级。</span><span class="sxs-lookup"><span data-stu-id="092e3-148">Depending on the magnitude, even single applications can benefit from using the patterns and components used to build a VDC implementation.</span></span>

<span data-ttu-id="092e3-149">如果组织有一个中心化 IT、网络、安全性和/或符合性团队/部门，则实现 VDC 可能有助于强制实施策略点和责任分离，在根据你的要求给予应用程序团队尽可能多的自由和控制权的同时，确保基础公共组件的一致性。</span><span class="sxs-lookup"><span data-stu-id="092e3-149">If your organization has a centralized IT, Network, Security, and/or Compliance team/department, implementing a VDC can help enforce policy points, segregation of duty, and ensure uniformity of the underlying common components while giving application teams as much freedom and control as is appropriate for your requirements.</span></span>

<span data-ttu-id="092e3-150">期待 DevOps 的组织也可以利用 VDC 概念提供 Azure 资源的授权包，同时确保在相应的组（公共订阅中的订阅组或资源组）内拥有完全控制权，但网络和安全边界必须按照中心 VNet 和资源组内中心化策略的定义保持合规。</span><span class="sxs-lookup"><span data-stu-id="092e3-150">Organizations that are looking to DevOps can also utilize the VDC concepts to provide authorized pockets of Azure resources and ensure they have total control within that group (either subscription or resource group in a common subscription), but the network and security boundaries stay compliant as defined by a centralized policy in a hub VNet and Resource Group.</span></span>

## <a name="considerations-for-implementing-a-virtual-datacenter"></a><span data-ttu-id="092e3-151">实现虚拟数据中心的注意事项</span><span class="sxs-lookup"><span data-stu-id="092e3-151">Considerations for Implementing a Virtual datacenter</span></span>

<span data-ttu-id="092e3-152">设计 VDC 实现时，需考虑下述多个关键问题：</span><span class="sxs-lookup"><span data-stu-id="092e3-152">When designing a VDC implementation, there are several pivotal issues to consider:</span></span>

### <a name="identity-and-directory-service"></a><span data-ttu-id="092e3-153">标识和目录服务</span><span class="sxs-lookup"><span data-stu-id="092e3-153">Identity and Directory Service</span></span>

<span data-ttu-id="092e3-154">标识和目录服务是所有数据中心（本地数据中心和云数据中心）的关键。</span><span class="sxs-lookup"><span data-stu-id="092e3-154">Identity and Directory services are a key aspect of all datacenters, both on-premises and in the cloud.</span></span> <span data-ttu-id="092e3-155">标识与 VDC 实现中服务的访问和授权的各个方面相关。</span><span class="sxs-lookup"><span data-stu-id="092e3-155">Identity is related to all aspects of access and authorization to services within a VDC implementation.</span></span> <span data-ttu-id="092e3-156">为了帮助确保只有获得授权的用户和进程可以访问 Azure 帐户和资源，Azure 使用几种凭据进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="092e3-156">To help ensure that only authorized users and processes access your Azure Account and resources, Azure uses several types of credentials for authentication.</span></span> <span data-ttu-id="092e3-157">这些凭据包括密码（用于访问 Azure 帐户）、加密密钥、数字签名和安全证书。</span><span class="sxs-lookup"><span data-stu-id="092e3-157">These include passwords (to access the Azure account), cryptographic keys, digital signatures, and certificates.</span></span> <span data-ttu-id="092e3-158">[Azure 多重身份验证 (MFA)][MFA] 是一个附加安全层，针对 Azure 服务的访问。</span><span class="sxs-lookup"><span data-stu-id="092e3-158">[Azure Multi-Factor Authentication (MFA)][MFA] is an additional layer of security for accessing Azure services.</span></span> <span data-ttu-id="092e3-159">Azure MFA 通过一系列简单的验证选项（电话、短信或移动应用通知）提供强身份验证，客户可根据自己的偏好选择所用的方法。</span><span class="sxs-lookup"><span data-stu-id="092e3-159">Azure MFA provides strong authentication with a range of easy verification options — phone call, text message, or mobile app notification — and allow customers to choose the method they prefer.</span></span>

<span data-ttu-id="092e3-160">任何大型企业都需要定义标识管理流程，说明如何在 VDC 实现内部或跨 VDC 实现管理各个标识及其身份验证、授权、角色和权限。</span><span class="sxs-lookup"><span data-stu-id="092e3-160">Any large enterprise needs to define an identity management process that describes the management of individual identities, their authentication, authorization, roles, and privileges within or across their VDC implementation.</span></span> <span data-ttu-id="092e3-161">其目标是在减少成本、停机时间和重复人工作业的同时提高安全性和工作效率。</span><span class="sxs-lookup"><span data-stu-id="092e3-161">The goals of this process should be to increase security and productivity while decreasing cost, downtime, and repetitive manual tasks.</span></span>

<span data-ttu-id="092e3-162">企业/组织可以要求严格混合针对不同业务线 (LOB) 的服务，员工在参与不同的项目时通常会有不同的角色。</span><span class="sxs-lookup"><span data-stu-id="092e3-162">Enterprise/organizations can require a demanding mix of services for different Line-of-Businesses (LOBs), and employees often have different roles when involved with different projects.</span></span> <span data-ttu-id="092e3-163">VDC 要求不同的团队（每个团队拥有特定的角色定义）精诚合作，确保系统运行并很好地进行治理。</span><span class="sxs-lookup"><span data-stu-id="092e3-163">The VDC requires good cooperation between different teams, each with specific role definitions, to get systems running with good governance.</span></span> <span data-ttu-id="092e3-164">责任、访问和权限矩阵可能很复杂。</span><span class="sxs-lookup"><span data-stu-id="092e3-164">The matrix of responsibilities, access, and rights can be complex.</span></span> <span data-ttu-id="092e3-165">VDC 中的标识管理通过 [*Azure Active Directory* (Azure AD)][AAD] 和基于角色的访问控制 (RBAC) 来实现。</span><span class="sxs-lookup"><span data-stu-id="092e3-165">Identity management in the VDC is implemented through [*Azure Active Directory* (Azure AD)][AAD] and Role-Based Access Control (RBAC).</span></span>

<span data-ttu-id="092e3-166">目录服务是用于查找、控制、管理和组织日常项目和网络资源的共享信息基础结构。</span><span class="sxs-lookup"><span data-stu-id="092e3-166">A directory service is a shared information infrastructure that locates, manages, administers, and organizes everyday items and network resources.</span></span> <span data-ttu-id="092e3-167">这些资源包括卷、文件夹、文件、打印机、用户、组、设备和其他对象。</span><span class="sxs-lookup"><span data-stu-id="092e3-167">These resources can include volumes, folders, files, printers, users, groups, devices, and other objects.</span></span> <span data-ttu-id="092e3-168">目录服务器将网络上的每个资源视作一个对象。</span><span class="sxs-lookup"><span data-stu-id="092e3-168">Each resource on the network is considered an object by the directory server.</span></span> <span data-ttu-id="092e3-169">资源信息作为与该资源或对象相关的属性集合存储。</span><span class="sxs-lookup"><span data-stu-id="092e3-169">Information about a resource is stored as a collection of attributes associated with that resource or object.</span></span>

<span data-ttu-id="092e3-170">所有 Microsoft 联机业务服务都依赖于 Azure Active Directory (Azure AD) 进行登录及满足其他标识需求。</span><span class="sxs-lookup"><span data-stu-id="092e3-170">All Microsoft online business services rely on Azure Active Directory (Azure AD) for sign-in and other identity needs.</span></span> <span data-ttu-id="092e3-171">Azure Active Directory 是一个综合性的、高度可用的标识和访问管理云解决方案，它将核心目录服务、高级标识治理和应用程序访问管理结合起来。</span><span class="sxs-lookup"><span data-stu-id="092e3-171">Azure Active Directory is a comprehensive, highly available identity and access management cloud solution that combines core directory services, advanced identity governance, and application access management.</span></span> <span data-ttu-id="092e3-172">Azure AD 可与本地 Active Directory 集成，为基于云的和本地托管的所有应用程序启用单一登录。</span><span class="sxs-lookup"><span data-stu-id="092e3-172">Azure AD can integrate with on-premises Active Directory to enable single sign-on for all cloud-based and locally hosted on-premises applications.</span></span> <span data-ttu-id="092e3-173">本地 Active Directory 的用户属性可以自动同步到 Azure AD。</span><span class="sxs-lookup"><span data-stu-id="092e3-173">The user attributes of on-premises Active Directory can be automatically synchronized to Azure AD.</span></span>

<span data-ttu-id="092e3-174">在 VDC 实现中分配所有权限不需要单个全局管理员。</span><span class="sxs-lookup"><span data-stu-id="092e3-174">A single global administrator is not required to assign all permissions in a VDC implementation.</span></span> <span data-ttu-id="092e3-175">与之相反，可以为目录服务中的每个具体部门、用户组或服务分配在 VDC 实现中管理其自己的资源所需的权限。</span><span class="sxs-lookup"><span data-stu-id="092e3-175">Instead, each specific department, group of users, or services in the Directory Service can have the permissions required to manage their own resources within a VDC implementation.</span></span> <span data-ttu-id="092e3-176">权限的结构化需要均衡。</span><span class="sxs-lookup"><span data-stu-id="092e3-176">Structuring permissions requires balancing.</span></span> <span data-ttu-id="092e3-177">权限过多会妨碍性能效率，权限过少或过松则会增加安全风险。</span><span class="sxs-lookup"><span data-stu-id="092e3-177">Too many permissions can impede performance efficiency, and too few or loose permissions can increase security risks.</span></span> <span data-ttu-id="092e3-178">Azure 基于角色的访问控制 (RBAC) 可以为 VDC 实现中的资源提供细致的访问管理，因此有助于解决此问题。</span><span class="sxs-lookup"><span data-stu-id="092e3-178">Azure Role-Based Access Control (RBAC) helps to address this problem, by offering fine-grained access management for resources in a VDC implementation.</span></span>

#### <a name="security-infrastructure"></a><span data-ttu-id="092e3-179">安全基础结构</span><span class="sxs-lookup"><span data-stu-id="092e3-179">Security infrastructure</span></span>

<span data-ttu-id="092e3-180">安全基础结构是指 VDC 实现的特定虚拟网络段中的流量分离。</span><span class="sxs-lookup"><span data-stu-id="092e3-180">Security infrastructure refers to the segregation of traffic in a VDC implementation's specific virtual network segment.</span></span> <span data-ttu-id="092e3-181">此基础结构指定如何在 VDC 实现中控制流入量和流出量。</span><span class="sxs-lookup"><span data-stu-id="092e3-181">This infrastructure specifies how ingress and egress is controlled in a VDC implementation.</span></span> <span data-ttu-id="092e3-182">Azure 基于多租户基础结构，该基础结构通过使用虚拟网络 (VNet) 隔离、访问控制列表 (ACL)、负载均衡器、IP 筛选器和流量流策略，防止部署间的未经授权流量和意外流量。</span><span class="sxs-lookup"><span data-stu-id="092e3-182">Azure is based on a multi-tenant architecture that prevents unauthorized and unintentional traffic between deployments by using Virtual Network (VNet) isolation, access control lists (ACLs), load balancers, IP filters, and traffic flow policies.</span></span> <span data-ttu-id="092e3-183">网络地址转换 (NAT) 将内部网络流量与外部流量分开。</span><span class="sxs-lookup"><span data-stu-id="092e3-183">Network address translation (NAT) separates internal network traffic from external traffic.</span></span>

<span data-ttu-id="092e3-184">Azure 结构将基础结构资源分配到租户工作负荷，并管理与虚拟机 (VM) 的通信。</span><span class="sxs-lookup"><span data-stu-id="092e3-184">The Azure fabric allocates infrastructure resources to tenant workloads and manages communications to and from virtual machines (VMs).</span></span> <span data-ttu-id="092e3-185">Azure 虚拟机监控程序会在 VM 之间强制实施内存和进程隔离，并将网络流量安全路由到来宾 OS 租户。</span><span class="sxs-lookup"><span data-stu-id="092e3-185">The Azure hypervisor enforces memory and process separation between VMs and securely routes network traffic to guest OS tenants.</span></span>

#### <a name="connectivity-to-the-cloud"></a><span data-ttu-id="092e3-186">与云的连接</span><span class="sxs-lookup"><span data-stu-id="092e3-186">Connectivity to the cloud</span></span>

<span data-ttu-id="092e3-187">VDC 实现需要连接到外部网络才能为客户、合作伙伴和/或内部用户提供服务。</span><span class="sxs-lookup"><span data-stu-id="092e3-187">A VDC implementation requires connectivity to external networks to offer services to customers, partners and/or internal users.</span></span> <span data-ttu-id="092e3-188">这里的需要连接是指不仅需要连接到 Internet，而且需要连接到本地网络和数据中心。</span><span class="sxs-lookup"><span data-stu-id="092e3-188">This need for connectivity refers not only to the Internet, but also to on-premises networks and datacenters.</span></span>

<span data-ttu-id="092e3-189">客户可以使用 [Azure 防火墙][AzFW]或其他类型的虚拟网络设备 (NVA)、结合使用[用户定义的路由][UDR]和自定义路由策略，以及结合使用[网络安全组][NSG]和网络筛选，来控制哪些服务有权访问公共 Internet，以及可通过公共 Internet 访问这些服务。</span><span class="sxs-lookup"><span data-stu-id="092e3-189">Customers control which services have access to and are accessible from the public internet by using [Azure Firewall][AzFW] or other types of virtual network appliances (NVAs), custom routing policies by using [user-defined routes][UDR], and network filtering by using [network security groups][NSG].</span></span> <span data-ttu-id="092e3-190">我们建议使用 [Azure DDoS 防护标准版][DDOS]来进一步保护所有面向 Internet 的资源。</span><span class="sxs-lookup"><span data-stu-id="092e3-190">We recommend that all internet-facing resources also be protected by the [Azure DDoS Protection Standard][DDOS].</span></span>

<span data-ttu-id="092e3-191">企业可能需要将其 VDC 实现连接到本地数据中心或其他资源。</span><span class="sxs-lookup"><span data-stu-id="092e3-191">Enterprises may need to connect their VDC implementation to on-premises datacenters or other resources.</span></span> <span data-ttu-id="092e3-192">Azure 与本地网络的这种连接是设计高效体系结构的关键。</span><span class="sxs-lookup"><span data-stu-id="092e3-192">This connectivity between Azure and on-premises networks is a crucial aspect when designing an effective architecture.</span></span> <span data-ttu-id="092e3-193">企业可以通过两种不同方式实现此互连：通过 Internet 和/或专用直接连接进行传输。</span><span class="sxs-lookup"><span data-stu-id="092e3-193">Enterprises have two different ways to create this interconnection: transit over the Internet and/or by private direct connections.</span></span>

<span data-ttu-id="092e3-194">[**Azure 站点到站点 VPN**][VPN] 是使用安全加密连接（IPsec/IKE 隧道）通过 Internet 在本地网络与 VDC 实现之间建立的互连服务。</span><span class="sxs-lookup"><span data-stu-id="092e3-194">An [**Azure Site-to-Site VPN**][VPN] is an interconnection service over the Internet between on-premises networks and a VDC implementation, established through secure encrypted connections (IPsec/IKE tunnels).</span></span> <span data-ttu-id="092e3-195">由于所有连接都通过 Internet 实现，因此 Azure 站点到站点的连接创建起来灵活而快速，不需要任何进一步的采购。</span><span class="sxs-lookup"><span data-stu-id="092e3-195">Azure Site-to-Site connection is flexible, quick to create, and does not require any further procurement, as all connections connect over the internet.</span></span>

<span data-ttu-id="092e3-196">使用大量的 VPN 连接时，[**Azure 虚拟 WAN**][vWAN] 可充当网络服务，通过 Azure 提供经优化的、自动的分支到分支连接。</span><span class="sxs-lookup"><span data-stu-id="092e3-196">For large numbers of VPN connections, [**Azure Virtual WAN**][vWAN] is a networking service that provides optimized and automated branch-to-branch connectivity through Azure.</span></span> <span data-ttu-id="092e3-197">使用虚拟 WAN 可以连接分支设备，并将其配置为与 Azure 通信。</span><span class="sxs-lookup"><span data-stu-id="092e3-197">Virtual WAN lets you connect and configure branch devices to communicate with Azure.</span></span> <span data-ttu-id="092e3-198">连接和配置可以通过手动方式来完成，也可以通过虚拟 WAN 合作伙伴使用首选的提供商设备来完成。</span><span class="sxs-lookup"><span data-stu-id="092e3-198">Connecting and configuring can be done either manually, or by using preferred provider devices through a Virtual WAN partner.</span></span> <span data-ttu-id="092e3-199">使用首选的提供商设备可以降低操作难度、简化连接和进行配置管理。</span><span class="sxs-lookup"><span data-stu-id="092e3-199">Using preferred provider devices allows ease of use, simplification of connectivity, and configuration management.</span></span> <span data-ttu-id="092e3-200">Azure WAN 的内置仪表板提供即时故障排除见解，可帮助你节省时间，以及方便查看大规模的站点到站点连接。</span><span class="sxs-lookup"><span data-stu-id="092e3-200">The Azure WAN built-in dashboard provides instant troubleshooting insights that can help save you time, and gives you an easy way to view large-scale Site-to-Site connectivity.</span></span>

<span data-ttu-id="092e3-201">[**ExpressRoute**][ExR] 是一种 Azure 连接服务，可在 VDC 实现与任何本地网络之间建立专用连接。</span><span class="sxs-lookup"><span data-stu-id="092e3-201">[**ExpressRoute**][ExR] is an Azure connectivity service that enables private connections between a VDC implementation and any on-premises networks.</span></span> <span data-ttu-id="092e3-202">ExpressRoute 连接不通过公共 Internet，从而提供更高的安全性、可靠性、更快的速度（最高可达 10 Gbps）和一致延迟。</span><span class="sxs-lookup"><span data-stu-id="092e3-202">ExpressRoute connections do not go over the public Internet, and offer higher security, reliability, and higher speeds (up to 10 Gbps) along with consistent latency.</span></span> <span data-ttu-id="092e3-203">ExpressRoute 适用于 VDC 实现，因为 ExpressRoute 客户可以受益于与专用连接相关联的符合性规则。</span><span class="sxs-lookup"><span data-stu-id="092e3-203">ExpressRoute is useful for VDC implementations, as ExpressRoute customers can get the benefits of compliance rules associated with private connections.</span></span> <span data-ttu-id="092e3-204">对于带宽需求较高的客户，你可以使用 [ExpressRoute Direct][ExRD] 以 100 Gbps 的速率直接连接到 Microsoft 路由器。</span><span class="sxs-lookup"><span data-stu-id="092e3-204">With [ExpressRoute Direct][ExRD], you can connect directly to Microsoft routers at 100 Gbps for customer with larger bandwidth needs.</span></span>

<span data-ttu-id="092e3-205">部署 ExpressRoute 连接通常要与 ExpressRoute 服务提供商合作。</span><span class="sxs-lookup"><span data-stu-id="092e3-205">Deploying ExpressRoute connections usually involves engaging with an ExpressRoute service provider.</span></span> <span data-ttu-id="092e3-206">需要快速开始通信的客户往往是先使用站点到站点 VPN 在 VDC 实现与本地资源之间建立连接，然后在完成与服务提供商的物理互连后迁移到 ExpressRoute 连接。</span><span class="sxs-lookup"><span data-stu-id="092e3-206">For customers that need to start quickly, it is common to initially use Site-to-Site VPN to establish connectivity between a VDC implementation and on-premises resources, and then migrate to ExpressRoute connection when your physical interconnection with your service provider is complete.</span></span>

#### <a name="connectivity-within-the-cloud"></a><span data-ttu-id="092e3-207">*云内的连接*</span><span class="sxs-lookup"><span data-stu-id="092e3-207">*Connectivity within the cloud*</span></span>

<span data-ttu-id="092e3-208">[VNet][VNet] 和 [VNet 对等互连][VNetPeering]是 VDC 实现中的基本网络连接服务。</span><span class="sxs-lookup"><span data-stu-id="092e3-208">[VNets][VNet] and [VNet Peering][VNetPeering] are the basic networking connectivity services inside a VDC implementation.</span></span> <span data-ttu-id="092e3-209">VNet 保证 VDC 资源具有自然隔离边界，VNet 对等互连允许同一 Azure 区域或不同区域的不同 VNet 相互通信。</span><span class="sxs-lookup"><span data-stu-id="092e3-209">A VNet guarantees a natural boundary of isolation for VDC resources, and VNet peering allows intercommunication between different VNets within the same Azure region or even across regions.</span></span> <span data-ttu-id="092e3-210">VNet 内部以及 VNet 之间的流量控制需要与通过访问控制列表（[网络安全组][NSG]）、[网络虚拟设备][NVA]和自定义路由表 ([UDR][UDR]) 指定的一组安全规则匹配。</span><span class="sxs-lookup"><span data-stu-id="092e3-210">Traffic control inside a VNet and between VNets need to match a set of security rules specified through Access Control Lists ([Network Security Group][NSG]), [Network Virtual Appliances][NVA], and custom routing tables ([UDR][UDR]).</span></span>

## <a name="virtual-datacenter-overview"></a><span data-ttu-id="092e3-211">虚拟数据中心概述</span><span class="sxs-lookup"><span data-stu-id="092e3-211">Virtual datacenter overview</span></span>

### <a name="topology"></a><span data-ttu-id="092e3-212">拓扑</span><span class="sxs-lookup"><span data-stu-id="092e3-212">Topology</span></span>

<span data-ttu-id="092e3-213">中心辐射模型用于设计虚拟数据中心实现的网络拓扑。</span><span class="sxs-lookup"><span data-stu-id="092e3-213">_Hub and spoke_ is a model for designing the network topology for a virtual datacenter implementation.</span></span> 

<span data-ttu-id="092e3-214">[![1]][1]</span><span class="sxs-lookup"><span data-stu-id="092e3-214">[![1]][1]</span></span>

<span data-ttu-id="092e3-215">中心是控制和检查不同区域（Internet、本地和辐射）之间入口或出口流量的中心网络区域。</span><span class="sxs-lookup"><span data-stu-id="092e3-215">A hub is the central network zone that controls and inspects ingress or egress traffic between different zones: internet, on-premises, and the spokes.</span></span> <span data-ttu-id="092e3-216">中心辐射型拓扑为 IT 部门提供了在中心位置强制实施安全策略的有效方式。</span><span class="sxs-lookup"><span data-stu-id="092e3-216">The hub and spoke topology gives the IT department an effective way to enforce security policies in a central location.</span></span> <span data-ttu-id="092e3-217">此外，还减少了配置错误和泄密的可能性。</span><span class="sxs-lookup"><span data-stu-id="092e3-217">It also reduces the potential for misconfiguration and exposure.</span></span>

<span data-ttu-id="092e3-218">中心包含辐射使用的常见服务组件。</span><span class="sxs-lookup"><span data-stu-id="092e3-218">The hub contains the common service components consumed by the spokes.</span></span> <span data-ttu-id="092e3-219">下面是常见中心服务的示例：</span><span class="sxs-lookup"><span data-stu-id="092e3-219">The following examples are common central services:</span></span>

-   <span data-ttu-id="092e3-220">Windows Active Directory 基础结构：第三方从不受信任网络访问时，要求进行用户身份验证，验证通过后才可访问辐射中的工作负荷。</span><span class="sxs-lookup"><span data-stu-id="092e3-220">The Windows Active Directory infrastructure, required for user authentication of third parties that access from untrusted networks before they get access to the workloads in the spoke.</span></span> <span data-ttu-id="092e3-221">这包括相关的 Active Directory 联合身份验证服务 (AD FS)。</span><span class="sxs-lookup"><span data-stu-id="092e3-221">It includes the related Active Directory Federation Services (AD FS).</span></span>
-   <span data-ttu-id="092e3-222">用于解析分支中工作负荷的命名，以便在 [Azure DNS][DNS] 不可用时访问本地和 Internet 上的资源的 DNS 服务。</span><span class="sxs-lookup"><span data-stu-id="092e3-222">A DNS service to resolve naming for the workload in the spokes, to access resources on-premises and on the internet if [Azure DNS][DNS] isn't used.</span></span>
-   <span data-ttu-id="092e3-223">用于实现工作负荷的单一登录的公钥基础结构 (PKI)。</span><span class="sxs-lookup"><span data-stu-id="092e3-223">A public key infrastructure (PKI), to implement single sign-on on workloads.</span></span>
-   <span data-ttu-id="092e3-224">辐射网络区域与 Internet 之间的 TCP 和 UDP 流量的流控制。</span><span class="sxs-lookup"><span data-stu-id="092e3-224">Flow control of TCP and UDP traffic between the spoke network zones and the internet.</span></span>
-   <span data-ttu-id="092e3-225">辐射与本地之间的流控制。</span><span class="sxs-lookup"><span data-stu-id="092e3-225">Flow control between the spokes and on-premises.</span></span>
-   <span data-ttu-id="092e3-226">根据需要在一个辐射与另一个辐射之间进行流控制。</span><span class="sxs-lookup"><span data-stu-id="092e3-226">If needed, flow control between one spoke and another.</span></span>

<span data-ttu-id="092e3-227">VDC 通过在多个分支之间使用共享中心基础结构来降低总体成本。</span><span class="sxs-lookup"><span data-stu-id="092e3-227">The VDC reduces overall cost by using the shared hub infrastructure between multiple spokes.</span></span>

<span data-ttu-id="092e3-228">每个辐射的角色可以是托管不同类型的工作负荷。</span><span class="sxs-lookup"><span data-stu-id="092e3-228">The role of each spoke can be to host different types of workloads.</span></span> <span data-ttu-id="092e3-229">辐射还可为同一工作负荷的可重复部署提供模块化方法。</span><span class="sxs-lookup"><span data-stu-id="092e3-229">The spokes also provide a modular approach for repeatable deployments of the same workloads.</span></span> <span data-ttu-id="092e3-230">示例包括开发和测试、用户验收测试、预生产和生产。</span><span class="sxs-lookup"><span data-stu-id="092e3-230">Examples are dev and test, user acceptance testing, preproduction, and production.</span></span> <span data-ttu-id="092e3-231">辐射还可用于隔离和启用组织内部的不同组。</span><span class="sxs-lookup"><span data-stu-id="092e3-231">The spokes can also segregate and enable different groups within your organization.</span></span> <span data-ttu-id="092e3-232">示例包括 Azure DevOps 组。</span><span class="sxs-lookup"><span data-stu-id="092e3-232">An example is Azure DevOps groups.</span></span> <span data-ttu-id="092e3-233">在辐射内，可以通过各层之间的流量控制部署基本工作负荷或复杂的多层工作负荷。</span><span class="sxs-lookup"><span data-stu-id="092e3-233">Inside a spoke, it's possible to deploy a basic workload or complex multi-tier workloads with traffic control between the tiers.</span></span>

#### <a name="subscription-limits-and-multiple-hubs"></a><span data-ttu-id="092e3-234">订阅限制和多个中心</span><span class="sxs-lookup"><span data-stu-id="092e3-234">Subscription limits and multiple hubs</span></span>

<span data-ttu-id="092e3-235">在 Azure 中，每个组件（无论何种类型）都通过 Azure 订阅进行部署。</span><span class="sxs-lookup"><span data-stu-id="092e3-235">In Azure, every component, whatever the type, is deployed in an Azure Subscription.</span></span> <span data-ttu-id="092e3-236">不同 Azure 订阅中的 Azure 组件的隔离可满足不同 LOB 的需求，如设置不同级别的访问和授权。</span><span class="sxs-lookup"><span data-stu-id="092e3-236">The isolation of Azure components in different Azure subscriptions can satisfy the requirements of different LOBs, such as setting up differentiated levels of access and authorization.</span></span>

<span data-ttu-id="092e3-237">尽管与每个 IT 系统一样具有平台限制，单个 VDC 实现仍能通过纵向扩展拥有大量分支。</span><span class="sxs-lookup"><span data-stu-id="092e3-237">A single VDC implementation can scale up to large number of spokes, although, as with every IT system, there are platforms limits.</span></span> <span data-ttu-id="092e3-238">中心部署与特定的 Azure 订阅绑定，该订阅具有相关的约束和限制（如 VNet 对等互连上限 - 请参阅 [Azure 订阅和服务限制、配额和约束条件][Limits]获取详细信息）。</span><span class="sxs-lookup"><span data-stu-id="092e3-238">The hub deployment is bound to a specific Azure subscription, which has restrictions and limits (for example, a max number of VNet peerings - see [Azure subscription and service limits, quotas, and constraints][Limits] for details).</span></span> <span data-ttu-id="092e3-239">如果出现限制问题，体系结构可以通过将模型从单个中心辐射型扩展为中心辐射群集实现进一步纵向扩展。</span><span class="sxs-lookup"><span data-stu-id="092e3-239">In cases where limits may be an issue, the architecture can scale up further by extending the model from a single hub-spokes to a cluster of hub and spokes.</span></span> <span data-ttu-id="092e3-240">位于一个或多个 Azure 区域的多个中心可以使用 VNet 对等互连、ExpressRoute、虚拟 WAN 或站点到站点 VPN 实现互连。</span><span class="sxs-lookup"><span data-stu-id="092e3-240">Multiple hubs in one or more Azure regions can be interconnected using VNet Peering, ExpressRoute, Virtual WAN, or site-to-site VPN.</span></span>

<span data-ttu-id="092e3-241">[![2]][2]</span><span class="sxs-lookup"><span data-stu-id="092e3-241">[![2]][2]</span></span>

<span data-ttu-id="092e3-242">引入多个中心会增加系统的成本和管理工作量。</span><span class="sxs-lookup"><span data-stu-id="092e3-242">The introduction of multiple hubs increases the cost and management effort of the system.</span></span> <span data-ttu-id="092e3-243">引入的唯一原因在于可伸缩性（如系统限制或冗余）和区域复制（如最终用户性能或灾难恢复）。</span><span class="sxs-lookup"><span data-stu-id="092e3-243">It would only be justified by scalability like system limits or redundancy and regional replication like end-user performance or disaster recovery.</span></span> <span data-ttu-id="092e3-244">在要求多个中心的情形下，所有中心应力图提供相同的服务集以方便操作。</span><span class="sxs-lookup"><span data-stu-id="092e3-244">In scenarios requiring multiple hubs, all the hubs should strive to offer the same set of services for operational ease.</span></span>

#### <a name="interconnection-between-spokes"></a><span data-ttu-id="092e3-245">辐射之间的互连</span><span class="sxs-lookup"><span data-stu-id="092e3-245">Interconnection between spokes</span></span>

<span data-ttu-id="092e3-246">在单个辐射内，可以实现复杂的多层工作负荷。</span><span class="sxs-lookup"><span data-stu-id="092e3-246">Inside a single spoke, it is possible to implement complex multi-tiers workloads.</span></span> <span data-ttu-id="092e3-247">在同一 VNet 内使用子网（每层使用一个子网）并使用 NSG 对流进行筛选可以实现多层配置。</span><span class="sxs-lookup"><span data-stu-id="092e3-247">Multi-tier configurations can be implemented using subnets (one for every tier) in the same VNet and filtering the flows using NSGs.</span></span>

<span data-ttu-id="092e3-248">架构师可能希望跨多个虚拟网络部署多层工作负荷。</span><span class="sxs-lookup"><span data-stu-id="092e3-248">An architect might want to deploy a multi-tier workload across multiple virtual networks.</span></span> <span data-ttu-id="092e3-249">使用虚拟网络对等互连，辐射可以连接到同一中心的其他辐射，也可连接到其他中心的其他辐射。</span><span class="sxs-lookup"><span data-stu-id="092e3-249">With virtual network peering, spokes can connect to other spokes in the same hub or different hubs.</span></span> <span data-ttu-id="092e3-250">此方案的典型示例是应用程序处理服务器位于一个辐射或虚拟网络中。</span><span class="sxs-lookup"><span data-stu-id="092e3-250">A typical example of this scenario is the case where application processing servers are in one spoke, or virtual network.</span></span> <span data-ttu-id="092e3-251">数据库部署在另一个辐射或虚拟网络中。</span><span class="sxs-lookup"><span data-stu-id="092e3-251">The database deploys in a different spoke, or virtual network.</span></span> <span data-ttu-id="092e3-252">在这种情况下，可以轻松实现辐射与虚拟网络对等互连之间的互连，从而避免通过中心传输。</span><span class="sxs-lookup"><span data-stu-id="092e3-252">In this case, it's easy to interconnect the spokes with virtual network peering and thereby avoid transiting through the hub.</span></span> <span data-ttu-id="092e3-253">应仔细审查体系结构和安全性，确保绕过中心并不会绕过可能只存在于中心的重要安全或审核点。</span><span class="sxs-lookup"><span data-stu-id="092e3-253">A careful architecture and security review should be performed to ensure that bypassing the hub doesn’t bypass important security or auditing points that might exist only in the hub.</span></span>

<span data-ttu-id="092e3-254">[![3]][3]</span><span class="sxs-lookup"><span data-stu-id="092e3-254">[![3]][3]</span></span>

<span data-ttu-id="092e3-255">辐射也可以与充当中心的辐射互连。</span><span class="sxs-lookup"><span data-stu-id="092e3-255">Spokes can also be interconnected to a spoke that acts as a hub.</span></span> <span data-ttu-id="092e3-256">此方法可以创建一个两层的层次结构：在该层次结构中，较高级别（第 0 层）的辐射成为较低级别（第 1 层）辐射的中心。</span><span class="sxs-lookup"><span data-stu-id="092e3-256">This approach creates a two-level hierarchy: the spoke in the higher level (level 0) become the hub of lower spokes (level 1) of the hierarchy.</span></span> <span data-ttu-id="092e3-257">需要通过 VDC 实现的分支将流量转发到中心，然后才能将流量传输到本地网络或公共 Internet 中的目标。</span><span class="sxs-lookup"><span data-stu-id="092e3-257">The spokes of a VDC implementation are required to forward the traffic to the central hub so that the traffic can transit to its destination in either the on-premises network or public internet.</span></span> <span data-ttu-id="092e3-258">具有两层中心的体系结构引入了复杂路由，该路由会消除简单中心辐射关系的优势。</span><span class="sxs-lookup"><span data-stu-id="092e3-258">An architecture with two levels of hub introduces complex routing that removes the benefits of a simple hub-spoke relationship.</span></span>

<span data-ttu-id="092e3-259">尽管 Azure 允许复杂拓扑，但 VDC 概念的核心原则之一是可重复性和简洁性。</span><span class="sxs-lookup"><span data-stu-id="092e3-259">Although Azure allows complex topologies, one of the core principles of the VDC concept is repeatability and simplicity.</span></span> <span data-ttu-id="092e3-260">为了尽量减少管理工作量，我们建议使用简单的中心辐射设计作为 VDC 参考体系结构。</span><span class="sxs-lookup"><span data-stu-id="092e3-260">To minimize management effort, the simple hub-spoke design is the VDC reference architecture that we recommend.</span></span>

### <a name="components"></a><span data-ttu-id="092e3-261">组件</span><span class="sxs-lookup"><span data-stu-id="092e3-261">Components</span></span>

<span data-ttu-id="092e3-262">虚拟数据中心由下述四个基本组件类型构成：基础结构、外围网络、工作负荷和监视。</span><span class="sxs-lookup"><span data-stu-id="092e3-262">The virtual datacenter is made up of four basic component types: **Infrastructure**, **Perimeter Networks**, **Workloads**, and **Monitoring**.</span></span>

<span data-ttu-id="092e3-263">每个组件类型由各种 Azure 功能和资源组成。</span><span class="sxs-lookup"><span data-stu-id="092e3-263">Each component type consists of various Azure features and resources.</span></span> <span data-ttu-id="092e3-264">VDC 实现由多个组件类型的实例和同一组件类型的多个变体构成。</span><span class="sxs-lookup"><span data-stu-id="092e3-264">Your VDC implementation is made up of instances of multiple components types and multiple variations of the same component type.</span></span> <span data-ttu-id="092e3-265">例如，可能有许多逻辑上分离的不同工作负荷实例表示不同应用程序。</span><span class="sxs-lookup"><span data-stu-id="092e3-265">For instance, you may have many different, logically separated, workload instances that represent different applications.</span></span> <span data-ttu-id="092e3-266">使用这些不同的组件类型和实例最终生成 VDC。</span><span class="sxs-lookup"><span data-stu-id="092e3-266">You use these different component types and instances to ultimately build the VDC.</span></span>

<span data-ttu-id="092e3-267">[![4]][4]</span><span class="sxs-lookup"><span data-stu-id="092e3-267">[![4]][4]</span></span>

<span data-ttu-id="092e3-268">上图中 VDC 的概览性概念体系结构显示了中心辐射型拓扑的不同区域使用的不同组件类型。</span><span class="sxs-lookup"><span data-stu-id="092e3-268">The preceding high-level conceptual architecture of the VDC shows different component types used in different zones of the hub-spokes topology.</span></span> <span data-ttu-id="092e3-269">此关系图显示了该体系结构中各个部分的基础结构组件。</span><span class="sxs-lookup"><span data-stu-id="092e3-269">The diagram shows infrastructure components in various parts of the architecture.</span></span>

<span data-ttu-id="092e3-270">访问权限和特权应该基于组，这是常规情况下的适当做法。</span><span class="sxs-lookup"><span data-stu-id="092e3-270">As good practice in general, access rights and privileges should be group-based.</span></span> <span data-ttu-id="092e3-271">使用组而不是单个用户可以简化访问策略的维护，因为可以跨团队对其进行一致的管理，</span><span class="sxs-lookup"><span data-stu-id="092e3-271">Dealing with groups rather than individual users eases maintenance of access policies by providing a consistent way to manage it across teams.</span></span>  <span data-ttu-id="092e3-272">并可尽量减少配置错误。</span><span class="sxs-lookup"><span data-stu-id="092e3-272">and aids in minimizing configuration errors.</span></span> <span data-ttu-id="092e3-273">在相应的组中分配或删除用户有助于使特定用户的权限保持最新。</span><span class="sxs-lookup"><span data-stu-id="092e3-273">Assigning and removing users to and from appropriate groups helps keeping the privileges of a specific user up-to-date.</span></span>

<span data-ttu-id="092e3-274">每个角色组的名称应具有唯一的前缀。</span><span class="sxs-lookup"><span data-stu-id="092e3-274">Each role group should have a unique prefix on their names.</span></span> <span data-ttu-id="092e3-275">参考此前缀可以轻松识别哪个组与哪个工作负荷相关联。</span><span class="sxs-lookup"><span data-stu-id="092e3-275">This prefix makes it easy to identify which group is associated with which workload.</span></span> <span data-ttu-id="092e3-276">例如，托管身份验证服务的工作负荷应具有名为 **AuthServiceNetOps**、**AuthServiceSecOps**、**AuthServiceDevOps** 和 **AuthServiceInfraOps** 的组。</span><span class="sxs-lookup"><span data-stu-id="092e3-276">For example, a workload hosting an authentication service might have groups named **AuthServiceNetOps**, **AuthServiceSecOps**, **AuthServiceDevOps**, and **AuthServiceInfraOps**.</span></span> <span data-ttu-id="092e3-277">中心化角色或不与特定服务相关的角色的名称可以 **Corp** 开头。例如 **CorpNetOps**。</span><span class="sxs-lookup"><span data-stu-id="092e3-277">Centralized roles, or roles not related to a specific service, might be prefaced with **Corp**. An example is **CorpNetOps**.</span></span>

<span data-ttu-id="092e3-278">许多组织都使用以下组的变体来提供主要角色细分：</span><span class="sxs-lookup"><span data-stu-id="092e3-278">Many organizations use a variation of the following groups to provide a major breakdown of roles:</span></span>

-   <span data-ttu-id="092e3-279">中心 IT 组 **Corp** 具有可控制基础结构组件的所有权。</span><span class="sxs-lookup"><span data-stu-id="092e3-279">The central IT group, **Corp,** has the ownership rights to control infrastructure components.</span></span> <span data-ttu-id="092e3-280">示例包括网络和安全性。</span><span class="sxs-lookup"><span data-stu-id="092e3-280">Examples are networking and security.</span></span> <span data-ttu-id="092e3-281">该组需要在订阅中拥有参与者角色、拥有中心控制权，并在辐射中拥有网络参与者权限。</span><span class="sxs-lookup"><span data-stu-id="092e3-281">The group needs to have the role of contributor on the subscription, control of the hub, and network contributor rights in the spokes.</span></span> <span data-ttu-id="092e3-282">大型组织经常在多个团队之间划分这些管理责任。</span><span class="sxs-lookup"><span data-stu-id="092e3-282">Large organizations frequently split up these management responsibilities between multiple teams.</span></span> <span data-ttu-id="092e3-283">例如，专门处理网络的网络操作 **CorpNetOps** 组，以及负责防火墙和安全策略的安全操作 **CorpSecOps** 组。</span><span class="sxs-lookup"><span data-stu-id="092e3-283">Examples are a network operations **CorpNetOps** group with exclusive focus on networking and a security operations **CorpSecOps** group responsible for the firewall and security policy.</span></span> <span data-ttu-id="092e3-284">在这种特定情况下，需要创建两个不同的组，用于分配这些自定义角色。</span><span class="sxs-lookup"><span data-stu-id="092e3-284">In this specific case, two different groups need to be created for assignment of these custom roles.</span></span>
-   <span data-ttu-id="092e3-285">开发与测试组 **AppDevOps** 负责部署应用或服务工作负荷。</span><span class="sxs-lookup"><span data-stu-id="092e3-285">The dev-test group, **AppDevOps,** has the responsibility to deploy app or service workloads.</span></span> <span data-ttu-id="092e3-286">此组充当 IaaS 部署的虚拟机参与者角色或者一个或多个 PaaS 参与者角色。</span><span class="sxs-lookup"><span data-stu-id="092e3-286">This group takes the role of virtual machine contributor for IaaS deployments or one or more PaaS contributor’s roles.</span></span> <span data-ttu-id="092e3-287">请参阅 [Azure 资源的内置角色][Roles]。</span><span class="sxs-lookup"><span data-stu-id="092e3-287">See [Built-in roles for Azure resources][Roles].</span></span> <span data-ttu-id="092e3-288">（可选）开发与测试团队可能需要对中心或特定辐射内的安全策略 (NSG) 和路由策略 (UDR) 拥有可见性。</span><span class="sxs-lookup"><span data-stu-id="092e3-288">Optionally, the dev-test team might need visibility on security policies, NSGs, and routing policies, UDRs, inside the hub or a specific spoke.</span></span> <span data-ttu-id="092e3-289">除了担任工作负荷参与者角色，此组也需要担任网络读取者角色。</span><span class="sxs-lookup"><span data-stu-id="092e3-289">In addition to the role of contributor for workloads, this group would also need the role of network reader.</span></span>
-   <span data-ttu-id="092e3-290">操作和维护组 **CorpInfraOps** 或 **AppInfraOps** 负责管理生产中的工作负荷。</span><span class="sxs-lookup"><span data-stu-id="092e3-290">The operation and maintenance group, **CorpInfraOps** or **AppInfraOps,** has the responsibility of managing workloads in production.</span></span> <span data-ttu-id="092e3-291">此组必须是任何生产订阅中工作负荷的订阅参与者。</span><span class="sxs-lookup"><span data-stu-id="092e3-291">This group needs to be a subscription contributor on workloads in any production subscriptions.</span></span> <span data-ttu-id="092e3-292">一些组织还可能评估他们是否需要在生产和中心订阅中担任订阅参与者角色的附加升级支持团队组。</span><span class="sxs-lookup"><span data-stu-id="092e3-292">Some organizations might also evaluate if they need an additional escalation support team group with the role of subscription contributor in production and the central hub subscription.</span></span> <span data-ttu-id="092e3-293">该附加组修复生产环境中的潜在配置问题。</span><span class="sxs-lookup"><span data-stu-id="092e3-293">The additional group fixes potential configuration issues in the production environment.</span></span>

<span data-ttu-id="092e3-294">设计 VDC 时，需确保在创建组时要创建用于管理中心的中心 IT 组，同时在工作负荷级别也要有相应的组。</span><span class="sxs-lookup"><span data-stu-id="092e3-294">The VDC is designed so groups created for the central IT groups managing the hub have corresponding groups at the workload level.</span></span> <span data-ttu-id="092e3-295">除了管理中心资源，中心 IT 组还能控制订阅的外部访问和顶级权限。</span><span class="sxs-lookup"><span data-stu-id="092e3-295">In addition to managing hub resources only, the central IT group is able to control external access and top-level permissions on the subscription.</span></span> <span data-ttu-id="092e3-296">工作负荷组还能在中心 IT 内独立地控制其 VNet 的资源和权限。</span><span class="sxs-lookup"><span data-stu-id="092e3-296">Workload groups are also able to control resources and permissions of their VNet independently on Central IT.</span></span>

<span data-ttu-id="092e3-297">将 VDC 分区可以安全地托管跨不同业务线 (LOB) 的多个项目。</span><span class="sxs-lookup"><span data-stu-id="092e3-297">The VDC is partitioned to securely host multiple projects across different Lines-of-Business (LOBs).</span></span> <span data-ttu-id="092e3-298">所有项目需要不同的独立环境（如开发、UAT 和生产）。</span><span class="sxs-lookup"><span data-stu-id="092e3-298">All projects require different isolated environments (Dev, UAT, production).</span></span> <span data-ttu-id="092e3-299">每个环境的各个 Azure 订阅自然隔离。</span><span class="sxs-lookup"><span data-stu-id="092e3-299">Separate Azure subscriptions for each of these environments provide natural isolation.</span></span>

<span data-ttu-id="092e3-300">[![5]][5]</span><span class="sxs-lookup"><span data-stu-id="092e3-300">[![5]][5]</span></span>

<span data-ttu-id="092e3-301">上方关系图显示组织中项目、用户、组以及部署 Azure 组件的环境之间的关系。</span><span class="sxs-lookup"><span data-stu-id="092e3-301">The preceding diagram shows the relationship between an organization's projects, users, and groups and the environments where the Azure components are deployed.</span></span>

<span data-ttu-id="092e3-302">在 IT 中，环境（或层）通常是部署和执行多个应用程序的系统。</span><span class="sxs-lookup"><span data-stu-id="092e3-302">Typically in IT, an environment (or tier) is a system in which multiple applications are deployed and executed.</span></span> <span data-ttu-id="092e3-303">大型企业使用开发环境（最初做出更改和测试的环境）和生产环境（最终用户使用的环境）。</span><span class="sxs-lookup"><span data-stu-id="092e3-303">Large enterprises use a development environment (where changes originally made and tested) and a production environment (what end-users use).</span></span> <span data-ttu-id="092e3-304">这些环境相互隔离，环境之间通常存在多个过渡环境，出现问题时可实现分阶段部署（推出）、测试和回退。</span><span class="sxs-lookup"><span data-stu-id="092e3-304">Those environments are separated, often with several staging environments in between them to allow phased deployment (rollout), testing, and rollback if problems arise.</span></span> <span data-ttu-id="092e3-305">部署体系结构之间存在巨大差异，但通常遵循以下基本流程：始于开发 (DEV)，终于生产 (PROD)。</span><span class="sxs-lookup"><span data-stu-id="092e3-305">Deployment architectures vary significantly, but usually the basic process of starting at development (DEV) and ending at production (PROD) is still followed.</span></span>

<span data-ttu-id="092e3-306">此类多层环境的常见体系结构包括 Azure DevOps（开发和测试）、UAT（过渡）和生产环境。</span><span class="sxs-lookup"><span data-stu-id="092e3-306">A common architecture for these types of multi-tier environments consists of Azure DevOps for development and testing, UAT for staging, and production environments.</span></span> <span data-ttu-id="092e3-307">组织可以利用单个或多个 Azure AD 租户定义对这些环境的访问和权限。</span><span class="sxs-lookup"><span data-stu-id="092e3-307">Organizations can leverage single or multiple Azure AD tenants to define access and rights to these environments.</span></span> <span data-ttu-id="092e3-308">上方关系图显示使用两个不同 Azure AD 租户的事例：一个用于 Azure DevOps 和 UAT，另一个专门用于生产。</span><span class="sxs-lookup"><span data-stu-id="092e3-308">The previous diagram shows a case where two different Azure AD tenants are used: one for Azure DevOps and UAT, and the other exclusively for production.</span></span>

<span data-ttu-id="092e3-309">不同的 Azure AD 租户可以强化环境之间的隔离。</span><span class="sxs-lookup"><span data-stu-id="092e3-309">The presence of different Azure AD tenants enforces the separation between environments.</span></span> <span data-ttu-id="092e3-310">同一组用户（如中心 IT）需要使用不同 URI 进行身份验证，从而访问不同的 Azure AD 租户，该租户可修改项目的 Azure DevOps 或生产环境的角色或权限。</span><span class="sxs-lookup"><span data-stu-id="092e3-310">The same group of users, such as the central IT, needs to authenticate by using a different URI to access a different Azure AD tenant to modify the roles or permissions of either the Azure DevOps or production environments of a project.</span></span> <span data-ttu-id="092e3-311">通过不同的用户身份验证访问不同的环境可以减少人为失误可能导致的中断和其他问题。</span><span class="sxs-lookup"><span data-stu-id="092e3-311">The presence of different user authentications to access different environments reduces possible outages and other issues caused by human errors.</span></span>

#### <a name="component-type-infrastructure"></a><span data-ttu-id="092e3-312">组件类型：基础结构</span><span class="sxs-lookup"><span data-stu-id="092e3-312">Component type: Infrastructure</span></span>

<span data-ttu-id="092e3-313">大多数支持基础结构都位于此组件类型中。</span><span class="sxs-lookup"><span data-stu-id="092e3-313">This component type is where most of the supporting infrastructure resides.</span></span> <span data-ttu-id="092e3-314">中心化 IT、安全团队和/或符合性团队的大部分时间花费在该类型上。</span><span class="sxs-lookup"><span data-stu-id="092e3-314">It's also where your centralized IT, Security, and/or Compliance teams spend most of their time.</span></span>

<span data-ttu-id="092e3-315">[![6]][6]</span><span class="sxs-lookup"><span data-stu-id="092e3-315">[![6]][6]</span></span>

<span data-ttu-id="092e3-316">基础结构组件为 VDC 实现的不同组件提供互连，在中心和分支中都存在。</span><span class="sxs-lookup"><span data-stu-id="092e3-316">Infrastructure components provide an interconnection for the different components of a VDC implementation, and are present in both the hub and the spokes.</span></span> <span data-ttu-id="092e3-317">管理和维护基础结构组件的责任通常分配给中心 IT 和/或安全团队。</span><span class="sxs-lookup"><span data-stu-id="092e3-317">The responsibility for managing and maintaining the infrastructure components is typically assigned to the central IT and/or security team.</span></span>

<span data-ttu-id="092e3-318">IT 基础结构团队的首要任务之一是保证整个企业 IP 地址架构的一致性。</span><span class="sxs-lookup"><span data-stu-id="092e3-318">One of the primary tasks of the IT infrastructure team is to guarantee the consistency of IP address schemas across the enterprise.</span></span> <span data-ttu-id="092e3-319">分配给 VDC 实现的专用 IP 地址空间必须一致，并且不能与本地网络上分配的专用 IP 地址重叠。</span><span class="sxs-lookup"><span data-stu-id="092e3-319">The private IP address space assigned to a VDC implementation must be consistent and NOT overlapping with private IP addresses assigned on your on-premises networks.</span></span>

<span data-ttu-id="092e3-320">NAT 在本地边缘路由器或 Azure 环境中时可避免 IP 地址冲突，但会增加基础结构组件的复杂性。</span><span class="sxs-lookup"><span data-stu-id="092e3-320">While NAT on the on-premises edge routers or in Azure environments can avoid IP address conflicts, it adds complications to your infrastructure components.</span></span> <span data-ttu-id="092e3-321">简化管理是 VDC 的关键目标之一，因此不建议使用 NAT 处理 IP 问题。</span><span class="sxs-lookup"><span data-stu-id="092e3-321">Simplicity of management is one of the key goals of the VDC, so using NAT to handle IP concerns is not a recommended solution.</span></span>

<span data-ttu-id="092e3-322">基础结构组件提供以下功能：</span><span class="sxs-lookup"><span data-stu-id="092e3-322">Infrastructure components have the following functionality:</span></span>

-   <span data-ttu-id="092e3-323">[**标识和目录服务**][AAD]。</span><span class="sxs-lookup"><span data-stu-id="092e3-323">[**Identity and directory services**][AAD].</span></span> <span data-ttu-id="092e3-324">对 Azure 中的每种资源类型的访问都由目录服务中存储的标识控制。</span><span class="sxs-lookup"><span data-stu-id="092e3-324">Access to every resource type in Azure is controlled by an identity stored in a directory service.</span></span> <span data-ttu-id="092e3-325">目录服务不仅存储用户列表，也存储特定 Azure 订阅中资源的访问权限。</span><span class="sxs-lookup"><span data-stu-id="092e3-325">The directory service stores not only the list of users, but also the access rights to resources in a specific Azure subscription.</span></span> <span data-ttu-id="092e3-326">这些服务可只存在于云中，也可以与 Active Directory 中存储的本地标识同步。</span><span class="sxs-lookup"><span data-stu-id="092e3-326">These services can exist cloud-only, or they can be synchronized with on-premises identity stored in Active Directory.</span></span>
-   <span data-ttu-id="092e3-327">[**虚拟网络**][VPN]。</span><span class="sxs-lookup"><span data-stu-id="092e3-327">[**Virtual Network**][VPN].</span></span> <span data-ttu-id="092e3-328">虚拟网络是 VDC 的主要组件之一，可以用来在 Azure 平台创建流量隔离边界。</span><span class="sxs-lookup"><span data-stu-id="092e3-328">Virtual Networks are one of main components of the VDC, and enable you to create a traffic isolation boundary on the Azure platform.</span></span> <span data-ttu-id="092e3-329">虚拟网络由单个或多个虚拟网络段构成，每个虚拟网络段都有一个特定的 IP 网络前缀（子网）。</span><span class="sxs-lookup"><span data-stu-id="092e3-329">A Virtual Network is composed of a single or multiple virtual network segments, each with a specific IP network prefix (a subnet).</span></span> <span data-ttu-id="092e3-330">虚拟网络定义内部外围区域，在该区域中 IaaS 虚拟机和 PaaS 服务可以建立专用通信。</span><span class="sxs-lookup"><span data-stu-id="092e3-330">The Virtual Network defines an internal perimeter area where IaaS virtual machines and PaaS services can establish private communications.</span></span> <span data-ttu-id="092e3-331">一个虚拟网络中的 VM（和 PaaS 服务）不能与另一个虚拟网络中的 VM（和 PaaS 服务）直接通信，即使这两个虚拟网络是由同一个客户在同一订阅下创建的。</span><span class="sxs-lookup"><span data-stu-id="092e3-331">VMs (and PaaS services) in one virtual network cannot communicate directly to VMs (and PaaS services) in a different virtual network, even if both virtual networks are created by the same customer, under the same subscription.</span></span> <span data-ttu-id="092e3-332">隔离是一个非常关键的属性，可确保客户 VM 与通信在虚拟网络中保持私密性。</span><span class="sxs-lookup"><span data-stu-id="092e3-332">Isolation is a critical property that ensures customer VMs and communication remains private within a virtual network.</span></span>
-   <span data-ttu-id="092e3-333">[**UDR**][UDR]。</span><span class="sxs-lookup"><span data-stu-id="092e3-333">[**UDR**][UDR].</span></span> <span data-ttu-id="092e3-334">虚拟网络中的流量默认基于系统路由表路由。</span><span class="sxs-lookup"><span data-stu-id="092e3-334">Traffic in a Virtual Network is routed by default based on the system routing table.</span></span> <span data-ttu-id="092e3-335">用户定义的路由是自定义路由表，网络管理员可以将该路由表关联到一个或多个子网，覆盖系统路由表的行为并定义虚拟网络中的通信路径。</span><span class="sxs-lookup"><span data-stu-id="092e3-335">A User Defined Route is a custom routing table that network administrators can associate to one or more subnets to overwrite the behavior of the system routing table and define a communication path within a virtual network.</span></span> <span data-ttu-id="092e3-336">UDR 保证辐射的出口流量通过中心和辐射中的特定自定义 VM 和/或虚拟网络设备以及负载均衡器传输。</span><span class="sxs-lookup"><span data-stu-id="092e3-336">The presence of UDRs guarantees that egress traffic from the spoke transit through specific custom VMs and/or Network Virtual Appliances and load balancers present in the hub and in the spokes.</span></span>
-   <span data-ttu-id="092e3-337">[**NSG**][NSG]。</span><span class="sxs-lookup"><span data-stu-id="092e3-337">[**NSG**][NSG].</span></span> <span data-ttu-id="092e3-338">网络安全组是一系列安全规则，充当 IP 源、IP 目标、协议、IP 源端口和 IP 目标端口的流量筛选器。</span><span class="sxs-lookup"><span data-stu-id="092e3-338">A Network Security Group is a list of security rules that act as traffic filtering on IP Sources, IP Destination, Protocols, IP Source Ports, and IP Destination ports.</span></span> <span data-ttu-id="092e3-339">NSG 可应用于子网和/或与 Azure VM 关联的虚拟 NIC 卡。</span><span class="sxs-lookup"><span data-stu-id="092e3-339">The NSG can be applied to a subnet, a Virtual NIC card associated with an Azure VM, or both.</span></span> <span data-ttu-id="092e3-340">NSG 对在中心和辐射中实现正确的流控制至关重要。</span><span class="sxs-lookup"><span data-stu-id="092e3-340">The NSGs are essential to implement a correct flow control in the hub and in the spokes.</span></span> <span data-ttu-id="092e3-341">NSG 提供的安全级别由出于何种原因打开哪个端口决定。</span><span class="sxs-lookup"><span data-stu-id="092e3-341">The level of security afforded by the NSG is a function of which ports you open, and for what purpose.</span></span> <span data-ttu-id="092e3-342">客户应通过基于主机的防火墙（如 IPtable 或 Windows 防火墙）对每个 VM 应用附加筛选器。</span><span class="sxs-lookup"><span data-stu-id="092e3-342">Customers should apply additional per-VM filters with host-based firewalls such as IPtables or the Windows Firewall.</span></span>
-   <span data-ttu-id="092e3-343">[**DNS**][DNS]。</span><span class="sxs-lookup"><span data-stu-id="092e3-343">[**DNS**][DNS].</span></span> <span data-ttu-id="092e3-344">VDC 实现中 VNet 资源的名称解析通过 DNS 提供。</span><span class="sxs-lookup"><span data-stu-id="092e3-344">The name resolution of resources in the VNets of a VDC implementation is provided through DNS.</span></span> <span data-ttu-id="092e3-345">Azure 提供 DNS 服务用于执行[公共][DNS]和[专用][PrivateDNS]名称解析。</span><span class="sxs-lookup"><span data-stu-id="092e3-345">Azure provides DNS services for both [Public][DNS] and [Private][PrivateDNS] name resolution.</span></span> <span data-ttu-id="092e3-346">专用区域在虚拟网络内或虚拟网络之间提供名称解析功能。</span><span class="sxs-lookup"><span data-stu-id="092e3-346">Private zones provide name resolution both within a virtual network and across virtual networks.</span></span> <span data-ttu-id="092e3-347">可以让专用区域跨同一区域的虚拟网络，以及跨区域和跨订阅。</span><span class="sxs-lookup"><span data-stu-id="092e3-347">You can have private zones not only span across virtual networks in the same region, but also across regions and subscriptions.</span></span> <span data-ttu-id="092e3-348">对于公用解析，Azure DNS 提供 DNS 域的托管服务，它使用 Microsoft Azure 基础结构提供名称解析。</span><span class="sxs-lookup"><span data-stu-id="092e3-348">For public resolution, Azure DNS provides a hosting service for DNS domains, providing name resolution using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="092e3-349">通过在 Azure 中托管域，可以使用与其他 Azure 服务相同的凭据、API、工具和计费来管理 DNS 记录。</span><span class="sxs-lookup"><span data-stu-id="092e3-349">By hosting your domains in Azure, you can manage your DNS records using the same credentials, APIs, tools, and billing as your other Azure services.</span></span>
-   <span data-ttu-id="092e3-350">[**订阅**][SubMgmt]和[**资源组管理**][RGMgmt]。</span><span class="sxs-lookup"><span data-stu-id="092e3-350">[**Subscription**][SubMgmt] and [**Resource Group Management**][RGMgmt].</span></span> <span data-ttu-id="092e3-351">订阅定义在 Azure 创建多个资源组的自然边界。</span><span class="sxs-lookup"><span data-stu-id="092e3-351">A subscription defines a natural boundary to create multiple groups of resources in Azure.</span></span> <span data-ttu-id="092e3-352">订阅中的资源聚集在名为资源组的逻辑容器中。</span><span class="sxs-lookup"><span data-stu-id="092e3-352">Resources in a subscription are assembled together in logical containers named Resource Groups.</span></span> <span data-ttu-id="092e3-353">资源组表示组织 VDC 实现资源的逻辑组。</span><span class="sxs-lookup"><span data-stu-id="092e3-353">The Resource Group represents a logical group to organize the resources of a VDC implementation.</span></span>
-   <span data-ttu-id="092e3-354">[**RBAC**][RBAC]。</span><span class="sxs-lookup"><span data-stu-id="092e3-354">[**RBAC**][RBAC].</span></span> <span data-ttu-id="092e3-355">通过 RBAC，可以映射组织角色以及访问特定 Azure 资源的权限，允许限制用户只进行特定子网操作。</span><span class="sxs-lookup"><span data-stu-id="092e3-355">Through RBAC, it is possible to map organizational role along with rights to access specific Azure resources, allowing you to restrict users to only a certain subset of actions.</span></span> <span data-ttu-id="092e3-356">使用 RBAC，可以通过将相应的角色分配给相关范围内的用户、组和应用程序授予访问权限。</span><span class="sxs-lookup"><span data-stu-id="092e3-356">With RBAC, you can grant access by assigning the appropriate role to users, groups, and applications within the relevant scope.</span></span> <span data-ttu-id="092e3-357">角色分配的范围可以是 Azure 订阅、资源组或单个资源。</span><span class="sxs-lookup"><span data-stu-id="092e3-357">The scope of a role assignment can be an Azure subscription, a resource group, or a single resource.</span></span> <span data-ttu-id="092e3-358">RBAC 允许继承权限。</span><span class="sxs-lookup"><span data-stu-id="092e3-358">RBAC allows inheritance of permissions.</span></span> <span data-ttu-id="092e3-359">分配在父范围内的角色也会将访问权限授予给其中所含的子范围。</span><span class="sxs-lookup"><span data-stu-id="092e3-359">A role assigned at a parent scope also grants access to the children contained within it.</span></span> <span data-ttu-id="092e3-360">使用 RBAC，可以对职责进行分配，仅向用户授予执行作业所需的访问权限。</span><span class="sxs-lookup"><span data-stu-id="092e3-360">Using RBAC, you can segregate duties and grant only the amount of access to users that they need to perform their jobs.</span></span> <span data-ttu-id="092e3-361">例如，使用 RBAC 允许一个员工管理订阅中的虚拟机，而允许另一个员工管理同一订阅中的 SQL DB。</span><span class="sxs-lookup"><span data-stu-id="092e3-361">For example, use RBAC to let one employee manage virtual machines in a subscription, while another can manage SQL DBs within the same subscription.</span></span>
-   <span data-ttu-id="092e3-362">[**VNet 对等互连**][VNetPeering]。</span><span class="sxs-lookup"><span data-stu-id="092e3-362">[**VNet Peering**][VNetPeering].</span></span> <span data-ttu-id="092e3-363">用于创建 VDC 基础结构的基本功能是 VNet 对等互连，它是一种通过 Azure 数据中心网络或跨区域的 Azure 全球主干网络连接同一区域内两个虚拟网络 (VNet) 的机制。</span><span class="sxs-lookup"><span data-stu-id="092e3-363">The fundamental feature used to create the infrastructure of the VDC is VNet Peering, a mechanism that connects two virtual networks (VNets) in the same region through the Azure datacenter network, or using the Azure world-wide backbone across regions.</span></span>

#### <a name="component-type-perimeter-networks"></a><span data-ttu-id="092e3-364">组件类型：外围网络</span><span class="sxs-lookup"><span data-stu-id="092e3-364">Component Type: Perimeter Networks</span></span>

<span data-ttu-id="092e3-365">使用[外围网络][DMZ]组件可以在本地的或实际的数据中心网络之间建立网络连接，以及与 Internet 建立连接。</span><span class="sxs-lookup"><span data-stu-id="092e3-365">[Perimeter network][DMZ] components enable network connectivity between your on-premises or physical datacenter networks, along with any connectivity to and from the Internet.</span></span> <span data-ttu-id="092e3-366">它也是网络和安全团队花费大部分时间的地方。</span><span class="sxs-lookup"><span data-stu-id="092e3-366">It's also where your network and security teams likely spend most of their time.</span></span>

<span data-ttu-id="092e3-367">传入数据包应该在流经中心的安全设备之后才到达辐射中的后端服务器。</span><span class="sxs-lookup"><span data-stu-id="092e3-367">Incoming packets should flow through the security appliances in the hub before reaching the back-end servers in the spokes.</span></span> <span data-ttu-id="092e3-368">示例包括防火墙、IDS 和 IPS。</span><span class="sxs-lookup"><span data-stu-id="092e3-368">Examples are the firewall, IDS, and IPS.</span></span> <span data-ttu-id="092e3-369">来自工作负荷的 Internet 绑定数据包在离开网络之前，也应流经外围网络中的安全设备。</span><span class="sxs-lookup"><span data-stu-id="092e3-369">Before they leave the network, internet-bound packets from the workloads should also flow through the security appliances in the perimeter network.</span></span> <span data-ttu-id="092e3-370">这种流动方式的目的是执行策略实施、检查和审核。</span><span class="sxs-lookup"><span data-stu-id="092e3-370">The purposes of this flow are policy enforcement, inspection, and auditing.</span></span>

<span data-ttu-id="092e3-371">外围网络组件提供以下功能：</span><span class="sxs-lookup"><span data-stu-id="092e3-371">Perimeter network components provide the following features:</span></span>

-   <span data-ttu-id="092e3-372">[虚拟网络][VNet]、[UDR][UDR] 和 [NSG][NSG]</span><span class="sxs-lookup"><span data-stu-id="092e3-372">[Virtual networks][VNet], [UDRs][UDR], and [NSGs][NSG]</span></span>
-   <span data-ttu-id="092e3-373">[网络虚拟设备][NVA]</span><span class="sxs-lookup"><span data-stu-id="092e3-373">[Network virtual appliances][NVA]</span></span>
-   <span data-ttu-id="092e3-374">[Azure 负载均衡器][ALB]</span><span class="sxs-lookup"><span data-stu-id="092e3-374">[Azure Load Balancer][ALB]</span></span>
-   <span data-ttu-id="092e3-375">[Azure 应用程序网关][AppGW]和 [Web 应用程序防火墙 (WAF)][WAF]</span><span class="sxs-lookup"><span data-stu-id="092e3-375">[Azure Application Gateway][AppGW] and [web application firewall (WAF)][WAF]</span></span>
-   <span data-ttu-id="092e3-376">[公共 IP][PIP]</span><span class="sxs-lookup"><span data-stu-id="092e3-376">[Public IPs][PIP]</span></span>
-   <span data-ttu-id="092e3-377">[Azure Front Door][AFD]</span><span class="sxs-lookup"><span data-stu-id="092e3-377">[Azure Front Door][AFD]</span></span>
-   <span data-ttu-id="092e3-378">[Azure 防火墙][AzFW]</span><span class="sxs-lookup"><span data-stu-id="092e3-378">[Azure Firewall][AzFW]</span></span>

<span data-ttu-id="092e3-379">通常，中心 IT 和安全团队负责外围网络的需求定义和操作。</span><span class="sxs-lookup"><span data-stu-id="092e3-379">Usually, the central IT and security teams have responsibility for requirement definition and operation of the perimeter networks.</span></span>

<span data-ttu-id="092e3-380">[![7]][7]</span><span class="sxs-lookup"><span data-stu-id="092e3-380">[![7]][7]</span></span>

<span data-ttu-id="092e3-381">上图显示了如何实施可以访问 Internet 和本地网络（两者都位于外围网络和 vWAN 中心）的两个外围。</span><span class="sxs-lookup"><span data-stu-id="092e3-381">The preceding diagram shows the enforcement of two perimeters with access to the internet and an on-premises network, both resident in the DMZ and vWAN hubs.</span></span> <span data-ttu-id="092e3-382">在外围网络中心，可以使用 Web 应用程序防火墙 (WAF) 和/或 Azure 防火墙的多个场来扩展连接到 Internet 的外围网络，以支持大量的 LOB。</span><span class="sxs-lookup"><span data-stu-id="092e3-382">In the DMZ hub, the perimeter network to internet can scale up to support large numbers of LOBs, using multiple farms of Web Application Firewalls (WAFs) and/or Azure Firewalls.</span></span> <span data-ttu-id="092e3-383">在 vWAN 中心，可以根据需要通过 VPN 或 ExpressRoute 来实现高度可缩放的分支到分支连接和分支到 Azure 连接。</span><span class="sxs-lookup"><span data-stu-id="092e3-383">In the vWAN hub, highly scalable branch to branch and branch to Azure connectivity is accomplished via VPN or ExpressRoute as needed.</span></span>

<span data-ttu-id="092e3-384">[**虚拟网络**][VNet]。</span><span class="sxs-lookup"><span data-stu-id="092e3-384">[**Virtual networks**][VNet].</span></span> <span data-ttu-id="092e3-385">通常基于虚拟网络构建中心，该虚拟网络提供多个子网用于托管不同类型的服务，并通过 NVA、WAF 和 Azure 应用程序网关实例筛选和检查流入或流出 Internet 的流量。</span><span class="sxs-lookup"><span data-stu-id="092e3-385">The hub is typically built on a virtual network with multiple subnets to host the different types of services that filter and inspect traffic to or from the internet via NVAs, WAF, and Azure Application Gateway instances.</span></span>

<span data-ttu-id="092e3-386">[**UDR**][UDR] 客户可以使用 UDR 部署防火墙、IDS/IPS 和其他虚拟设备，并通过这些安全设备路由网络流量，以实施、审核和检查安全边界策略。</span><span class="sxs-lookup"><span data-stu-id="092e3-386">[**UDR**][UDR] Using UDRs, customers can deploy firewalls, IDS/IPS, and other virtual appliances, and route network traffic through these security appliances for security boundary policy enforcement, auditing, and inspection.</span></span> <span data-ttu-id="092e3-387">可以同时在中心和分支中创建 UDR，保证流量通过 VDC 实现使用的特定自定义 VM、网络虚拟设备和负载均衡器传输。</span><span class="sxs-lookup"><span data-stu-id="092e3-387">UDRs can be created in both the hub and the spokes to guarantee that traffic transits through the specific custom VMs, Network Virtual Appliances, and load balancers used by a VDC implementation.</span></span> <span data-ttu-id="092e3-388">若要保证由辐射中的 VM 生成的流量传输到正确的虚拟设备，需要通过将内部负载均衡器的前端 IP 地址设置为下一个跃点在辐射的子网中设置 UDR。</span><span class="sxs-lookup"><span data-stu-id="092e3-388">To guarantee that traffic generated from VMs resident in the spoke transit to the correct virtual appliances, a UDR needs to be set in the subnets of the spoke by setting the front-end IP address of the internal load balancer as the next-hop.</span></span> <span data-ttu-id="092e3-389">内部负载均衡器将内部流量分配到虚拟设备（负载均衡器后端池）。</span><span class="sxs-lookup"><span data-stu-id="092e3-389">The internal load balancer distributes the internal traffic to the virtual appliances (load balancer back-end pool).</span></span>

<span data-ttu-id="092e3-390">[**Azure 防火墙**][AzFW]是托管的基于云的网络安全服务，可保护 Azure 虚拟网络资源。</span><span class="sxs-lookup"><span data-stu-id="092e3-390">[**Azure Firewall**][AzFW] is a managed, cloud-based network security service that protects your Azure Virtual Network resources.</span></span> <span data-ttu-id="092e3-391">它是一个服务形式的完全有状态防火墙，具有内置的高可用性和不受限制的云可伸缩性。</span><span class="sxs-lookup"><span data-stu-id="092e3-391">It's a fully stateful firewall as a service with built-in high availability and unrestricted cloud scalability.</span></span> <span data-ttu-id="092e3-392">可以跨订阅和虚拟网络集中创建、实施和记录应用程序与网络连接策略。</span><span class="sxs-lookup"><span data-stu-id="092e3-392">You can centrally create, enforce, and log application and network connectivity policies across subscriptions and virtual networks.</span></span> <span data-ttu-id="092e3-393">Azure 防火墙对虚拟网络资源使用静态公共 IP 地址。</span><span class="sxs-lookup"><span data-stu-id="092e3-393">Azure Firewall uses a static public IP address for your virtual network resources.</span></span> <span data-ttu-id="092e3-394">它允许外部防火墙识别源自虚拟网络的流量。</span><span class="sxs-lookup"><span data-stu-id="092e3-394">It allows outside firewalls to identify traffic that originates from your virtual network.</span></span> <span data-ttu-id="092e3-395">该服务与用于日志记录和分析的 Azure Monitor 完全集成。</span><span class="sxs-lookup"><span data-stu-id="092e3-395">The service is fully integrated with Azure Monitor for logging and analytics.</span></span>

<span data-ttu-id="092e3-396">[**网络虚拟设备**][NVA]。</span><span class="sxs-lookup"><span data-stu-id="092e3-396">[**Network virtual appliances**][NVA].</span></span> <span data-ttu-id="092e3-397">在中心内，可访问 Internet 的外围网络通常是通过 Azure 防火墙实例或防火墙或 Web 应用程序防火墙 (WAF) 的场管理的。</span><span class="sxs-lookup"><span data-stu-id="092e3-397">In the hub, the perimeter network with access to the internet is normally managed through an Azure Firewall instance or a farm of firewalls or web application firewall (WAF).</span></span>

<span data-ttu-id="092e3-398">不同的 LOB 通常使用许多 Web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="092e3-398">Different LOBs commonly use many web applications.</span></span> <span data-ttu-id="092e3-399">这些应用程序容易出现各种漏洞和遭受潜在攻击。</span><span class="sxs-lookup"><span data-stu-id="092e3-399">These applications tend to suffer from various vulnerabilities and potential exploits.</span></span> <span data-ttu-id="092e3-400">Web 应用程序防火墙是一种特殊产品，相较通用防火墙而言，它能够更深入的检测对 Web 应用程序 (HTTP/HTTPS) 的攻击。</span><span class="sxs-lookup"><span data-stu-id="092e3-400">Web application firewalls are a special type of product used to detect attacks against web applications, HTTP/HTTPS, in more depth than a generic firewall.</span></span> <span data-ttu-id="092e3-401">与传统防火墙技术相比，WAF 拥有一组用于保护内部 Web 服务器免受威胁的特定功能。</span><span class="sxs-lookup"><span data-stu-id="092e3-401">Compared with tradition firewall technology, WAFs have a set of specific features to protect internal web servers from threats.</span></span>

<span data-ttu-id="092e3-402">Azure 防火墙或 NVA 防火墙使用通用的管理平面，提供一组安全规则来保护分支中托管的工作负荷，并控制对本地网络的访问。</span><span class="sxs-lookup"><span data-stu-id="092e3-402">An Azure Firewall or NVA firewall both use a common administration plane, with a set of security rules to protect the workloads hosted in the spokes, and control access to on-premises networks.</span></span> <span data-ttu-id="092e3-403">Azure 防火墙内置了可伸缩性，对于 NVA 防火墙，可在负载均衡器后面手动进行缩放。</span><span class="sxs-lookup"><span data-stu-id="092e3-403">The Azure Firewall has scalability built in, whereas NVA firewalls can be manually scaled behind a load balancer.</span></span> <span data-ttu-id="092e3-404">一般而言，与 WAF 相比，防火墙场的专用软件更少，但应用范围广泛，可以筛选和检查出口和入口的任何流量类型。</span><span class="sxs-lookup"><span data-stu-id="092e3-404">Generally, a firewall farm has less specialized software compared with a WAF, but has a broader application scope to filter and inspect any type of traffic in egress and ingress.</span></span> <span data-ttu-id="092e3-405">如果使用 NVA 方法，可以在 Azure 市场中查找和部署相关软件。</span><span class="sxs-lookup"><span data-stu-id="092e3-405">If an NVA approach is used, they can be found and deployed from the Azure marketplace.</span></span>

<span data-ttu-id="092e3-406">请对源自 Internet 的流量使用一组 Azure 防火墙（或 NVA），对源自本地的流量使用另一组 Azure 防火墙。</span><span class="sxs-lookup"><span data-stu-id="092e3-406">Use one set of Azure Firewalls (or NVAs) for traffic originating on the Internet, and another for traffic originating on-premises.</span></span> <span data-ttu-id="092e3-407">对两组网络流量使用一组防火墙会导致安全风险，因为它无法在两组网络流量之间提供安全外围。</span><span class="sxs-lookup"><span data-stu-id="092e3-407">Using only one set of firewalls for both is a security risk, as it provides no security perimeter between the two sets of network traffic.</span></span> <span data-ttu-id="092e3-408">使用不同防火墙层可以降低检查安全规则的复杂性，并指明哪项规则与哪项传入网络请求对应。</span><span class="sxs-lookup"><span data-stu-id="092e3-408">Using separate firewall layers reduces the complexity of checking security rules, and makes it clear which rules correspond to which incoming network request.</span></span>

<span data-ttu-id="092e3-409">我们建议对源自 Internet 的流量使用一组 Azure 防火墙实例或 NVA。</span><span class="sxs-lookup"><span data-stu-id="092e3-409">We recommend that you use one set of Azure Firewall instances, or NVAs, for traffic originating on the internet.</span></span> <span data-ttu-id="092e3-410">对源自本地的流量使用另一组 Azure 防火墙或 NVA。</span><span class="sxs-lookup"><span data-stu-id="092e3-410">Use another for traffic originating on-premises.</span></span> <span data-ttu-id="092e3-411">仅对两组网络流量使用一组防火墙会存在安全风险，因为它不会在两组网络流量之间提供安全外围。</span><span class="sxs-lookup"><span data-stu-id="092e3-411">Using only one set of firewalls for both is a security risk as it provides no security perimeter between the two sets of network traffic.</span></span> <span data-ttu-id="092e3-412">使用不同防火墙层可以降低检查安全规则的复杂性，并指明哪项规则与哪项传入网络请求对应。</span><span class="sxs-lookup"><span data-stu-id="092e3-412">Using separate firewall layers reduces the complexity of checking security rules and makes it clear which rules correspond to which incoming network request.</span></span>

<span data-ttu-id="092e3-413">[**Azure 负载均衡器**][ALB]提供高度可用的第 4 层（TCP 和 UDP）服务，该服务可以在负载均衡集定义的服务实例间分配传入流量。</span><span class="sxs-lookup"><span data-stu-id="092e3-413">[**Azure Load Balancer**][ALB] offers a high availability Layer 4 (TCP, UDP) service, which can distribute incoming traffic among service instances defined in a load-balanced set.</span></span> <span data-ttu-id="092e3-414">可以将由前端终结点（公共 IP 终结点或专用 IP 终结点）发送到负载均衡器的流量重新分配（通过/不通过地址转换）到一组后端 IP 地址池（如网络虚拟设备或 VM）。</span><span class="sxs-lookup"><span data-stu-id="092e3-414">Traffic sent to the load balancer from front-end endpoints (public IP endpoints or private IP endpoints) can be redistributed with or without address translation to a set of back-end IP address pool (examples being; Network Virtual Appliances or VMs).</span></span>

<span data-ttu-id="092e3-415">Azure 负载均衡器也可以探测各种服务器实例的运行状态，当探测无法响应时，负载均衡器会停止向不正常的实例发送流量。</span><span class="sxs-lookup"><span data-stu-id="092e3-415">Azure Load Balancer can probe the health of the various server instances as well, and when a probe fails to respond the load balancer stops sending traffic to the unhealthy instance.</span></span> <span data-ttu-id="092e3-416">在 VDC 中，外部负载均衡器部署到中心和分支。</span><span class="sxs-lookup"><span data-stu-id="092e3-416">In the VDC, an external load balancer is deployed to the hub and the spokes.</span></span> <span data-ttu-id="092e3-417">中心的负载均衡器用于将流量高效地路由到分支中的服务，而分支的负载均衡器则用于管理应用程序流量。</span><span class="sxs-lookup"><span data-stu-id="092e3-417">In the hub, the load balancer is used to efficiently route traffic to services in the spokes, and in the spokes, load balancers are used to manage application traffic.</span></span>

<span data-ttu-id="092e3-418">[**Azure Front Door**][AFD] (AFD) 是 Microsoft 提供的高度可用且可缩放的 Web 应用程序加速平台、全局 HTTP 负载均衡器、应用程序防护和内容分发网络。</span><span class="sxs-lookup"><span data-stu-id="092e3-418">[**Azure Front Door**][AFD] (AFD) is Microsoft's highly available and scalable Web Application Acceleration Platform, Global HTTP Load Balancer, Application Protection, and Content Delivery Network.</span></span> <span data-ttu-id="092e3-419">AFD 在 Microsoft 全球网络边缘中的 100 多个位置运行，可用于生成、运行和横向扩展动态 Web 应用程序和静态内容。</span><span class="sxs-lookup"><span data-stu-id="092e3-419">Running in more than 100 locations at the Edge of Microsoft's Global Network, AFD enables you to build, operate, and scale out your dynamic web application and static content.</span></span> <span data-ttu-id="092e3-420">AFD 为应用程序提供一流的最终用户性能、统一的区域/戳维护自动化、BCDR 自动化、统一的客户端/用户信息、缓存和服务见解。</span><span class="sxs-lookup"><span data-stu-id="092e3-420">AFD provides your application with world-class end-user performance, unified regional/stamp maintenance automation, BCDR automation, unified client/user information, caching, and service insights.</span></span> <span data-ttu-id="092e3-421">该平台提供性能、可靠性和支持方面的 SLA、符合性认证，以及由 Azure 原生制定、运行和支持的可审核安全做法。</span><span class="sxs-lookup"><span data-stu-id="092e3-421">The platform offers performance, reliability and support SLAs, compliance certifications and auditable security practices developed, operated, and supported natively by Azure.</span></span>

<span data-ttu-id="092e3-422">[**应用程序网关**][AppGW] Microsoft Azure 应用程序网关是一个专用的虚拟设备，以服务形式提供应用程序传送控制器 (ADC)，并为应用程序提供各种 7 层负载均衡功能。</span><span class="sxs-lookup"><span data-stu-id="092e3-422">[**Application Gateway**][AppGW] Microsoft Azure Application Gateway is a dedicated virtual appliance providing application delivery controller (ADC) as a service, offering various layer 7 load-balancing capabilities for your application.</span></span> <span data-ttu-id="092e3-423">可以用它将 CPU 密集型 SSL 终点卸载到应用程序网关，优化 Web 场工作效率。</span><span class="sxs-lookup"><span data-stu-id="092e3-423">It allows you to optimize web farm productivity by offloading CPU intensive SSL termination to the application gateway.</span></span> <span data-ttu-id="092e3-424">它还提供其他第 7 层路由功能，包括传入流量的轮循机制分配、基于 Cookie 的会话相关性、基于 URL 路径的路由，以及在单个应用程序网关后面托管多个网站的能力。</span><span class="sxs-lookup"><span data-stu-id="092e3-424">It also provides other layer 7 routing capabilities including round robin distribution of incoming traffic, cookie-based session affinity, URL path-based routing, and the ability to host multiple websites behind a single Application Gateway.</span></span> <span data-ttu-id="092e3-425">Web 应用程序防火墙 (WAF) 也作为 WAF SKU 应用程序网关的一部分提供。</span><span class="sxs-lookup"><span data-stu-id="092e3-425">A web application firewall (WAF) is also provided as part of the application gateway WAF SKU.</span></span> <span data-ttu-id="092e3-426">此 SKU 可保护 Web 应用程序免受 Web 常见漏洞和攻击的影响。</span><span class="sxs-lookup"><span data-stu-id="092e3-426">This SKU provides protection to web applications from common web vulnerabilities and exploits.</span></span> <span data-ttu-id="092e3-427">可以将应用程序网关配置为面向 Internet 的网关、仅内部网关或这两者的组合。</span><span class="sxs-lookup"><span data-stu-id="092e3-427">Application Gateway can be configured as internet facing gateway, internal only gateway, or a combination of both.</span></span> 

<span data-ttu-id="092e3-428">[**应用程序网关**][AppGW]是一个专用的虚拟设备，以服务形式提供应用程序传送控制器 (ADC)，为应用程序提供各种第 7 层负载均衡功能。</span><span class="sxs-lookup"><span data-stu-id="092e3-428">[**Application Gateway**][AppGW] is a dedicated virtual appliance that provides application delivery controller (ADC) as a service, offering various layer 7 load-balancing capabilities for your application.</span></span> <span data-ttu-id="092e3-429">可将 CPU 密集型 SSL 终点卸载到应用程序网关实例，优化 Web 场工作效率。</span><span class="sxs-lookup"><span data-stu-id="092e3-429">You can optimize web farm productivity by offloading CPU-intensive SSL termination to the Application Gateway instance.</span></span> <span data-ttu-id="092e3-430">它还提供其他第 7 层路由功能，示例包括：</span><span class="sxs-lookup"><span data-stu-id="092e3-430">It also provides other layer 7 routing capabilities that include the following examples:</span></span> 
* <span data-ttu-id="092e3-431">传入流量的轮循机制分配。</span><span class="sxs-lookup"><span data-stu-id="092e3-431">Round robin distribution of incoming traffic.</span></span> 
* <span data-ttu-id="092e3-432">基于 Cookie 的会话关联。</span><span class="sxs-lookup"><span data-stu-id="092e3-432">Cookie-based session affinity.</span></span> 
* <span data-ttu-id="092e3-433">基于 URL 路径的路由。</span><span class="sxs-lookup"><span data-stu-id="092e3-433">URL path-based routing.</span></span> 
* <span data-ttu-id="092e3-434">能够在单个应用程序网关实例后面托管多个网站</span><span class="sxs-lookup"><span data-stu-id="092e3-434">The ability to host multiple websites behind a single Application Gateway instance.</span></span> <span data-ttu-id="092e3-435">Web 应用程序防火墙 (WAF) 也作为应用程序网关 WAF SKU 的一部分提供。</span><span class="sxs-lookup"><span data-stu-id="092e3-435">Web application firewall (WAF) is also provided as part of the Application Gateway WAF SKU.</span></span> <span data-ttu-id="092e3-436">此 SKU 可保护 Web 应用程序免受 Web 常见漏洞和攻击的影响。</span><span class="sxs-lookup"><span data-stu-id="092e3-436">This SKU provides protection to web applications from common web vulnerabilities and exploits.</span></span> <span data-ttu-id="092e3-437">可将应用程序网关配置为面向 Internet 的网关、仅限内部访问的网关或二者合一的网关。</span><span class="sxs-lookup"><span data-stu-id="092e3-437">Application Gateway can be configured as an internet-facing gateway, an internal-only gateway, or a combination of both.</span></span> 

<span data-ttu-id="092e3-438">[**公共 IP**][PIP]。</span><span class="sxs-lookup"><span data-stu-id="092e3-438">[**Public IPs**][PIP].</span></span> <span data-ttu-id="092e3-439">使用某些 Azure 功能，可将服务终结点关联到某个公共 IP 地址，以便可以从 Internet 访问资源。</span><span class="sxs-lookup"><span data-stu-id="092e3-439">With some Azure features, you can associate service endpoints to a public IP address, so that your resource can be accessed from the internet.</span></span> <span data-ttu-id="092e3-440">该终结点使用网络地址转换 (NAT) 将流量路由到 Azure 虚拟网络上的内部地址和端口。</span><span class="sxs-lookup"><span data-stu-id="092e3-440">This endpoint uses network address translation (NAT) to route traffic to the internal address and port on the Azure virtual network.</span></span> <span data-ttu-id="092e3-441">此路径是外部流量进入虚拟网络的主要方式。</span><span class="sxs-lookup"><span data-stu-id="092e3-441">This path is the primary way for external traffic to pass into the virtual network.</span></span> <span data-ttu-id="092e3-442">可以配置公共 IP 地址，以确定可以传入哪种流量、如何在虚拟网络上转换该流量以及要将它路由到何处。</span><span class="sxs-lookup"><span data-stu-id="092e3-442">You can configure public IP addresses to determine which traffic is passed in and how and where it's translated onto the virtual network.</span></span>

<span data-ttu-id="092e3-443">[**Azure DDoS 防护标准版**][DDOS]在[基本服务][DDOS]层的基础上，提供了专门针对 Azure 虚拟网络资源优化的更多风险缓解功能。</span><span class="sxs-lookup"><span data-stu-id="092e3-443">[**Azure DDoS Protection Standard**][DDOS] provides additional mitigation capabilities over the [Basic service][DDOS] tier that are tuned specifically to Azure Virtual Network resources.</span></span> <span data-ttu-id="092e3-444">DDoS 保护标准易于启用，无需更改应用程序。</span><span class="sxs-lookup"><span data-stu-id="092e3-444">DDoS Protection Standard is simple to enable and requires no application changes.</span></span> <span data-ttu-id="092e3-445">通过专用流量监控和机器学习算法优化保护策略。</span><span class="sxs-lookup"><span data-stu-id="092e3-445">Protection policies are tuned through dedicated traffic monitoring and machine learning algorithms.</span></span> <span data-ttu-id="092e3-446">策略应用到与虚拟网络中部署的资源关联的公共 IP 地址。</span><span class="sxs-lookup"><span data-stu-id="092e3-446">Policies are applied to public IP addresses associated to resources deployed in virtual networks.</span></span> <span data-ttu-id="092e3-447">示例包括 Azure 负载均衡器、Azure 应用程序网关和 Azure Service Fabric 实例。</span><span class="sxs-lookup"><span data-stu-id="092e3-447">Examples are Azure Load Balancer, Azure Application Gateway, and Azure Service Fabric instances.</span></span> <span data-ttu-id="092e3-448">可在攻击期间通过 Azure Monitor 视图并针对历史记录获得实时遥测。</span><span class="sxs-lookup"><span data-stu-id="092e3-448">Real-time telemetry is available through Azure Monitor views during an attack and for history.</span></span> <span data-ttu-id="092e3-449">可通过 Azure 应用程序网关 Web 应用程序防火墙来添加应用程序层保护。</span><span class="sxs-lookup"><span data-stu-id="092e3-449">Application layer protection can be added through the Azure Application Gateway web application firewall.</span></span> <span data-ttu-id="092e3-450">为 IPv4 Azure 公共 IP 地址提供保护。</span><span class="sxs-lookup"><span data-stu-id="092e3-450">Protection is provided for IPv4 Azure public IP addresses.</span></span>

#### <a name="component-type-monitoring"></a><span data-ttu-id="092e3-451">组件类型：监视</span><span class="sxs-lookup"><span data-stu-id="092e3-451">Component type: Monitoring</span></span>

<span data-ttu-id="092e3-452">监视组件可以监视所有其他组件类型并报警。</span><span class="sxs-lookup"><span data-stu-id="092e3-452">Monitoring components provide visibility and alerting from all the other components types.</span></span> <span data-ttu-id="092e3-453">所有团队都应有权监视他们有权访问的组件和服务。</span><span class="sxs-lookup"><span data-stu-id="092e3-453">All teams should have access to monitoring for the components and services they have access to.</span></span> <span data-ttu-id="092e3-454">如果你拥有中心化支持人员或操作团队，他们需要对这些组件提供的数据进行集成访问。</span><span class="sxs-lookup"><span data-stu-id="092e3-454">If you have a centralized help desk or operations teams, they require integrated access to the data provided by these components.</span></span>

<span data-ttu-id="092e3-455">Azure 提供不同类型的记录和监视服务，跟踪 Azure 托管资源的行为。</span><span class="sxs-lookup"><span data-stu-id="092e3-455">Azure offers different types of logging and monitoring services to track the behavior of Azure-hosted resources.</span></span> <span data-ttu-id="092e3-456">对 Azure 中工作负荷的治理和控制不仅只基于收集日志数据，也基于根据特定报告事件触发操作的能力。</span><span class="sxs-lookup"><span data-stu-id="092e3-456">Governance and control of workloads in Azure is based not just on collecting log data but also on the ability to trigger actions based on specific reported events.</span></span>

<span data-ttu-id="092e3-457">[**Azure Monitor**][Monitor]。</span><span class="sxs-lookup"><span data-stu-id="092e3-457">[**Azure Monitor**][Monitor].</span></span> <span data-ttu-id="092e3-458">Azure 包括多项可以在监视空间单独执行特定角色或任务的服务。</span><span class="sxs-lookup"><span data-stu-id="092e3-458">Azure includes multiple services that individually perform a specific role or task in the monitoring space.</span></span> <span data-ttu-id="092e3-459">这些服务组合在一起就可以提供一个全面的解决方案，用于从应用程序以及支持应用程序的 Azure 资源收集遥测数据，对这些数据进行分析并执行操作。</span><span class="sxs-lookup"><span data-stu-id="092e3-459">Together, these services deliver a comprehensive solution for collecting, analyzing, and acting on telemetry from your application and the Azure resources that support them.</span></span> <span data-ttu-id="092e3-460">这些服务还监视关键的本地资源，以提供混合监视环境。</span><span class="sxs-lookup"><span data-stu-id="092e3-460">They can also work to monitor critical on-premises resources in order to provide a hybrid monitoring environment.</span></span> <span data-ttu-id="092e3-461">为应用程序开发完整监视策略的第一步是了解可用的工具和数据。</span><span class="sxs-lookup"><span data-stu-id="092e3-461">Understanding the tools and data that are available is the first step in developing a complete monitoring strategy for your application.</span></span>

<span data-ttu-id="092e3-462">Azure 中主要有两种日志类型：</span><span class="sxs-lookup"><span data-stu-id="092e3-462">There are two major types of logs in Azure:</span></span>

-   <span data-ttu-id="092e3-463">[Azure 活动日志][ActLog]（前称为“运行日志”）提供相关信息，方便用户了解对 Azure 订阅中的资源执行的操作。</span><span class="sxs-lookup"><span data-stu-id="092e3-463">The [Azure Activity Log][ActLog], previously called **Operational Logs**, provides insight into the operations that were performed on resources in the Azure subscription.</span></span> <span data-ttu-id="092e3-464">这些日志报告订阅的控制平面事件。</span><span class="sxs-lookup"><span data-stu-id="092e3-464">These logs report the control-plane events for your subscriptions.</span></span> <span data-ttu-id="092e3-465">每个 Azure 资源都会生成审核日志。</span><span class="sxs-lookup"><span data-stu-id="092e3-465">Every Azure resource produces audit logs.</span></span>

-   <span data-ttu-id="092e3-466">[Azure Monitor 诊断日志][DiagLog]是资源生成的日志，记录与该资源的操作相关的各种频繁生成的数据。</span><span class="sxs-lookup"><span data-stu-id="092e3-466">[Azure Monitor diagnostic logs][DiagLog] are logs generated by a resource that provides rich, frequent data about the operation of that resource.</span></span> <span data-ttu-id="092e3-467">这些日志的内容因资源类型而异。</span><span class="sxs-lookup"><span data-stu-id="092e3-467">The content of these logs varies by resource type.</span></span>

<span data-ttu-id="092e3-468">[![9]][9]</span><span class="sxs-lookup"><span data-stu-id="092e3-468">[![9]][9]</span></span>

<span data-ttu-id="092e3-469">跟踪 NSG 日志非常重要，尤其是以下信息：</span><span class="sxs-lookup"><span data-stu-id="092e3-469">It is important to track the NSGs logs, particularly this information:</span></span>

-   <span data-ttu-id="092e3-470">[事件日志][NSGLog]提供根据 MAC 地址向 VM 和实例角色应用的 NSG 规则的相关信息。</span><span class="sxs-lookup"><span data-stu-id="092e3-470">[Event logs][NSGLog] provide information on what NSG rules are applied to VMs and instance roles based on MAC address.</span></span>
-   <span data-ttu-id="092e3-471">[计数器日志][NSGLog]跟踪拒绝或允许流量的每个 NSG 规则的运行次数。</span><span class="sxs-lookup"><span data-stu-id="092e3-471">[Counter logs][NSGLog] track how many times each NSG rule was run to deny or allow traffic.</span></span>

<span data-ttu-id="092e3-472">所有日志都可以存储在 Azure 存储帐户中，以便进行审核、静态分析或备份。</span><span class="sxs-lookup"><span data-stu-id="092e3-472">All logs can be stored in Azure storage accounts for audit, static analysis, or backup purposes.</span></span> <span data-ttu-id="092e3-473">将日志存储在 Azure 存储帐户中时，客户可以对该数据使用不同类型的框架进行检索、准备、分析和可视化操作，以报告云资源的状态和运行状况。</span><span class="sxs-lookup"><span data-stu-id="092e3-473">When you store the logs in an Azure storage account, customers can use different types of frameworks to retrieve, prep, analyze, and visualize this data to report the status and health of cloud resources.</span></span> 

<span data-ttu-id="092e3-474">大型企业应已获取用于监视本地系统的标准框架。</span><span class="sxs-lookup"><span data-stu-id="092e3-474">Large enterprises should already have acquired a standard framework for monitoring on-premises systems.</span></span> <span data-ttu-id="092e3-475">它们可以扩展该框架以集成云部署生成的日志。</span><span class="sxs-lookup"><span data-stu-id="092e3-475">They can extend that framework to integrate logs generated by cloud deployments.</span></span> <span data-ttu-id="092e3-476">组织可以使用 [Azure Log Analytics](/azure/log-analytics/log-analytics-queries) 将所有日志记录保留在云中。</span><span class="sxs-lookup"><span data-stu-id="092e3-476">By using [Azure Log Analytics](/azure/log-analytics/log-analytics-queries), organizations can keep all the logging in the cloud.</span></span> <span data-ttu-id="092e3-477">Log Analytics 作为基于云的服务实现。</span><span class="sxs-lookup"><span data-stu-id="092e3-477">Log Analytics is implemented as a cloud-based service.</span></span> <span data-ttu-id="092e3-478">因此，对基础结构服务进行极少量的投资即可快速使其启动并运行。</span><span class="sxs-lookup"><span data-stu-id="092e3-478">So you have it up and running quickly with minimal investment in infrastructure services.</span></span> <span data-ttu-id="092e3-479">Log Analytics 还可与 System Center Operations Manager 等 System Center 组件集成，将现有管理投资扩展到云。</span><span class="sxs-lookup"><span data-stu-id="092e3-479">Log Analytics also integrate with System Center components like System Center Operations Manager to extend your existing management investments into the cloud.</span></span> 

<span data-ttu-id="092e3-480">Log Analytics 是 Azure 中的一个服务，可帮助收集、关联、搜索以及处理由操作系统、应用程序和基础结构云组件生成的日志和性能数据。</span><span class="sxs-lookup"><span data-stu-id="092e3-480">Log Analytics is a service in Azure that helps collect, correlate, search, and act on log and performance data generated by operating systems, applications, and infrastructure cloud components.</span></span> <span data-ttu-id="092e3-481">它使用集成搜索和自定义仪表板为客户提供实时操作见解，分析 VDC 实现中所有工作负荷的所有记录。</span><span class="sxs-lookup"><span data-stu-id="092e3-481">It gives customers real-time operational insights using integrated search and custom dashboards to analyze all the records across all your workloads in your VDC implementation.</span></span>

<span data-ttu-id="092e3-482">[Azure 网络观察程序][NetWatch]提供所需的工具用于监视、诊断 Azure 虚拟网络中的资源、查看其指标，以及为其启用或禁用日志。</span><span class="sxs-lookup"><span data-stu-id="092e3-482">[Azure Network Watcher][NetWatch] provides tools to monitor, diagnose, and view metrics and enable or disable logs for resources in an Azure virtual network.</span></span> <span data-ttu-id="092e3-483">它是一个多面性的服务，可以实现下述和其他功能：</span><span class="sxs-lookup"><span data-stu-id="092e3-483">It's a multifaceted service that allows the following functionalities and more:</span></span>
-    <span data-ttu-id="092e3-484">监视虚拟机与终结点之间的通信。</span><span class="sxs-lookup"><span data-stu-id="092e3-484">Monitor communication between a virtual machine and an endpoint.</span></span>
-    <span data-ttu-id="092e3-485">查看虚拟网络中的资源及其关系。</span><span class="sxs-lookup"><span data-stu-id="092e3-485">View resources in a virtual network and their relationships.</span></span>
-    <span data-ttu-id="092e3-486">诊断传入或传出 VM 的网络流量筛选问题。</span><span class="sxs-lookup"><span data-stu-id="092e3-486">Diagnose network traffic filtering problems to or from a VM.</span></span>
-    <span data-ttu-id="092e3-487">诊断 VM 的网络路由问题。</span><span class="sxs-lookup"><span data-stu-id="092e3-487">Diagnose network routing problems from a VM.</span></span>
-    <span data-ttu-id="092e3-488">诊断 VM 的出站连接。</span><span class="sxs-lookup"><span data-stu-id="092e3-488">Diagnose outbound connections from a VM.</span></span>
-    <span data-ttu-id="092e3-489">捕获传入和传出 VM 的数据包。</span><span class="sxs-lookup"><span data-stu-id="092e3-489">Capture packets to and from a VM.</span></span>
-    <span data-ttu-id="092e3-490">诊断 Azure 虚拟网络网关和连接的问题。</span><span class="sxs-lookup"><span data-stu-id="092e3-490">Diagnose problems with an Azure virtual network gateway and connections.</span></span>
-    <span data-ttu-id="092e3-491">确定 Azure 区域与 Internet 服务提供商之间的相对延迟。</span><span class="sxs-lookup"><span data-stu-id="092e3-491">Determine relative latencies between Azure regions and internet service providers.</span></span>
-    <span data-ttu-id="092e3-492">查看网络接口的安全规则。</span><span class="sxs-lookup"><span data-stu-id="092e3-492">View security rules for a network interface.</span></span>
-    <span data-ttu-id="092e3-493">查看网络指标。</span><span class="sxs-lookup"><span data-stu-id="092e3-493">View network metrics.</span></span>
-    <span data-ttu-id="092e3-494">分析传入或传出网络安全组的流量。</span><span class="sxs-lookup"><span data-stu-id="092e3-494">Analyze traffic to or from a network security group.</span></span>
-    <span data-ttu-id="092e3-495">查看网络资源的诊断日志。</span><span class="sxs-lookup"><span data-stu-id="092e3-495">View diagnostic logs for network resources.</span></span>

<span data-ttu-id="092e3-496">Operations Management Suite 中的[网络性能监视器][NPM]解决方案提供详细的端到端网络信息。</span><span class="sxs-lookup"><span data-stu-id="092e3-496">The [Network Performance Monitor][NPM] solution inside Operations Management Suite can provide detailed network information end to end.</span></span> <span data-ttu-id="092e3-497">此信息包括 Azure 网络和本地网络的单个视图。</span><span class="sxs-lookup"><span data-stu-id="092e3-497">This information includes a single view of your Azure networks and on-premises networks.</span></span> <span data-ttu-id="092e3-498">该解决方案为 ExpressRoute 和公共服务提供特定的监视器。</span><span class="sxs-lookup"><span data-stu-id="092e3-498">The solution has specific monitors for ExpressRoute and public services.</span></span>

#### <a name="component-type-workloads"></a><span data-ttu-id="092e3-499">组件类型：工作负荷</span><span class="sxs-lookup"><span data-stu-id="092e3-499">Component type: Workloads</span></span>

<span data-ttu-id="092e3-500">工作负荷组件是实际应用程序和服务所在的位置。</span><span class="sxs-lookup"><span data-stu-id="092e3-500">Workload components are where your actual applications and services reside.</span></span> <span data-ttu-id="092e3-501">它也是应用程序开发团队花费大部分时间的地方。</span><span class="sxs-lookup"><span data-stu-id="092e3-501">It's also where your application development teams spend most of their time.</span></span>

<span data-ttu-id="092e3-502">工作负荷的可能性是无限的。</span><span class="sxs-lookup"><span data-stu-id="092e3-502">The workload possibilities are endless.</span></span> <span data-ttu-id="092e3-503">以下是几种可能的工作负荷类型：</span><span class="sxs-lookup"><span data-stu-id="092e3-503">The following are just a few of the possible workload types:</span></span>

<span data-ttu-id="092e3-504">**内部 LOB 应用程序**：业务线应用程序是对企业的日常运营十分重要的计算机应用程序。</span><span class="sxs-lookup"><span data-stu-id="092e3-504">**Internal LOB Applications**: Line-of-business applications are computer applications critical to the ongoing operation of an enterprise.</span></span> <span data-ttu-id="092e3-505">LOB 应用程序具有以下常见特征：</span><span class="sxs-lookup"><span data-stu-id="092e3-505">LOB applications have some common characteristics:</span></span>

-   <span data-ttu-id="092e3-506">**交互性**。</span><span class="sxs-lookup"><span data-stu-id="092e3-506">**Interactive** by nature.</span></span> <span data-ttu-id="092e3-507">输入数据，然后返回结果或报告。</span><span class="sxs-lookup"><span data-stu-id="092e3-507">Data is entered, and results or reports are returned.</span></span>
-   <span data-ttu-id="092e3-508">**数据驱动** &mdash; 数据密集型应用程序，频繁访问数据库或其他存储。</span><span class="sxs-lookup"><span data-stu-id="092e3-508">**Data driven**&mdash;data intensive with frequent access to databases or other storage.</span></span>
-   <span data-ttu-id="092e3-509">**可集成** &mdash; 可与组织内外的其他系统集成。</span><span class="sxs-lookup"><span data-stu-id="092e3-509">**Integrated**&mdash;offer integration with other systems within or outside the organization.</span></span>

<span data-ttu-id="092e3-510">**面向客户的网站（面向 Internet 或内部）**：与 Internet 交互的大多数应用程序是网站。</span><span class="sxs-lookup"><span data-stu-id="092e3-510">**Customer facing web sites (Internet or Internal facing)**: Most applications that interact with the Internet are web sites.</span></span> <span data-ttu-id="092e3-511">Azure 提供在 IaaS VM 上或从 [Azure Web 应用][WebApps]站点 (PaaS) 运行网站的功能。</span><span class="sxs-lookup"><span data-stu-id="092e3-511">Azure offers the capability to run a web site on an IaaS VM or from an [Azure Web Apps][WebApps] site (PaaS).</span></span> <span data-ttu-id="092e3-512">Azure Web 应用支持与允许在分支网络区域中部署 Web 应用的 VNet 集成。</span><span class="sxs-lookup"><span data-stu-id="092e3-512">Azure Web Apps support integration with VNets that allow the deployment of the Web Apps in a spoke network zone.</span></span> <span data-ttu-id="092e3-513">面向内部的网站不需公开公共 Internet 终结点，因为可以从专用 VNet 通过不可经 Internet 路由的专用地址访问资源。</span><span class="sxs-lookup"><span data-stu-id="092e3-513">Internal facing web sites don't need to expose a public internet endpoint becuase the resources are accessible via private non-internet routable addresses from the private VNet.</span></span>

<span data-ttu-id="092e3-514">**大数据/分析**：当数据需要增加到较大的量时，数据库可能无法正常地纵向扩展。</span><span class="sxs-lookup"><span data-stu-id="092e3-514">**Big Data/Analytics**: When data needs to scale up to a large volume, databases may not scale up properly.</span></span> <span data-ttu-id="092e3-515">Hadoop 技术提供可在大量节点上并行运行所分配查询的系统。</span><span class="sxs-lookup"><span data-stu-id="092e3-515">Hadoop technology offers a system to run distributed queries in parallel on large number of nodes.</span></span> <span data-ttu-id="092e3-516">客户可以选择在 IaaS VM 或 PaaS ([HDInsight][HDI]) 中运行数据工作负荷。</span><span class="sxs-lookup"><span data-stu-id="092e3-516">Customers have the option to run data workloads in IaaS VMs or PaaS ([HDInsight][HDI]).</span></span> <span data-ttu-id="092e3-517">HDInsight 支持部署到基于位置的 VNet，可以部署到 VDC 分支中的群集。</span><span class="sxs-lookup"><span data-stu-id="092e3-517">HDInsight supports deploying into a location-based VNet, can be deployed to a cluster in a spoke of the VDC.</span></span>

<span data-ttu-id="092e3-518">**事件和消息传送**：[Azure 事件中心][EventHubs]是超大规模的遥测引入服务，可收集、传输和存储数百万的事件。</span><span class="sxs-lookup"><span data-stu-id="092e3-518">**Events and Messaging**: [Azure Event Hubs][EventHubs] is a hyper-scale telemetry ingestion service that collects, transforms, and stores millions of events.</span></span> <span data-ttu-id="092e3-519">作为分布式流式处理平台，它提供低延迟和可配置的保留时间，使用户可以将大量遥测数据引入到 Azure 中，并从多个应用程序中读取数据。</span><span class="sxs-lookup"><span data-stu-id="092e3-519">As a distributed streaming platform, it offers low latency and configurable time retention, enabling you to ingest massive amounts of telemetry into Azure and read that data from multiple applications.</span></span> <span data-ttu-id="092e3-520">通过事件中心，单个流可以同时支持实时管道和基于批处理的管道。</span><span class="sxs-lookup"><span data-stu-id="092e3-520">With Event Hubs, a single stream can support both real-time and batch-based pipelines.</span></span>

<span data-ttu-id="092e3-521">可以通过 [Azure 服务总线][ServiceBus]在应用程序与服务之间实施高度可靠的云消息传送服务。</span><span class="sxs-lookup"><span data-stu-id="092e3-521">You can implement a highly reliable cloud messaging service between applications and services through [Azure Service Bus][ServiceBus].</span></span> <span data-ttu-id="092e3-522">服务总线提供客户端与服务器之间的异步中转消息传送、结构化先进先出 (FIFO) 消息传送和发布/订阅功能。</span><span class="sxs-lookup"><span data-stu-id="092e3-522">It offers asynchronous brokered messaging between client and server, structured first-in-first-out (FIFO) messaging, and publish and subscribe capabilities.</span></span>

<span data-ttu-id="092e3-523">[![10]][10]</span><span class="sxs-lookup"><span data-stu-id="092e3-523">[![10]][10]</span></span>

### <a name="making-the-vdc-highly-available-multiple-vdcs"></a><span data-ttu-id="092e3-524">使 VDC 高度可用：多个 VDC</span><span class="sxs-lookup"><span data-stu-id="092e3-524">Making the VDC highly available: multiple VDCs</span></span>

<span data-ttu-id="092e3-525">到目前为止，本文一直在重点讲述如何设计单个 VDC，介绍形成复原能力的基本组件和体系结构。</span><span class="sxs-lookup"><span data-stu-id="092e3-525">So far, this article has focused on the design of a single VDC, describing the basic components and architecture that contribute to resiliency.</span></span> <span data-ttu-id="092e3-526">Azure 功能（如 Azure 负载均衡器、NVA、可用性集、规模集和其他机制）构成一个允许在生产服务中生成稳定 SLA 级别的系统。</span><span class="sxs-lookup"><span data-stu-id="092e3-526">Azure features such as Azure load balancer, NVAs, availability sets, scale sets, along with other mechanisms contribute to a system that enable you to build solid SLA levels into your production services.</span></span>

<span data-ttu-id="092e3-527">然而，由于单个 VDC 通常在单个区域中实现，因此易受到影响整个区域的重大故障的影响。</span><span class="sxs-lookup"><span data-stu-id="092e3-527">However, because a single VDC is typically implemented within a single region, it may be vulnerable to any major outage that affects that entire region.</span></span> <span data-ttu-id="092e3-528">对 SLA 级别要求高的客户必须将同一项目部署在不同区域的两个（或更多个）VDC 实现中，通过这种方式来保护服务。</span><span class="sxs-lookup"><span data-stu-id="092e3-528">Customers that require high SLAs must protect the services through deployments of the same project in two (or more) VDC implementations placed in different regions.</span></span>

<span data-ttu-id="092e3-529">除了 SLA 问题之外，以下几种常见情形也适合部署多个 VDC 实施方案：</span><span class="sxs-lookup"><span data-stu-id="092e3-529">In addition to SLA concerns, there are several common scenarios where deploying multiple VDC implementations makes sense:</span></span>

-   <span data-ttu-id="092e3-530">区域或全球影响力。</span><span class="sxs-lookup"><span data-stu-id="092e3-530">Regional or global presence.</span></span>
-   <span data-ttu-id="092e3-531">灾难恢复。</span><span class="sxs-lookup"><span data-stu-id="092e3-531">Disaster recovery.</span></span>
-   <span data-ttu-id="092e3-532">在数据中心之间转移流量的机制。</span><span class="sxs-lookup"><span data-stu-id="092e3-532">A mechanism to divert traffic between datacenters.</span></span>

#### <a name="regionalglobal-presence"></a><span data-ttu-id="092e3-533">区域/全球影响力</span><span class="sxs-lookup"><span data-stu-id="092e3-533">Regional/global presence</span></span>

<span data-ttu-id="092e3-534">Azure 数据中心遍布世界各地。</span><span class="sxs-lookup"><span data-stu-id="092e3-534">Azure datacenters are present in numerous regions worldwide.</span></span> <span data-ttu-id="092e3-535">选择多个 Azure 数据中心时，客户需要考虑两个相关因素：地理距离和延迟。</span><span class="sxs-lookup"><span data-stu-id="092e3-535">When selecting multiple Azure datacenters, customers need to consider two related factors: geographical distances and latency.</span></span> <span data-ttu-id="092e3-536">为了提供最佳用户体验，请评估每个 VDC 实现之间的地理距离，以及每个 VDC 实现与最终用户之间的距离。</span><span class="sxs-lookup"><span data-stu-id="092e3-536">To offer the best user experience, evaluate the geographical distance between each VDC implementation as well as the distance between each VDC implementation and the end users.</span></span>

<span data-ttu-id="092e3-537">托管 VDC 实现的区域必须符合组织所属的法律管辖区域制定的法规要求。</span><span class="sxs-lookup"><span data-stu-id="092e3-537">The region in which VDC implementations are hosted must conform with regulatory requirements established by any legal jurisdiction under which your organization operates.</span></span>

#### <a name="disaster-recovery"></a><span data-ttu-id="092e3-538">灾难恢复</span><span class="sxs-lookup"><span data-stu-id="092e3-538">Disaster recovery</span></span>

<span data-ttu-id="092e3-539">灾难恢复计划的设计取决于工作负荷的类型以及能否在不同 VDC 实现之间同步这些工作负荷的状态。</span><span class="sxs-lookup"><span data-stu-id="092e3-539">The design of a disaster recovery plan depends on the types of workloads  and the ability to synchronize state of those workloads between different VDC implementations.</span></span> <span data-ttu-id="092e3-540">理想情况下，大多数客户希望使用快速故障转移机制，这就要求在运行多个 VDC 实现的部署之间同步应用程序数据。</span><span class="sxs-lookup"><span data-stu-id="092e3-540">Ideally, most customers desire a fast fail-over mechanism, and this may require application data synchronization between deployments running multiple VDC implementations.</span></span> <span data-ttu-id="092e3-541">但是，在设计灾难恢复计划时，必须考虑到大多数应用程序对该数据同步可能导致的延迟很敏感。</span><span class="sxs-lookup"><span data-stu-id="092e3-541">However, when designing disaster recovery plans, it's important to consider that most applications are sensitive to the latency that can be caused by this data synchronization.</span></span>

<span data-ttu-id="092e3-542">在不同 VDC 实现中对应用程序进行同步和检测信号监视时，这些实现必须通过网络通信。</span><span class="sxs-lookup"><span data-stu-id="092e3-542">Synchronization and heartbeat monitoring of applications in different VDC implementations requires them to communicate over the network.</span></span> <span data-ttu-id="092e3-543">可通过以下方式连接不同区域中的两个 VDC 实现：</span><span class="sxs-lookup"><span data-stu-id="092e3-543">Two VDC implementations in different regions can be connected through:</span></span>

-   <span data-ttu-id="092e3-544">VNet 对等互连 - VNet 对等互连可以跨区域连接多个中心</span><span class="sxs-lookup"><span data-stu-id="092e3-544">VNet Peering - VNet Peering can connect hubs across regions</span></span>
-   <span data-ttu-id="092e3-545">ExpressRoute 专用对等互连：在每个 VDC 实现中的多个中心连接到同一 ExpressRoute 线路时使用</span><span class="sxs-lookup"><span data-stu-id="092e3-545">ExpressRoute private peering when the hubs in each VDC implementation are connected to the same ExpressRoute circuit</span></span>
-   <span data-ttu-id="092e3-546">通过企业主干连接的多个 ExpressRoute 线路，以及连接到 ExpressRoute 线路的多个 VDC 实现</span><span class="sxs-lookup"><span data-stu-id="092e3-546">multiple ExpressRoute circuits connected via your corporate backbone and your multiple VDC implementations connected to the ExpressRoute circuits</span></span>
-   <span data-ttu-id="092e3-547">在每个 Azure 区域的 VDC 实现的中心区域之间建立的站点到站点 VPN 连接</span><span class="sxs-lookup"><span data-stu-id="092e3-547">Site-to-Site VPN connections between the hub zone of your VDC implementations in each Azure Region</span></span>

<span data-ttu-id="092e3-548">通常情况下，VNet 对等互连或 ExpressRoute 连接是首选的网络连接类型，因为通过 Microsoft 主干传输时的带宽更高，且延迟程度也一致。</span><span class="sxs-lookup"><span data-stu-id="092e3-548">Typically, VNet Peering or ExpressRoute connections are the preferred type of network connectivity due to the higher bandwidth and consistent latency levels when transiting through the Microsoft backbone.</span></span>

<span data-ttu-id="092e3-549">建议客户通过运行网络资格测试来验证这些连接的延迟和带宽，然后根据结果来确定是适合同步数据复制还是异步数据复制。</span><span class="sxs-lookup"><span data-stu-id="092e3-549">We recommend that customers run network qualification tests to verify the latency and bandwidth of these connections, and decide whether synchronous or asynchronous data replication is appropriate based on the result.</span></span> <span data-ttu-id="092e3-550">此外还必须根据最佳恢复时间目标 (RTO) 来衡量这些结果。</span><span class="sxs-lookup"><span data-stu-id="092e3-550">It's also important to weigh these results in view of the optimal recovery time objective (RTO).</span></span>

#### <a name="disaster-recovery-diverting-traffic-from-one-region-to-another"></a><span data-ttu-id="092e3-551">灾难恢复：将流量从一个区域转移到另一个区域</span><span class="sxs-lookup"><span data-stu-id="092e3-551">Disaster recovery: diverting traffic from one region to another</span></span>

<span data-ttu-id="092e3-552">[Azure 流量管理器][TM]定期检查不同 VDC 实现中公共终结点的服务运行状况。如果这些终结点出现故障，它会通过域名系统 (DNS) 将流量自动路由到辅助 VDC。</span><span class="sxs-lookup"><span data-stu-id="092e3-552">[Azure Traffic Manager][TM] periodically checks the service health of public endpoints in different VDC implementations and, if those endpoints fail, it routes automatically to the secondary VDC using the Domain Name System (DNS).</span></span> 

<span data-ttu-id="092e3-553">流量管理器使用 DNS，因此只能与 Azure 公共终结点配合使用。</span><span class="sxs-lookup"><span data-stu-id="092e3-553">Because it uses DNS, Traffic Manager is only for use with Azure public endpoints.</span></span>  <span data-ttu-id="092e3-554">此服务通常用于控制流量，或将流量转移到 VDC 实现的正常实例中的 Azure VM 和 Web 应用。</span><span class="sxs-lookup"><span data-stu-id="092e3-554">The service is typically used to control or divert traffic to Azure VMs and Web Apps in the healthy instance of a VDC implementation.</span></span> <span data-ttu-id="092e3-555">流量管理器具有复原能力，即使整个 Azure 区域出现故障，也可根据多个标准控制不同 VDC 中服务终结点的用户流量分配。</span><span class="sxs-lookup"><span data-stu-id="092e3-555">Traffic Manager is resilient even in the face of an entire Azure region failing and can control the distribution of user traffic for service endpoints in different VDCs based on several criteria.</span></span> <span data-ttu-id="092e3-556">例如，特定 VDC 实现中出现了服务故障，或选择了网络延迟最低的 VDC 实现。</span><span class="sxs-lookup"><span data-stu-id="092e3-556">For example, failure of a service in a specific VDC implementation, or selecting the VDC implementation with the lowest network latency.</span></span>

### <a name="summary"></a><span data-ttu-id="092e3-557">摘要</span><span class="sxs-lookup"><span data-stu-id="092e3-557">Summary</span></span>

<span data-ttu-id="092e3-558">可以通过虚拟数据中心进行数据中心迁移，在 Azure 中创建可缩放的体系结构，最大程度地使用云资源、降低成本并简化系统治理。</span><span class="sxs-lookup"><span data-stu-id="092e3-558">The Virtual datacenter is an approach to datacenter migration to create a scalable architecture in Azure that maximizes cloud resource use, reduces costs, and simplifies system governance.</span></span> <span data-ttu-id="092e3-559">VDC 基于中心辐射型网络拓扑，在中心提供常见的共享服务并允许分支中存在特定的应用程序/工作负荷。</span><span class="sxs-lookup"><span data-stu-id="092e3-559">The VDC is based on a hub and spoke network topology, providing common shared services in the hub and allowing specific applications/workloads in the spokes.</span></span> <span data-ttu-id="092e3-560">VDC 还可以与企业角色的结构匹配，方便不同的部门（例如中心 IT 部门、DevOps 部门、运营和维护部门）在履行具体角色时通力合作。</span><span class="sxs-lookup"><span data-stu-id="092e3-560">The VDC also matches the structure of company roles, where different departments such as Central IT, DevOps, operation and maintenance, all work together while performing their specific roles.</span></span> <span data-ttu-id="092e3-561">VDC 满足“直接迁移”的需求，也为原生云部署带来众多优势。</span><span class="sxs-lookup"><span data-stu-id="092e3-561">The VDC satisfies the requirements for a "Lift and Shift" migration, but also provides many advantages to native cloud deployments.</span></span>

## <a name="references"></a><span data-ttu-id="092e3-562">参考</span><span class="sxs-lookup"><span data-stu-id="092e3-562">References</span></span>

<span data-ttu-id="092e3-563">本文档中讨论了以下功能。</span><span class="sxs-lookup"><span data-stu-id="092e3-563">The following features were discussed in this document.</span></span> <span data-ttu-id="092e3-564">请通过以下链接了解更多信息。</span><span class="sxs-lookup"><span data-stu-id="092e3-564">Follow the links to learn more.</span></span>

| | | |
|-|-|-|
|<span data-ttu-id="092e3-565">网络功能</span><span class="sxs-lookup"><span data-stu-id="092e3-565">Network Features</span></span>|<span data-ttu-id="092e3-566">负载均衡</span><span class="sxs-lookup"><span data-stu-id="092e3-566">Load Balancing</span></span>|<span data-ttu-id="092e3-567">连接</span><span class="sxs-lookup"><span data-stu-id="092e3-567">Connectivity</span></span>|
|<span data-ttu-id="092e3-568">[Azure 虚拟网络][VNet]</span><span class="sxs-lookup"><span data-stu-id="092e3-568">[Azure Virtual Networks][VNet]</span></span></br><span data-ttu-id="092e3-569">[网络安全组][NSG]</span><span class="sxs-lookup"><span data-stu-id="092e3-569">[Network Security Groups][NSG]</span></span></br><span data-ttu-id="092e3-570">[NSG 日志][NSGLog]</span><span class="sxs-lookup"><span data-stu-id="092e3-570">[NSG Logs][NSGLog]</span></span></br><span data-ttu-id="092e3-571">[用户定义的路由][UDR]</span><span class="sxs-lookup"><span data-stu-id="092e3-571">[User Defined Routing][UDR]</span></span></br><span data-ttu-id="092e3-572">[网络虚拟设备][NVA]</span><span class="sxs-lookup"><span data-stu-id="092e3-572">[Network Virtual Appliances][NVA]</span></span></br><span data-ttu-id="092e3-573">[公共 IP 地址][PIP]</span><span class="sxs-lookup"><span data-stu-id="092e3-573">[Public IP Addresses][PIP]</span></span></br><span data-ttu-id="092e3-574">[Azure DDOS][DDOS]</span><span class="sxs-lookup"><span data-stu-id="092e3-574">[Azure DDOS][DDOS]</span></span></br><span data-ttu-id="092e3-575">[Azure 防火墙][AzFW]</span><span class="sxs-lookup"><span data-stu-id="092e3-575">[Azure Firewall][AzFW]</span></span></br><span data-ttu-id="092e3-576">[Azure DNS][DNS]</span><span class="sxs-lookup"><span data-stu-id="092e3-576">[Azure DNS][DNS]</span></span>|<span data-ttu-id="092e3-577">[Azure Front Door][AFD]</span><span class="sxs-lookup"><span data-stu-id="092e3-577">[Azure Front Door][AFD]</span></span></br><span data-ttu-id="092e3-578">[Azure 负载均衡器 (L3)][ALB]</span><span class="sxs-lookup"><span data-stu-id="092e3-578">[Azure Load Balancer (L3) ][ALB]</span></span></br><span data-ttu-id="092e3-579">[应用程序网关 (L7)][AppGW]</span><span class="sxs-lookup"><span data-stu-id="092e3-579">[Application Gateway (L7) ][AppGW]</span></span></br><span data-ttu-id="092e3-580">[Web 应用程序防火墙][WAF]</span><span class="sxs-lookup"><span data-stu-id="092e3-580">[Web Application Firewall][WAF]</span></span></br><span data-ttu-id="092e3-581">[Azure 流量管理器][TM]</span><span class="sxs-lookup"><span data-stu-id="092e3-581">[Azure Traffic Manager][TM]</span></span></br></br></br></br></br> |<span data-ttu-id="092e3-582">[VNet 对等互连][VNetPeering]</span><span class="sxs-lookup"><span data-stu-id="092e3-582">[VNet Peering][VNetPeering]</span></span></br><span data-ttu-id="092e3-583">[虚拟专用网络][VPN]</span><span class="sxs-lookup"><span data-stu-id="092e3-583">[Virtual Private Network][VPN]</span></span></br><span data-ttu-id="092e3-584">[虚拟 WAN][vWAN]</span><span class="sxs-lookup"><span data-stu-id="092e3-584">[Virtual WAN][vWAN]</span></span></br><span data-ttu-id="092e3-585">[ExpressRoute][ExR]</span><span class="sxs-lookup"><span data-stu-id="092e3-585">[ExpressRoute][ExR]</span></span></br><span data-ttu-id="092e3-586">[ExpressRoute Direct][ExRD]</span><span class="sxs-lookup"><span data-stu-id="092e3-586">[ExpressRoute Direct][ExRD]</span></span></br></br></br></br></br>
|<span data-ttu-id="092e3-587">标识</span><span class="sxs-lookup"><span data-stu-id="092e3-587">Identity</span></span></br>|<span data-ttu-id="092e3-588">监视</span><span class="sxs-lookup"><span data-stu-id="092e3-588">Monitoring</span></span></br>|<span data-ttu-id="092e3-589">最佳实践</span><span class="sxs-lookup"><span data-stu-id="092e3-589">Best Practices</span></span></br>|
|<span data-ttu-id="092e3-590">[Azure Active Directory][AAD]</span><span class="sxs-lookup"><span data-stu-id="092e3-590">[Azure Active Directory][AAD]</span></span></br><span data-ttu-id="092e3-591">[多重身份验证][MFA]</span><span class="sxs-lookup"><span data-stu-id="092e3-591">[Multi-Factor Authentication][MFA]</span></span></br><span data-ttu-id="092e3-592">[基于角色的访问控制][RBAC]</span><span class="sxs-lookup"><span data-stu-id="092e3-592">[Role Base Access Controls][RBAC]</span></span></br><span data-ttu-id="092e3-593">[默认 Azure AD 角色][Roles]</span><span class="sxs-lookup"><span data-stu-id="092e3-593">[Default Azure AD Roles][Roles]</span></span></br></br></br> |<span data-ttu-id="092e3-594">[网络观察程序][NetWatch]</span><span class="sxs-lookup"><span data-stu-id="092e3-594">[Network Watcher][NetWatch]</span></span></br><span data-ttu-id="092e3-595">[Azure Monitor][Monitor]</span><span class="sxs-lookup"><span data-stu-id="092e3-595">[Azure Monitor][Monitor]</span></span></br><span data-ttu-id="092e3-596">[活动日志][ActLog]</span><span class="sxs-lookup"><span data-stu-id="092e3-596">[Activity Logs][ActLog]</span></span></br><span data-ttu-id="092e3-597">[诊断日志][DiagLog]</span><span class="sxs-lookup"><span data-stu-id="092e3-597">[Diagnostic Logs][DiagLog]</span></span></br><span data-ttu-id="092e3-598">[Microsoft Operations Management Suite][OMS]</span><span class="sxs-lookup"><span data-stu-id="092e3-598">[Microsoft Operations Management Suite][OMS]</span></span></br><span data-ttu-id="092e3-599">[网络性能监视器][NPM]</span><span class="sxs-lookup"><span data-stu-id="092e3-599">[Network Performance Monitor][NPM]</span></span>|<span data-ttu-id="092e3-600">[外围网络最佳实践][DMZ]</span><span class="sxs-lookup"><span data-stu-id="092e3-600">[Perimeter Networks Best Practices][DMZ]</span></span></br><span data-ttu-id="092e3-601">[订阅管理][SubMgmt]</span><span class="sxs-lookup"><span data-stu-id="092e3-601">[Subscription Management][SubMgmt]</span></span></br><span data-ttu-id="092e3-602">[资源组管理][RGMgmt]</span><span class="sxs-lookup"><span data-stu-id="092e3-602">[Resource Group Management][RGMgmt]</span></span></br><span data-ttu-id="092e3-603">[Azure 订阅限制][Limits]</span><span class="sxs-lookup"><span data-stu-id="092e3-603">[Azure Subscription Limits][Limits]</span></span> </br></br></br>|
|<span data-ttu-id="092e3-604">其他 Azure 服务</span><span class="sxs-lookup"><span data-stu-id="092e3-604">Other Azure Services</span></span>|
|<span data-ttu-id="092e3-605">[Azure Web 应用][WebApps]</span><span class="sxs-lookup"><span data-stu-id="092e3-605">[Azure Web Apps][WebApps]</span></span></br><span data-ttu-id="092e3-606">[HDInsights (Hadoop)][HDI]</span><span class="sxs-lookup"><span data-stu-id="092e3-606">[HDInsights (Hadoop) ][HDI]</span></span></br><span data-ttu-id="092e3-607">[事件中心][EventHubs]</span><span class="sxs-lookup"><span data-stu-id="092e3-607">[Event Hubs][EventHubs]</span></span></br><span data-ttu-id="092e3-608">[服务总线][ServiceBus]</span><span class="sxs-lookup"><span data-stu-id="092e3-608">[Service Bus][ServiceBus]</span></span>|

## <a name="next-steps"></a><span data-ttu-id="092e3-609">后续步骤</span><span class="sxs-lookup"><span data-stu-id="092e3-609">Next Steps</span></span>

 - <span data-ttu-id="092e3-610">探索 [VNet 对等互连][VNetPeering]，这是 VDC 中心辐射型设计的基础技术</span><span class="sxs-lookup"><span data-stu-id="092e3-610">Explore [VNet Peering][VNetPeering], the underpinning technology for VDC hub and spoke designs</span></span>
 - <span data-ttu-id="092e3-611">实现 [Azure AD][AAD] 以开始探索 [RBAC][RBAC]</span><span class="sxs-lookup"><span data-stu-id="092e3-611">Implement [Azure AD][AAD] to get started with [RBAC][RBAC] exploration</span></span>
 - <span data-ttu-id="092e3-612">根据所在组织的结构、要求和策略开发订阅与资源管理模型和 RBAC 模型。</span><span class="sxs-lookup"><span data-stu-id="092e3-612">Develop a Subscription and Resource management model and RBAC model to meet the structure, requirements, and policies of your organization.</span></span> <span data-ttu-id="092e3-613">最重要的活动是计划。</span><span class="sxs-lookup"><span data-stu-id="092e3-613">The most important activity is planning.</span></span> <span data-ttu-id="092e3-614">尽可能根据实际情况进行重组、合并和新产品线等方面的计划。m <!--Image References--></span><span class="sxs-lookup"><span data-stu-id="092e3-614">As much as practical, plan for reorganizations, mergers, new product lines, etc. m <!--Image References--></span></span>
[0]: ./images/networking-redundant-equipment.png "组件重叠示例" 
[1]: ./images/networking-vdc-high-level.png "中心辐射型 VDC 的概要示例"
[2]: ./images/networking-hub-spokes-cluster.png "中心辐射型群集"
[3]: ./images/networking-spoke-to-spoke.png "辐射到辐射"
[4]: ./images/networking-vdc-block-level-diagram.png "VDC 的块级关系图"
[5]: ./images/networking-users-groups-subsciptions.png "用户、组、订阅和项目"
[6]: ./images/networking-infrastructure-high-level.png "高级别基础结构关系图"
[7]: ./images/networking-highlevel-perimeter-networks.png "高级别基础结构关系图"
[8]: ./images/networking-vnet-peering-perimeter-neworks.png "VNet 对等互连和外围网络"
[9]: ./images/networking-high-level-diagram-monitoring.png "用于监视的高级别关系图"
[10]: ./images/networking-high-level-workloads.png "用于工作负荷的高级别关系图"

<!--Link References-->
[Limits]: /azure/azure-subscription-service-limits
[Roles]: /azure/role-based-access-control/built-in-roles
[VNet]: /azure/virtual-network/virtual-networks-overview
[NSG]: /azure/virtual-network/virtual-networks-nsg
[DNS]: /azure/dns/dns-overview
[PrivateDNS]: /azure/dns/private-dns-overview
[VNetPeering]: /azure/virtual-network/virtual-network-peering-overview 
[UDR]: /azure/virtual-network/virtual-networks-udr-overview 
[RBAC]: /azure/role-based-access-control/overview
[MFA]: /azure/multi-factor-authentication/multi-factor-authentication
[AAD]: /azure/active-directory/active-directory-whatis
[VPN]: /azure/vpn-gateway/vpn-gateway-about-vpngateways 
[ExR]: /azure/expressroute/expressroute-introduction
[ExRD]: /azure/expressroute/expressroute-erdirect-about
[vWAN]: /azure/virtual-wan/virtual-wan-about
[NVA]: /azure/architecture/reference-architectures/dmz/nva-ha
[AzFW]: /azure/firewall/overview
[SubMgmt]: /azure/architecture/cloud-adoption/appendix/azure-scaffold 
[RGMgmt]: /azure/azure-resource-manager/resource-group-overview
[DMZ]: /azure/best-practices-network-security
[ALB]: /azure/load-balancer/load-balancer-overview
[DDOS]: /azure/virtual-network/ddos-protection-overview
[PIP]: /azure/virtual-network/resource-groups-networking#public-ip-address
[AFD]: /azure/frontdoor/front-door-overview
[AppGW]: /azure/application-gateway/application-gateway-introduction
[WAF]: /azure/application-gateway/application-gateway-web-application-firewall-overview
[Monitor]: /azure/monitoring-and-diagnostics/
[ActLog]: /azure/monitoring-and-diagnostics/monitoring-overview-activity-logs 
[DiagLog]: /azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs
[NSGLog]: /azure/virtual-network/virtual-network-nsg-manage-log
[OMS]: /azure/operations-management-suite/operations-management-suite-overview
[NPM]: /azure/log-analytics/log-analytics-network-performance-monitor
[NetWatch]: /azure/network-watcher/network-watcher-monitoring-overview
[WebApps]: /azure/app-service/
[HDI]: /azure/hdinsight/hdinsight-hadoop-introduction
[EventHubs]: /azure/event-hubs/event-hubs-what-is-event-hubs 
[ServiceBus]: /azure/service-bus-messaging/service-bus-messaging-overview
[TM]: /azure/traffic-manager/traffic-manager-overview