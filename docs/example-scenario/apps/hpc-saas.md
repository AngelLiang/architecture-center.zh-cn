---
title: 计算机辅助工程服务
titleSuffix: Azure Example Scenarios
description: 为 Azure 上的计算机辅助工程 (CAE) 提供软件即服务 (SaaS) 平台。
author: alexbuckgit
ms.date: 08/22/2018
ms.topic: example-scenario
ms.service: architecture-center
ms.subservice: example-scenario
ms.custom: HPC
social_image_url: /azure/architecture/example-scenario/apps/media/architecture-hpc-saas.png
ms.openlocfilehash: bd38bd0042fceeab6efe04d7b6d1477d17ada7f5
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/20/2019
ms.locfileid: "58249632"
---
# <a name="a-computer-aided-engineering-service-on-azure"></a><span data-ttu-id="6155e-103">Azure 上的计算机辅助工程服务</span><span class="sxs-lookup"><span data-stu-id="6155e-103">A computer-aided engineering service on Azure</span></span>

<span data-ttu-id="6155e-104">本示例方案演示如何交付基于 Azure 的高性能计算 (HPC) 功能构建的软件即服务 (SaaS) 平台。</span><span class="sxs-lookup"><span data-stu-id="6155e-104">This example scenario demonstrates delivery of a software-as-a-service (SaaS) platform built on the high-performance computing (HPC) capabilities of Azure.</span></span> <span data-ttu-id="6155e-105">本方案基于某个工程软件解决方案。</span><span class="sxs-lookup"><span data-stu-id="6155e-105">This scenario is based on an engineering software solution.</span></span> <span data-ttu-id="6155e-106">但是，体系结构与需要 HPC 资源的其他行业（例如图像渲染、复杂建模和金融风险计算）相关。</span><span class="sxs-lookup"><span data-stu-id="6155e-106">However, the architecture is relevant to other industries requiring HPC resources such as image rendering, complex modeling, and financial risk calculation.</span></span>

<span data-ttu-id="6155e-107">本示例演示某家工程软件提供商如何向工程公司和制造企业交付计算机辅助工程 (CAE) 应用程序。</span><span class="sxs-lookup"><span data-stu-id="6155e-107">This example demonstrates an engineering software provider that delivers computer-aided engineering (CAE) applications to engineering firms and manufacturing enterprises.</span></span> <span data-ttu-id="6155e-108">CAE 解决方案可以实现创新、减少开发时间，并在整个产品设计生命周期内降低成本。</span><span class="sxs-lookup"><span data-stu-id="6155e-108">CAE solutions enable innovation, reduce development times, and lower costs throughout the lifetime of a product's design.</span></span> <span data-ttu-id="6155e-109">这些解决方案需要大量的计算资源，并且经常要处理大量数据。</span><span class="sxs-lookup"><span data-stu-id="6155e-109">These solutions require substantial compute resources and often process high data volumes.</span></span> <span data-ttu-id="6155e-110">本地 HPC 设备或高端工作站的高企成本往往让小型工程公司、创业者和学生觉得这些技术高不可攀。</span><span class="sxs-lookup"><span data-stu-id="6155e-110">The high costs of an on-premises HPC appliance or high-end workstations often put these technologies out of reach for small engineering firms, entrepreneurs, and students.</span></span>

<span data-ttu-id="6155e-111">该公司希望通过构建以基于云的 HPC 技术作为后盾的 SaaS 平台，来拓展其应用程序的市场。</span><span class="sxs-lookup"><span data-stu-id="6155e-111">The company wants to expand the market for its applications by building a SaaS platform backed by cloud-based HPC technologies.</span></span> <span data-ttu-id="6155e-112">其客户应可根据需求支付计算资源费用，并可以运用其他公司不能优惠提供的大规模计算能力。</span><span class="sxs-lookup"><span data-stu-id="6155e-112">Their customers should be able to pay for compute resources as needed and access massive computing power that would be unaffordable otherwise.</span></span>

<span data-ttu-id="6155e-113">该公司的目标包括：</span><span class="sxs-lookup"><span data-stu-id="6155e-113">The company's goals include:</span></span>

- <span data-ttu-id="6155e-114">利用 Azure 中的 HPC 功能可以加速产品设计和测试过程。</span><span class="sxs-lookup"><span data-stu-id="6155e-114">Taking advantage of HPC capabilities in Azure to accelerate the product design and testing process.</span></span>
- <span data-ttu-id="6155e-115">使用最新的硬件创新可以运行复杂的仿真，同时可将较简单仿真的成本降到最低。</span><span class="sxs-lookup"><span data-stu-id="6155e-115">Using the latest hardware innovations to run complex simulations, while minimizing the costs for simpler simulations.</span></span>
- <span data-ttu-id="6155e-116">可在 Web 浏览器中实现逼真的可视化和渲染，而无需高端的工程工作站。</span><span class="sxs-lookup"><span data-stu-id="6155e-116">Enabling true-to-life visualization and rendering in a web browser, without requiring a high-end engineering workstation.</span></span>

## <a name="relevant-use-cases"></a><span data-ttu-id="6155e-117">相关用例</span><span class="sxs-lookup"><span data-stu-id="6155e-117">Relevant use cases</span></span>

<span data-ttu-id="6155e-118">其他相关用例包括：</span><span class="sxs-lookup"><span data-stu-id="6155e-118">Other relevant use cases include:</span></span>

- <span data-ttu-id="6155e-119">基因组学研究</span><span class="sxs-lookup"><span data-stu-id="6155e-119">Genomics research</span></span>
- <span data-ttu-id="6155e-120">天气仿真</span><span class="sxs-lookup"><span data-stu-id="6155e-120">Weather simulation</span></span>
- <span data-ttu-id="6155e-121">计算化学应用</span><span class="sxs-lookup"><span data-stu-id="6155e-121">Computational chemistry applications</span></span>

## <a name="architecture"></a><span data-ttu-id="6155e-122">体系结构</span><span class="sxs-lookup"><span data-stu-id="6155e-122">Architecture</span></span>

![支持 HPC 功能的 SaaS 解决方案的体系结构][architecture]

- <span data-ttu-id="6155e-124">用户可以使用 [Apache Guacamole 服务](https://guacamole.apache.org/)，在浏览器中通过基于 HTML5 的 RDP 连接来访问 NV 系列虚拟机 (VM)。</span><span class="sxs-lookup"><span data-stu-id="6155e-124">Users can access NV-series virtual machines (VMs) via a browser with an HTML5-based RDP connection using the [Apache Guacamole service](https://guacamole.apache.org/).</span></span> <span data-ttu-id="6155e-125">这些 VM 实例为渲染和协作任务提供强大的 GPU。</span><span class="sxs-lookup"><span data-stu-id="6155e-125">These VM instances provide powerful GPUs for rendering and collaborative tasks.</span></span> <span data-ttu-id="6155e-126">用户可以编辑其设计和查看结果，而无需访问高端移动计算设备或便携式计算机。</span><span class="sxs-lookup"><span data-stu-id="6155e-126">Users can edit their designs and view their results without needing access to high-end mobile computing devices or laptops.</span></span> <span data-ttu-id="6155e-127">计划程序基于用户定义的试探法运转其他 VM。</span><span class="sxs-lookup"><span data-stu-id="6155e-127">The scheduler spins up additional VMs based on user-defined heuristics.</span></span>
- <span data-ttu-id="6155e-128">在桌面 CAD 会话中，用户可以提交工作负荷，以便在可用的 HPC 群集节点上执行。</span><span class="sxs-lookup"><span data-stu-id="6155e-128">From a desktop CAD session, users can submit workloads for execution on available HPC cluster nodes.</span></span> <span data-ttu-id="6155e-129">这些工作负荷执行压力分析或计算流体动力学计算等任务，消除了对专用本地计算群集的需求。</span><span class="sxs-lookup"><span data-stu-id="6155e-129">These workloads perform tasks such as stress analysis or computational fluid dynamics calculations, eliminating the need for dedicated on-premises compute clusters.</span></span> <span data-ttu-id="6155e-130">可以基于用户对计算资源的现有需求，将这些群集节点配置为根据负载或队列深度进行自动缩放。</span><span class="sxs-lookup"><span data-stu-id="6155e-130">These cluster nodes can be configured to autoscale based on load or queue depth based on active user demand for compute resources.</span></span>
- <span data-ttu-id="6155e-131">Azure Kubernetes 服务 (AKS) 用于托管提供给最终用户的 Web 资源。</span><span class="sxs-lookup"><span data-stu-id="6155e-131">Azure Kubernetes Service (AKS) is used to host the web resources available to end users.</span></span>

### <a name="components"></a><span data-ttu-id="6155e-132">组件</span><span class="sxs-lookup"><span data-stu-id="6155e-132">Components</span></span>

- <span data-ttu-id="6155e-133">[H 系列虚拟机](/azure/virtual-machines/linux/sizes-hpc)用于运行计算密集型仿真，例如分子建模和计算流体动力学。</span><span class="sxs-lookup"><span data-stu-id="6155e-133">[H-series virtual machines](/azure/virtual-machines/linux/sizes-hpc) are used to run compute-intensive simulations such as molecular modeling and computational fluid dynamics.</span></span> <span data-ttu-id="6155e-134">该解决方案还利用了远程直接内存访问 (RDMA) 连接和 InfiniBand 网络等技术。</span><span class="sxs-lookup"><span data-stu-id="6155e-134">The solution also takes advantage of technologies like remote direct memory access (RDMA) connectivity and InfiniBand networking.</span></span>
- <span data-ttu-id="6155e-135">[NV 系列虚拟机](/azure/virtual-machines/windows/sizes-gpu)在标准的 Web 浏览器中为工程师提供高端工作站功能。</span><span class="sxs-lookup"><span data-stu-id="6155e-135">[NV-series virtual machines](/azure/virtual-machines/windows/sizes-gpu) give engineers high-end workstation functionality from a standard web browser.</span></span> <span data-ttu-id="6155e-136">这些虚拟机配备了支持高级渲染并可运行单精度工作负荷的 NVIDIA Tesla M60 GPU。</span><span class="sxs-lookup"><span data-stu-id="6155e-136">These virtual machines have NVIDIA Tesla M60 GPUs that support advanced rendering and can run single precision workloads.</span></span>
- <span data-ttu-id="6155e-137">运行 CentOS 的[常规用途虚拟机](/azure/virtual-machines/linux/sizes-general)可以处理更多传统工作负荷，例如 Web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="6155e-137">[General purpose virtual machines](/azure/virtual-machines/linux/sizes-general) running CentOS handle more traditional workloads such as web applications.</span></span>
- <span data-ttu-id="6155e-138">[应用程序网关](/azure/application-gateway/overview)可对传入 Web 服务器的请求进行负载均衡。</span><span class="sxs-lookup"><span data-stu-id="6155e-138">[Application Gateway](/azure/application-gateway/overview) load balances the requests coming into the web servers.</span></span>
- <span data-ttu-id="6155e-139">[Azure Kubernetes 服务 (AKS)](/azure/aks/intro-kubernetes) 用于针对不需要 HPC 高端功能或 GPU 虚拟机的仿真，以较低的成本运行可缩放的工作负荷。</span><span class="sxs-lookup"><span data-stu-id="6155e-139">[Azure Kubernetes Service (AKS)](/azure/aks/intro-kubernetes) is used to run scalable workloads at a lower cost for simulations that don't require the high end capabilities of HPC or GPU virtual machines.</span></span>
- <span data-ttu-id="6155e-140">[Altair PBS Works Suite](https://www.pbsworks.com/PBSProduct.aspx?n=PBS-Works-Suite&c=Overview-and-Capabilities) 协调 HPC 工作流，确保可以提供足够的虚拟机实例来处理当前负载。</span><span class="sxs-lookup"><span data-stu-id="6155e-140">[Altair PBS Works Suite](https://www.pbsworks.com/PBSProduct.aspx?n=PBS-Works-Suite&c=Overview-and-Capabilities) orchestrates the HPC workflow, ensuring that enough virtual machine instances are available to handle the current load.</span></span> <span data-ttu-id="6155e-141">当需求减少时，它还可以解除分配虚拟机以降低成本。</span><span class="sxs-lookup"><span data-stu-id="6155e-141">It also deallocates virtual machines when demand is lower to reduce costs.</span></span>
- <span data-ttu-id="6155e-142">[Blob 存储](/azure/storage/blobs/storage-blobs-introduction)存储用于支持计划作业的文件。</span><span class="sxs-lookup"><span data-stu-id="6155e-142">[Blob storage](/azure/storage/blobs/storage-blobs-introduction) stores files that support the scheduled jobs.</span></span>

### <a name="alternatives"></a><span data-ttu-id="6155e-143">备选项</span><span class="sxs-lookup"><span data-stu-id="6155e-143">Alternatives</span></span>

- <span data-ttu-id="6155e-144">[Azure CycleCloud](/azure/cyclecloud/overview) 简化了 HPC 群集的创建、管理、操作和优化。</span><span class="sxs-lookup"><span data-stu-id="6155e-144">[Azure CycleCloud](/azure/cyclecloud/overview) simplifies creating, managing, operating, and optimizing HPC clusters.</span></span> <span data-ttu-id="6155e-145">它提供高级策略和监管功能。</span><span class="sxs-lookup"><span data-stu-id="6155e-145">It offers advanced policy and governance features.</span></span> <span data-ttu-id="6155e-146">CycleCloud 支持任何作业计划程序或软件堆栈。</span><span class="sxs-lookup"><span data-stu-id="6155e-146">CycleCloud supports any job scheduler or software stack.</span></span>
- <span data-ttu-id="6155e-147">[HPC Pack](/azure/virtual-machines/windows/hpcpack-cluster-options) 可为基于 Windows Server 的工作负荷创建和管理 Azure HPC 群集。</span><span class="sxs-lookup"><span data-stu-id="6155e-147">[HPC Pack](/azure/virtual-machines/windows/hpcpack-cluster-options) can create and manage an Azure HPC cluster for Windows Server-based workloads.</span></span> <span data-ttu-id="6155e-148">HPC Pack 不适用于基于 Linux 的工作负荷。</span><span class="sxs-lookup"><span data-stu-id="6155e-148">HPC Pack isn't an option for Linux-based workloads.</span></span>
- <span data-ttu-id="6155e-149">[Azure Automation State Configuration](/azure/automation/automation-dsc-overview) 提供基础结构即代码方法用于定义要部署的虚拟机和软件。</span><span class="sxs-lookup"><span data-stu-id="6155e-149">[Azure Automation State Configuration](/azure/automation/automation-dsc-overview) provides an infrastructure-as-code approach to defining the virtual machines and software to be deployed.</span></span> <span data-ttu-id="6155e-150">可以基于提交到作业队列的作业数，使用计算节点的自动缩放规则将虚拟机部署为虚拟机规模集的一部分。</span><span class="sxs-lookup"><span data-stu-id="6155e-150">Virtual machines can be deployed as part of a virtual machine scale set, with autoscaling rules for compute nodes based on the number of jobs submitted to the job queue.</span></span> <span data-ttu-id="6155e-151">需要新虚拟机时，可以使用 Azure 映像库中最新的修补映像预配该虚拟机，然后通过 PowerShell DSC 配置脚本安装并配置所需的软件。</span><span class="sxs-lookup"><span data-stu-id="6155e-151">When a new virtual machine is needed, it is provisioned using the latest patched image from the Azure image gallery, and then the required software is installed and configured via a PowerShell DSC configuration script.</span></span>
- [<span data-ttu-id="6155e-152">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="6155e-152">Azure Functions</span></span>](/azure/azure-functions/functions-overview)

## <a name="considerations"></a><span data-ttu-id="6155e-153">注意事项</span><span class="sxs-lookup"><span data-stu-id="6155e-153">Considerations</span></span>

- <span data-ttu-id="6155e-154">尽管使用基础结构即代码方法能够很好地管理虚拟机生成定义，但使用脚本预配新虚拟机可能需要花费很长的时间。</span><span class="sxs-lookup"><span data-stu-id="6155e-154">While using an infrastructure-as-code approach is a great way to manage virtual machine build definitions, it can take a long time to provision a new virtual machine using a script.</span></span> <span data-ttu-id="6155e-155">此解决方案提供一种折衷方式：使用 DSC 脚本定期创建一个黄金映像，然后可以使用该映像来预配新虚拟机，其速度比使用 DSC 按需生成完整的 VM 更快。</span><span class="sxs-lookup"><span data-stu-id="6155e-155">This solution found a good middle ground by using the DSC script to periodically create a golden image, which can then be used to provision a new virtual machine faster than completely building a VM on demand using DSC.</span></span> <span data-ttu-id="6155e-156">Azure DevOps Services 或其他 CI/CD 工具可以使用 DSC 脚本定期刷新黄金映像。</span><span class="sxs-lookup"><span data-stu-id="6155e-156">Azure DevOps Services or other CI/CD tooling can periodically refresh golden images using DSC scripts.</span></span>
- <span data-ttu-id="6155e-157">在总体解决方案成本与快速提供计算资源之间进行平衡一个重要考虑因素。</span><span class="sxs-lookup"><span data-stu-id="6155e-157">Balancing overall solution costs with fast availability of compute resources is a key consideration.</span></span> <span data-ttu-id="6155e-158">预配 N 系列虚拟机实例池并将其置入解除分配状态可以降低运营成本。</span><span class="sxs-lookup"><span data-stu-id="6155e-158">Provisioning a pool of N-series virtual machine instances and putting them in a deallocated state lowers the operating costs.</span></span> <span data-ttu-id="6155e-159">需要额外的虚拟机时，重新分配现有实例需要在另一台主机上打开虚拟机，但可以消除 OS 识别并安装 GPU 驱动程序所需的 PCI 总线检测时间，因为在重启时，取消预配后再重新预配的虚拟机将为 GPU 保留相同的 PCI 总线。</span><span class="sxs-lookup"><span data-stu-id="6155e-159">When an additional virtual machine is needed, reallocating an existing instance will involve powering up the virtual machine on a different host, but the PCI bus detection time required by the OS to identify and install drivers for the GPU is eliminated because a virtual machine that is deprovisioned and then reprovisioned will retain the same PCI bus for the GPU upon restart.</span></span>
- <span data-ttu-id="6155e-160">原始体系结构完全依赖于 Azure 虚拟机来运行仿真。</span><span class="sxs-lookup"><span data-stu-id="6155e-160">The original architecture relied entirely on Azure virtual machines for running simulations.</span></span> <span data-ttu-id="6155e-161">为了降低不需要所有虚拟机功能的工作负荷所产生的成本，这些工作负荷已容器化并已部署到 Azure Kubernetes 服务 (AKS) 中。</span><span class="sxs-lookup"><span data-stu-id="6155e-161">In order to reduce costs for workloads that didn't require all the capabilities of a virtual machine, these workloads were containerized and deployed to Azure Kubernetes Service (AKS).</span></span>
- <span data-ttu-id="6155e-162">公司员工对开源技术已有一定的技能。</span><span class="sxs-lookup"><span data-stu-id="6155e-162">The company's workforce had existing skills in open-source technologies.</span></span> <span data-ttu-id="6155e-163">他们可以利用这些技能基于 Linux 和 Kubernetes 等技术生成解决方案。</span><span class="sxs-lookup"><span data-stu-id="6155e-163">They can take advantage of these skills by building on technologies like Linux and Kubernetes.</span></span>

## <a name="pricing"></a><span data-ttu-id="6155e-164">定价</span><span class="sxs-lookup"><span data-stu-id="6155e-164">Pricing</span></span>

<span data-ttu-id="6155e-165">为了帮助你了解运行本方案所产生的成本，我们在[成本计算器示例][calculator]中预配置了多个所需的服务。</span><span class="sxs-lookup"><span data-stu-id="6155e-165">To help you explore the cost of running this scenario, many of the required services are pre-configured in a [cost calculator example][calculator].</span></span> <span data-ttu-id="6155e-166">解决方案的成本取决于满足要求所需的服务数量和规模。</span><span class="sxs-lookup"><span data-stu-id="6155e-166">The costs of your solution are dependent on the number and scale of services needed to meet your requirements.</span></span>

<span data-ttu-id="6155e-167">以下因素与本解决方案的绝大部分成本相关：</span><span class="sxs-lookup"><span data-stu-id="6155e-167">The following considerations will drive a substantial portion of the costs for this solution:</span></span>

- <span data-ttu-id="6155e-168">预配更多的实例时，Azure 虚拟机的成本将呈线性增加。</span><span class="sxs-lookup"><span data-stu-id="6155e-168">Azure virtual machine costs increase linearly as additional instances are provisioned.</span></span> <span data-ttu-id="6155e-169">已解除分配的虚拟机只会产生存储成本，而不产生计算成本。</span><span class="sxs-lookup"><span data-stu-id="6155e-169">Virtual machines that are deallocated will only incur storage costs, and not compute costs.</span></span> <span data-ttu-id="6155e-170">今后在需求提高时，可以重新分配这些已解除分配的虚拟机。</span><span class="sxs-lookup"><span data-stu-id="6155e-170">These deallocated machines can then be reallocated when demand is high.</span></span>
- <span data-ttu-id="6155e-171">Azure Kubernetes 服务成本取决于选择用来支持工作负荷的 VM 类型。</span><span class="sxs-lookup"><span data-stu-id="6155e-171">Azure Kubernetes Services costs are based on the VM type chosen to support the workload.</span></span> <span data-ttu-id="6155e-172">成本根据群集中的 VM 数呈线性增加。</span><span class="sxs-lookup"><span data-stu-id="6155e-172">The costs will increase linearly based on the number of VMs in the cluster.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6155e-173">后续步骤</span><span class="sxs-lookup"><span data-stu-id="6155e-173">Next Steps</span></span>

- <span data-ttu-id="6155e-174">阅读 [Altair 客户案例][source-document]。</span><span class="sxs-lookup"><span data-stu-id="6155e-174">Read the [Altair customer story][source-document].</span></span> <span data-ttu-id="6155e-175">此示例方案基于其体系结构的版本。</span><span class="sxs-lookup"><span data-stu-id="6155e-175">This example scenario is based on a version of their architecture.</span></span>
- <span data-ttu-id="6155e-176">查看 Azure 中提供的其他[大型计算解决方案](https://azure.microsoft.com/solutions/big-compute)。</span><span class="sxs-lookup"><span data-stu-id="6155e-176">Review other [Big Compute solutions](https://azure.microsoft.com/solutions/big-compute) available in Azure.</span></span>

<!-- links -->
[architecture]: ./media/architecture-hpc-saas.png
[source-document]: https://customers.microsoft.com/story/altair-manufacturing-azure
[calculator]: https://azure.com/e/3cb9ccdc893f41ffbcdb00c328178ccf
